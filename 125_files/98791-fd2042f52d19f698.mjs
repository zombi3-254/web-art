(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[98791,39395,96975],{468966:e=>{e.exports="https://s.pinimg.com/webapp/goodIdea-b770896d.svg"},529084:e=>{e.exports="https://s.pinimg.com/webapp/haha-e2800d2d.svg"},893870:e=>{e.exports="https://s.pinimg.com/webapp/love-c31e0b8d.svg"},664507:e=>{e.exports="https://s.pinimg.com/webapp/thanks-62775475.svg"},369765:e=>{e.exports="https://s.pinimg.com/webapp/wow-3cb697ef.svg"},325970:(e,t,i)=>{var n=i(863012),o=i(379095);e.exports=function(e,t){return n(e,t,(function(t,i){return o(e,i)}))}},863012:(e,t,i)=>{var n=i(297786),o=i(10611),r=i(671811);e.exports=function(e,t,i){for(var a=-1,s=t.length,l={};++a<s;){var d=t[a],c=n(e,d);i(c,d)&&o(l,r(d,e),c)}return l}},10611:(e,t,i)=>{var n=i(234865),o=i(671811),r=i(565776),a=i(513218),s=i(240327);e.exports=function(e,t,i,l){if(!a(e))return e;for(var d=-1,c=(t=o(t,e)).length,u=c-1,p=e;null!=p&&++d<c;){var h=s(t[d]),m=i;if("__proto__"===h||"constructor"===h||"prototype"===h)return e;if(d!=u){var g=p[h];void 0===(m=l?l(g,h,p):void 0)&&(m=a(g)?g:r(t[d+1])?[]:{})}n(p,h,m),p=p[h]}return e}},554290:(e,t,i)=>{var n=i(406557);e.exports=function(e){return"function"==typeof e?e:n}},499021:(e,t,i)=>{var n=i(385564),o=i(545357),r=i(430061);e.exports=function(e){return r(o(e,void 0,n),e+"")}},385564:(e,t,i)=>{var n=i(121078);e.exports=function(e){return(null==e?0:e.length)?n(e,1):[]}},478718:(e,t,i)=>{var n=i(325970),o=i(499021)((function(e,t){return null==e?{}:n(e,t)}));e.exports=o},498913:(e,t,i)=>{var n=i(422545),o=i(554290),r=i(640554),a=4294967295,s=Math.min;e.exports=function(e,t){if((e=r(e))<1||e>9007199254740991)return[];var i=a,l=s(e,a);t=o(t),e-=a;for(var d=n(l,t);++i<e;)t(i);return d}},778423:e=>{e.exports={ReasonToChoose:{REPIN_BOARD:1,USER_ACTIVITY:4,CLICKTHROUGH:9,FRESH_REPIN_BOARD:47,FRESH_CLICKTHROUGH:48,FRESH_USER_ACTIVITY:49,LOCAL_REPIN_BOARD:13,LOCAL_CLICKTHROUGH:32,LOCAL_USER_ACTIVITY:33,P2P_CLICKTHROUGH:28,INSTANT_PFY_NON_MATERIALIZABLE:36,FOLLOWED_INTEREST:5,TOPIC_BEST_PINS:70,EMBEDDING_BASED_BEST_PINS:173,RECOMMENDED_TOPICS:65,GRAPHSAGE_USER_EMBEDDINGS_TO_ORGANIC_PINS:109,NAVBOOST_PFY:89,NAVBOOST_P2P:88,NOTIFICATION_NEWS_HUB:138,GEMINI_INTERESTS_FRESH:104,INTENTIONAL_DISTRIBUTION_USER_TO_CREATOR_STORY_PIN:100,INTENTIONAL_DISTRIBUTION_USER_TO_CREATOR_STORY_PIN_ENGAGEMENT:175,INTENTIONAL_DISTRIBUTION_USER_TO_CREATOR_VIDEO:95,INTENTIONAL_DISTRIBUTION_DOMAIN:86,INTENTIONAL_DISTRIBUTION_TOPICS_STORY_PINS:91,INTENTIONAL_DISTRIBUTION_TOPICS_VIDEO:98,GRAPHSAGE_MULTI_PINS_TO_CREATOR_PINS_REALTIME:135,GRAPHSAGE_MULTI_PINS_TO_VIDEO_PINS_REALTIME:139,GRAPHSAGE_MULTI_PINS_TO_STORY_PINS_REALTIME:140,INTENTIONAL_DISTRIBUTION_MANUAL_TAGGEED_INTERESTS_VIDEO:118,INTENTIONAL_DISTRIBUTION_MANUAL_TAGGED_INTERESTS_STORY_PIN:130,CREATOR_DIRECT_INJECT:148,USER_INTERESTS_TO_LONGTERM_CREATOR_PINS:141,GRAPHSAGE_PRODUCT_PINS:97,GRAPHSAGE_USER_EMBEDDINGS_TO_PINS:108,PROMOTED_PIN:15,UNKNOWN:0,RECOMMENDED_CATEGORY:2,COOKIE_MONSTER:3,REALTIME_P2B:6,REALTIME_P2B_CLOSEUP:22,RECOMMENDED_INTEREST:7,VISUALLY_SIMILAR:8,BOARD_FOLLOW:35,USER_FOLLOW:45,RECOMMENDED_COMMERCE:10,EVERYTHING_FEED:11,RECOMMENDED_LOCAL_PIN:12,SEARCH:46,P2P_USER_COMMERCE:16,COMMERCE_EDUCATION:17,LANDING_PAGE_PINS:18,FOLLOWING_FEED:19,POPULAR_FEED:20,P2P_DYNAMIC_GRID:23,LANDING_PAGE_INTEREST_PINS:24,FRESH_PIN_FROM_PIN:25,FRESH_PIN_FROM_INTEREST:26,FRESH_PIN_FROM_BOARD:27,SIFTER_VIDEO_FROM_INTEREST:39,SIFTER_PRODUCTS:57,SIFTER_DISTRIBUTION_A:50,SIFTER_DISTRIBUTION_B:51,SIFTER_DISTRIBUTION_C:52,SIFTER_DISTRIBUTION_D:53,SIFTER_DISTRIBUTION_E:54,SIFTER_ACTIVATION_EXPERIMENT:58,SIFTER_FRESHMAKER_PIN_FROM_INTEREST:40,P2P_CLOSEUP:29,P2P_LIKE:30,P2P_PIN_CREATE:31,INSTANT_PFY:34,DYNAMIC_INSERTION:37,DYNAMIC_INSERTION_BOARD_FOLLOW:38,HYPERLOCAL_INTEREST_BOARD:41,NUX_BOARD_FOLLOW_P2P:42,INDIRECT_DOMAIN_PIN:43,PIXIE_PINS_FOR_BOARD:44,SCREENSHOT_SAVE:55,TEXT_EMBEDDINGS:56,FRESH_TEXT_EMBEDDINGS:67,PREFETCH_LOAD:60,DIVERSE_TOPICS:62,QUIZ_RESULTS:63,INTENTIONAL_DISTRIBUTION_TOPICS:64,INTENTIONAL_DISTRIBUTION_TOPICS_THIRD_PARTY:90,INTENTIONAL_DISTRIBUTION_GEMINI:73,INTENTIONAL_DISTRIBUTION_GEMINI_V5:120,INTENTIONAL_DISTRIBUTION_SHOP_STYLE_STL:74,INTENTIONAL_DISTRIBUTION_GRAPHSAGE:78,INTENTIONAL_DISTRIBUTION_REPIN_BOARD:80,INTENTIONAL_DISTRIBUTION_CLICKTHROUGH:81,INTENTIONAL_DISTRIBUTION_USER_ACTIVITY:82,INTENTIONAL_DISTRIBUTION_CREATOR_BASELINE:92,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS:102,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS_STORY_PIN:103,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS_DIVERSITY:105,PIXIE_RECENT_ACTION:66,NATIVE_CONTENT_TOPICS:68,BUBBLE_OPEN_TOPICS:69,TOPIC_BEST_PINS_V2:77,DAILY_BEST_PINS:79,TOPIC_BEST_PINS_V3:101,TOPIC_BEST_STORY_PINS:164,REC_SEQ_STORY_PIN_CLS:165,DARK_PROMOTED_PIN:71,POST_EXPLORE_TOPICS:72,GRAPHSAGE_EMBEDDINGS:75,DEMOGRAPHIC_PFY:76,SHOPPING_STL:83,UNAUTH_PIXIE_P2B:84,UNAUTH_PIXIE_P2P:85,VIDEO_EMBEDDINGS:87,VIDEO_EMBEDDINGS_GEMINI_V5:121,GEMINI_V5_EMBEDDINGS_STATIC:93,GEMINI_V5_EMBEDDINGS_FRESH:94,GEMINI_V5_EMBEDDINGS_REALTIME:106,GEMINI_V5_EMBEDDINGS_STORYPIN:107,CURATED_VIDEO_INTEREST:96,GRAPHSAGE_PRODUCT_PINS_LONGER_HISTORY:112,GRAPHSAGE_SHOPPABLE_INSPIRATION:126,GRAPHSAGE_PRODUCT_PINS_EXPERIMENTAL:134,NUX_GRAPHSAGE:99,GRAPHSAGE_USER_EMBEDDINGS_TO_PRODUCT_PINS:110,GRAPHSAGE_VIDEO_PINS:113,RECBOOST_REPIN_BOARD:114,RECBOOST_CLICKTHROUGH:115,RECBOOST_USER_ACTIVITY:116,RECBOOST_CREATOR_BOARDS:129,RECOMMENDED_BOARDS:117,RECOMMENDED_ANNOTATION_BOARDS:136,RECOMMENDED_GRAPHSAGE_BOARDS:153,RECOMMENDED_CREATOR_BOARDS:124,ANNOTATION_REC_CREATOR_BOARDS:127,INTENTIONAL_DISTRIBUTION_MANUAL_INTERESTS_VIDEO:119,INTENTIONAL_DISTRIBUTION_INTERESTS_VIDEO:143,INTENTIONAL_DISTRIBUTION_INTERESTS_STORY_PIN:144,REPIN_CREATOR_BOARD:122,GRAPHSAGE_USER_EMBEDDINGS_TO_CREATOR_PINS:123,GRAPHSAGE_USER_EMBEDDINGS_TO_CREATOR_PINS_REALTIME:131,FRESH_SIG_FROM_BOARD:125,RECENT_ENGAGED_CREATOR_BOARDS:128,RECENT_ENGAGED_BOARDS:132,SHOPPING_CREATOR_REALTIME:133,GRAPHSAGE_BASED_RECOMMENDED_CREATOR_BOARDS:137,PIXIE_P2P:142,NEW_USE_CASE_PINS:145,RECBOOST_NEW_USE_CASES:146,SEARCHSAGE_PFY:147,SEARCHSAGE_SHOPPING_PFY:155,INTEREST_EXPLORATION:149,INTEREST_EXPLORATION_TRENDY_QUERIES:150,INTEREST_EXPLORATION_RELATED_INTERESTS:151,RECBOOST_INTERESTS:152,HF_STORY_SHOPPING_RETARGETING:154,RECBOOST_STORY_PINS:156,RECBOOST_STORY_BOARDS:157,PINNABILITY_EMBEDDINGS:158,PINNABILITY_FRESH_STORY_EMBEDDINGS:159,PINNABILITY_STORY_EMBEDDINGS:160,EXPLORATION_STORY_PINS:161,EXPLORATION_STORY_PINS_BASELINE:162,EXPLOITATION_STORY_PINS:163,ANNOTATION_REC_CREATOR_STORY_PINS:166,GRAPHSAGE_MULTI_PINS_TO_STORY_PINS:167,IDEASTREAM_GRAPHSAGE_STORY_PINS:168,HF_EDUCATION_PIN_INSERTION:169,RP_EDUCATION_PIN_INSERTION:170,USER_TO_CREATOR_STORY_PINS:171,USER_TO_CREATOR_STORY_PINS_ENGAGEMENT:176,COENGAGEMENT_STORY_PINS:172,ANNOTATION_STORY_PINS:177,DISCOVER_STREAM_DEMOGRAPHIC_FALLBACK:178,DISCOVER_STREAM_CELEBRITY:179,GRAPHSAGE_SHOPIFY_VMP_PRODUCT_PINS:180,CREATOR_BEST_IDEA_PINS:181,INTEREST_BEST_IDEA_PINS:182,NAVBOOST_STORY_PINS:183,SHOPPING_DISTRIBUTION_PINS:185,RTC_IMPROVEMENT_TEST_1:501,RTC_IMPROVEMENT_TEST_2:502,RTC_IMPROVEMENT_TEST_3:503,RTC_IMPROVEMENT_TEST_4:504,RTC_IMPROVEMENT_TEST_5:505,RTC_IMPROVEMENT_TEST_6:506,RTC_IMPROVEMENT_TEST_7:507,RTC_IMPROVEMENT_TEST_8:508,RTC_IMPROVEMENT_TEST_9:509,RTC_IMPROVEMENT_TEST_10:510,RTC_IMPROVEMENT_TEST_11:511,RTC_IMPROVEMENT_TEST_12:512,RTC_IMPROVEMENT_TEST_13:513,RTC_IMPROVEMENT_TEST_14:514,RTC_IMPROVEMENT_TEST_15:515,RTC_BLENDER_TEST:516,P2P_COMMERCE:21,P2P:14,LENS_CAMERA_VISUALLY_SIMILAR:111,RECENT_FOLLOWED_INTEREST:59,RECENT_FOLLOWED_BOARD:61,GRAPHSAGE_SHOPIFY_VMP_MERCHANT_ACTIVATION_PRODUCT_PINS:174,FOLLOWED_INTEREST_SEO_BESPIN_EXPORATION:184},ThroughObjectType:{PIN_ID:1,IMAGE_SIGNATURE:2,BOARD_ID:3,INTEREST_ID:4,SEARCH_QUERY:5,CREATOR_ID:6,ANNOTATION_ID:7,NEARDUP_SIGNATURE:8}}},560133:(e,t,i)=>{i.d(t,{nn:()=>s,Gy:()=>l,i8:()=>d,RR:()=>c,qN:()=>u,SP:()=>p,Uz:()=>h,QY:()=>m,GT:()=>g,Zs:()=>f,Sn:()=>_,Kl:()=>x});var n=i(227361),o=i.n(n),r=i(589444),a=i(477342);const s=e=>!!e&&(e.shopping_flags||[]).includes(2),l=e=>{var t,i;return e.rich_summary&&e.rich_summary.products&&e.rich_summary.products.length>0||(null!==(t=null===(i=e.rich_metadata)||void 0===i?void 0:i.products)&&void 0!==t?t:[]).length>0},d=e=>{var t;return null===(t=e.aggregated_pin_data)||void 0===t?void 0:t.is_shop_the_look},c=e=>{var t,i;return null===(t=e.rich_summary)||void 0===t||null===(i=t.aggregate_rating)||void 0===i?void 0:i.rating_value},u=e=>e.is_oos_product,p=e=>e.is_stale_product,h=e=>u(e)||p(e),m=e=>{const t=o()(e,"link_domain.official_user.full_name");if(t)return t;const i=o()(e,"rich_summary.site_name");if(i)return i;if(e.domain){if("Uploaded by user"===e.domain){return((e.is_repin?e.origin_pinner:e.pinner)||{}).full_name}return e.domain}const n=o()(e,"via_pinner.full_name");return e.is_repin&&n?n:void 0},g=e=>{if(e){const t=e.shopping_flags||[];return!t.includes(10)&&e.product_pin_data&&e.product_pin_data.items&&e.product_pin_data.items[0]&&e.product_pin_data.items[0].additional_images&&t.push(10),t}return[]};function f(e,t={}){var i,n,o,s,l,d;const c=g(e),u={...t.commerce_data};c.includes(2)&&(u.pin_is_shop_the_look=!0),c.includes(1)&&(u.is_available=!0),c.includes(5)&&(u.is_product_pin_v2=!0),c.includes(6)&&(u.is_rich_product_pin=!0),c.includes(10)&&(u.is_organic_product_carousel=!0);if((!!e.visual_objects&&(0,a.k)(e.visual_objects)||[]).some((e=>!0===e.is_stela))&&(u.pin_is_stela=!0),e.is_eligible_for_pdp){e.is_oos_product?u.pin_show_pdp_oos=!0:e.is_stale_product?u.pin_show_pdp_stale=!0:u.pin_show_pdp=!0;const t=(0,r.Z)({pin:e});var p;if(t)u.image_count=null===(p=t.carousel_slots)||void 0===p?void 0:p.length,u.image_index=t.index}null!=e&&null!==(i=e.rich_summary)&&void 0!==i&&null!==(n=i.products)&&void 0!==n&&null!==(o=n[0])&&void 0!==o&&o.item_id&&(u.item_id=e.rich_summary.products[0].item_id),null!=e&&null!==(s=e.rich_summary)&&void 0!==s&&null!==(l=s.products)&&void 0!==l&&null!==(d=l[0])&&void 0!==d&&d.item_set_id&&(u.item_set_id=e.rich_summary.products[0].item_set_id);const h=e.aggregated_pin_data||{};return null!=h&&h.is_shop_the_look&&(u.pin_is_shop_the_look=!0),e.story_pin_data&&(u.story_pin_id=e.story_pin_data.id),u}function _(e){const t=JSON.stringify(e);return"{}"!==t?{commerce_data:t}:null}const x=(e,t={})=>{if(e){return _(f(e,t))}return null}},295190:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var n=i(296882),o=i(773432),r=i(737614),a=i(230457),s=i(674245),l=i(185062),d=i(478718),c=i.n(d),u=i(311866);const p={open(e){const t=c()(e,p._validParams),i=p._getDialogType(e),r=p.generateFbRef(),d=e.object_type&&e.object_id&&"feed"===i;let h=(0,n.Z)(e.path);const m=(0,l.Z)();if(m.ptrf&&(h=(0,o.Z)(h,{ptrf:m.ptrf})),d&&(h=(0,o.Z)(h,{fb_ref:r})),t.method=i,"feed"===t.method){const i=p.getWindowOptions(e.width||580,e.height||400);let n="http://www.facebook.com/sharer/sharer.php?u="+h;t.picture&&(n+="&picture="+t.picture),t.name&&(n+="&title="+t.name),t.description&&(n+="&description="+t.description),t.caption&&(n+="&caption="+t.caption),window.open(encodeURI(n),"sharer",i)}else"send"===t.method?t.link=h:"share"===t.method&&(t.href=h),(0,s.default)((i=>{i.getLoginStatus((()=>{if("send"===t.method){i.ui(t);let n,o=10;const r=setInterval((()=>{n=function(){if(!document)return;const e=Array.from(document.querySelectorAll(".fb_dialog_iframe iframe"));if(!e.length)return;if(1===e.length)return e[0];const t=e.splice(0,e.length-1);for(let i=0;i<t.length;i+=1){const e=t[i].parentNode;e&&e.removeChild(t[i])}return e[0]}(),!n&&o||(clearInterval(r),n&&p.executeMessengerCallback(n,e.callback)),o-=1}),1e3)}else"share"===t.method&&i.ui(t,(t=>{d&&t&&!t.error_message&&u.ZP.create("LogFacebookFeedShare",{object_type:e.object_type,object_id:e.object_id,fb_ref:r}).callCreate({showError:!1}),e.callback&&e.callback(t)}))}))}),a.Z)},_validParams:["description","name","picture","to","href","caption","display"],_validOptions:["send","feed","share"],executeMessengerCallback(e,t){let i=10;const n=setInterval((()=>{"0px"!==e.style.width&&i||(clearInterval(n),e.style.width="575px"),i-=1}),1e3);t&&t()},generateFbRef(){let e="";for(;e.length<20;)e+=Math.floor(65535*Math.random()).toString(16);return r.Z.instance.unauth_id+":"+e},_getDialogType:e=>p._validOptions.includes(e.type)?e.type:"feed",getWindowOptions(e,t){const i=e||580,n=t||400,o=window.screen.width,r=window.screen.height;return"scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+i+",height="+n+",left="+Math.round((o-i)/2)+",top="+(r>n?Math.round((r-n)/2):0)}},h=p},181821:(e,t,i)=>{i.d(t,{Z:()=>n});const n={get(e){const t="gplus";i.e(44232).then(i.bind(i,921539)).then((({default:i})=>{i.load([],"https://apis.google.com/js/client:platform.js",t),i.ready(t,(()=>{e(window.gapi)}))}))}}},659048:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(295190),o=i(296882),r=i(773432),a=i(454690),s=i(447186);const l={};l.open=function(e,t,i){const n=function(e,t){const i=window.screen.width,n=window.screen.height;return"scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+e+",height="+t+",left="+Math.round((i-e)/2)+",top="+(n>t?Math.round((n-t)/2):0)}(t,i);window.open(e,void 0,n)},l.shrinkWrap=function(){!function(e){const t=document.documentElement;let i=t?t.scrollWidth-t.clientWidth:0,n=t?t.scrollHeight-t.clientHeight:0;e&&(i=Math.max(i,0),n=Math.max(n,0)),s.Z.isAuthenticated()||(n=340),window.resizeBy(i,n)}(!1)};const d=l,c={DIALOG_WIDTH:510,DIALOG_HEIGHT:525,openDialog(e){a.Z.trackEvent("share_line","click");const t=c._getWindowUrl(e.share_path,e.share_text);d.open(t,c.DIALOG_WIDTH,c.DIALOG_HEIGHT)},_getWindowUrl:(e,t)=>(0,r.Z)("https://social-plugins.line.me/lineit/share",{url:e?(0,o.Z)(e):void 0,text:t})},u=c,p={DIALOG_WIDTH:510,DIALOG_HEIGHT:525,openDialog(e){a.Z.trackEvent("share_reddit","click");const t=p._getWindowUrl(e.share_path,e.share_text);d.open(t,p.DIALOG_WIDTH,p.DIALOG_HEIGHT)},_getWindowUrl:(e,t)=>(0,r.Z)("https://www.reddit.com/submit?url=",{url:e?(0,o.Z)(e):void 0,title:t})},h=p;var m=i(311866);const g={DIALOG_WIDTH:550,DIALOG_HEIGHT:420,openDialog(e){const t=e.ga_category||"share_twitter";a.Z.trackEvent(t,"click");const i=g._getWindowUrl(e.tweet_path,e.tweet_text);d.open(i,g.DIALOG_WIDTH,g.DIALOG_HEIGHT)},_getWindowUrl:(e,t)=>(0,r.Z)("https://twitter.com/intent/tweet",{via:"pinterest",url:e?(0,o.Z)(e):void 0,text:t||void 0})},f=g,_={ObjectTypeToInviteObject:{pin:1,board:2,pinner:3,article:5,did_it:6,today_article:8,search:0},_convertToInviteObject(e){return this.ObjectTypeToInviteObject[e]||0},_logShareInvite(e,t){const i=this._convertToInviteObject(e.object_type),n=e.invite_channel,o=null==e.invite_category?3:e.invite_category,r=e.object_id;return m.ZP.create("SentExternalInviteCallbackResource",{invite_type:{invite_category:o,invite_object:i,invite_channel:n},invite_code:t,object_id:r}).callCreate()},createAndLogShareInvite:e=>_.createShareInviteData(e).then((t=>(_._logShareInvite(e,t.invite_code),Promise.resolve(t))),(e=>Promise.reject(e))),createShareInviteData(e){const t=this._convertToInviteObject(e.object_type),i=e.invite_channel,n=null==e.invite_category?3:e.invite_category;if(10===n&&e.path){return m.ZP.create("ShareLinkResource",{invite_category:n,url:e.path}).callCreate().then((e=>Promise.resolve(e.resource_response.data)),(e=>Promise.reject(e)))}{const o=e.object_id;return m.ZP.create("CreateExternalInviteResource",{invite_type:{invite_category:n,invite_object:t,invite_channel:i},object_id:o}).callCreate().then((e=>Promise.resolve(e.resource_response.data)),(e=>Promise.reject(e)))}},logShareInvite(e,t){t&&_._logShareInvite(e,t.invite_code)},shareFacebookInvite:e=>_.createShareInviteData(e).then((t=>{const i=t.invite_url,o=t.invite_code;return i&&n.default.open({type:"share",object_type:e.object_type,object_id:e.object_id,name:e.name,caption:t.title,description:e.description,path:i,picture:e.picture,callback(t){t&&!t.error_message&&_._logShareInvite(e,o)}}),Promise.resolve(t)}),(e=>Promise.reject(e))),shareTwitterInvite(e){const t=this._convertToInviteObject(e.object_type);return _.createShareInviteData(e).then((i=>{const n=i.invite_url,o=i.invite_code;let r=e.description;return 6===t&&e.name&&(r=e.name),n&&f.openDialog({tweet_path:n,tweet_text:r}),_._logShareInvite(e,o),Promise.resolve(i)}),(e=>Promise.reject(e)))},shareRedditInvite:e=>_.createShareInviteData(e).then((t=>{const i=t.invite_url,n=t.invite_code;return i&&h.openDialog({share_path:i,share_text:e.description}),_._logShareInvite(e,n),Promise.resolve(t)}),(e=>Promise.reject(e))),shareLineInvite(e){const t=this._convertToInviteObject(e.object_type);return _.createShareInviteData(e).then((i=>{const n=i.invite_url,o=i.invite_code;let r=e.description;return 6===t&&e.name&&(r=e.name),r||(r=i.title),n&&u.openDialog({share_path:n,share_text:r}),_._logShareInvite(e,o),Promise.resolve(i)}),(e=>Promise.reject(e)))},shareFbMessengerInvite:e=>_.createShareInviteData(e).then((t=>{const i=t.invite_url,o=t.invite_code;return i&&n.default.open({type:"send",object_type:e.object_type,object_id:e.object_id,name:e.name,caption:t.title,description:e.description,path:i,picture:e.picture,callback(t){t&&t.success&&_._logShareInvite(e,o)}}),Promise.resolve(t)}),(e=>Promise.reject(e)))},x=_},525974:(e,t,i)=>{i.d(t,{Z:()=>b});var n=i(295190),o=i(311866),r=i(627578),a=i(230457),s=i(181821),l=i(282152),d=i(233495),c=i(928940),u=i(641483);function p(){}let h;Object.assign(p.prototype,{optionsForNetwork:{},connect(e,t,n){t=Object.assign({},{success(){},error(){},complete(){}},t),(0,u.ZP)(`auth_web.social_connect.${e}.${(0,l.Z)()}`),t.rerequest_facebook_email?Promise.resolve().then(i.bind(i,674245)).then((({default:e})=>{e((e=>{e.login((e=>{const i=e.authResponse;let n,o;i&&(n=i.grantedScopes,n=n?n.split(","):[],o=i.userID);const r=n.find((e=>"email"===e)),a={id:o};"connected"===e.status&&r?t.success(a):t.error(a),t.complete()}),{scope:"email",auth_type:"rerequest",return_scopes:!0})}),a.Z)})):"gplus"===e||"google"===e?s.Z.get((e=>{(0,d.Z)().then((()=>{e.auth2.getAuthInstance().grantOfflineAccess().then((e=>{t.success({one_time_code:e.code,redirect_uri:"postmessage"})})).catch((e=>{t.error(e)}))}))})):Promise.resolve().then(i.bind(i,295190)).then((({default:i})=>{const o=t.windowOptions||i.getWindowOptions(),a=window.open("/connect/"+e+"/","",o);if(!a)return r.Z.showError(n._("You must enable popups!")),void t.error({network:e,alertedUpstream:!0});const s=c.Z.setInterval((()=>{a.closed&&(clearInterval(s),this.handleComplete({network:e,error_message:"Window closed."}))}),1e3);this.optionsForNetwork=Object.assign(this.optionsForNetwork,{[e]:t})}))},complete(e){this.handleComplete(e)},handleComplete(e){const t=e.network;if("facebook"===t){const t=e.id;t&&"string"!=typeof t&&(e.error_message="Facebook id must be of string type")}if(this.optionsForNetwork[t]){const i=this.optionsForNetwork[t];this.optionsForNetwork[t]=null,e.error_message?i.error(e):i.success(e),i.complete()}}}),Object.assign(p,{instance:()=>(h||(h=new p),h)}),window.addEventListener("message",(e=>{const t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");e.origin===t&&e.data&&"social-connect-complete"===e.data.type&&p.instance().complete(e.data)}));const m=p;var g=i(584489),f=i(447186),_=i(301314),x=i(912397);function v(){}Object.assign(v.prototype,{handleConnect(e,t,i,o){if(t&&!f.Z.isLimitedLogin()){const r={success:function(n){const o={network:e,data:n};this._internalConnectNetwork(t,o,i)}.bind(this),error(e){i.error&&i.error(e)},complete(){i.complete&&i.complete()},windowOptions:void 0};"dropbox"===e?r.windowOptions="width=600,height=800":"instagram"===e?r.windowOptions=n.default.getWindowOptions(580,580):"etsy"===e?r.windowOptions=n.default.getWindowOptions(580,775):"youtube"===e&&(r.windowOptions=n.default.getWindowOptions(605,640)),this._externalConnectNetwork(e,t,r,o)}else{const n={network:e};this._internalConnectNetwork(t,n,i)}},updateConnectStatus(){const e={user_id:f.Z.get("id"),username:f.Z.get("username"),field_set_key:"social_connect"};g.Z.instance.dispatch((0,_.jB)("UserResource",e));o.ZP.create("UserResource",e).callGet().then((e=>{var t;const i=null===(t=e.resource_response)||void 0===t?void 0:t.data;f.Z.set(i)}))},_externalConnectNetwork(e,t,i,n){t?m.instance().connect(e,i,n):i.success&&i.success({})},_internalConnectNetwork(e,t,i){const n=o.ZP.create("UserSocialNetworkResource",t);(e?n.callCreate():n.callDelete()).then((e=>{this.updateConnectStatus(),i.success&&i.success(e)}),(e=>{i.error&&e instanceof Object&&i.error(e)})).finally((()=>{i.complete&&i.complete()}))},_getResourceNameForNetworkFriends(e){let t=null;switch(e){case x.vq:t="UserFacebookFriendsResource";break;case x.Ib:t="UserTwitterFriendsResource";break;case x.Tr:t="UserGmailFriendsResource";break;case x.lA:t="UserMicrosoftFriendsResource";break;default:return}return t},pollForFriends(e,t){const i=(t=t||{}).resourceOptions||{},n=this._getResourceNameForNetworkFriends(e);if(!n)return;const r=o.ZP.create(n,i);r.callGet({showError:!1}).then((()=>{const e=t.success;e&&e(r)}),(i=>{if(110===i.api_error_code)c.Z.setTimeout((()=>{this.pollForFriends(e,t)}),1e3);else{const e=t.error;e&&e()}}))}});let y=null;v.instance=function(){return y||(y=new v),y};const b=v},750980:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(580849);const o={getInstance:()=>n.K.fromGlobalContext().experiments}},609304:(e,t,i)=>{function n(e){return Boolean(e.promoted_is_removable)}i.d(t,{Z:()=>n})},352483:(e,t,i)=>{i.d(t,{Z:()=>D});var n=i(667294),o=i(883119),r=i(785893);function a({isHorizontalDesign:e}){return e?(0,r.jsxs)(o.xu,{height:"100%",width:"100%",display:"flex",direction:"row",position:"absolute",top:!0,left:!0,children:[(0,r.jsx)(o.xu,{opacity:.5,color:"midnight",height:"100%",width:"100%",flex:"grow"}),(0,r.jsx)(o.xu,{color:"white",width:"2px",flex:"none"}),(0,r.jsx)(o.xu,{opacity:.5,color:"olive",width:"100%",flex:"grow"}),(0,r.jsx)(o.xu,{color:"white",width:"2px",flex:"none"}),(0,r.jsx)(o.xu,{opacity:.5,color:"maroon",width:"100%",flex:"grow"})]}):(0,r.jsxs)(o.xu,{height:"100%",width:"100%",display:"flex",direction:"row",position:"absolute",top:!0,left:!0,children:[(0,r.jsx)(o.xu,{opacity:.5,color:"midnight",height:"100%",flex:"grow"}),(0,r.jsx)(o.xu,{color:"white",width:"2px",flex:"none"}),(0,r.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",flex:"grow",height:136,children:[(0,r.jsx)(o.xu,{opacity:.5,color:"olive",width:"100%",flex:"grow"}),(0,r.jsx)(o.xu,{color:"white",height:"2px",flex:"none"}),(0,r.jsx)(o.xu,{opacity:.5,color:"maroon",width:"100%",flex:"grow"})]})]})}var s=i(174523);function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const d={__style:{background:"linear-gradient(0deg, rgba(0, 0, 0, 0.43) 0%, rgba(0,0,0,0) 60%)"}};class c extends n.PureComponent{constructor(...e){super(...e),l(this,"state",{isLoaded:[!1,!1,!1],isMounted:!1}),l(this,"getImageArray",(()=>{const{userPins:e}=this.props;let t=[];return e&&0!==e.length?(t=e.map((e=>{var t,i,n;return((null===(t=e.images)||void 0===t?void 0:t["136x136"])||(null===(i=e.images)||void 0===i?void 0:i["236x"])||(null===(n=e.images)||void 0===n?void 0:n["736x"])||{}).url})).filter(Boolean),t):t})),l(this,"getImage",((e,t)=>{const{isLoaded:i}=this.state,n={transition:"opacity 500ms",opacity:i[t]?1:0};return(0,r.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:n},color:"white",height:"100%",width:"100%",children:!!e&&(0,r.jsx)(o.Ee,{naturalHeight:1,src:e,fit:"cover",alt:this.props.i18n._("user's pin","image of one of a user's pins","image of one of a user's pins"),naturalWidth:1,color:"lightGray",onLoad:()=>this.handleLoad(t)})})})),l(this,"handleLoad",(e=>{const{isLoaded:t,isMounted:i}=this.state,n=[...t];n[e]=!0,i&&this.setState({isLoaded:n})}))}componentDidMount(){this.setState({isMounted:!0}),this.getImageArray()}render(){const{isHorizontalDesign:e}=this.props,t=this.getImageArray();let i=null;return i=1===t.length?(0,r.jsx)(o.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",height:"100%",children:this.getImage(t[0],0)}):2===t.length?(0,r.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",height:"100%",children:[this.getImage(t[0],0),(0,r.jsx)(o.xu,{color:"white",width:"1px",flex:"none"}),this.getImage(t[1],1)]}):e?(0,r.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",height:"100%",width:"100%",children:[(0,r.jsx)(o.xu,{height:"100%",width:"100%",children:this.getImage(t[0],0)}),(0,r.jsx)(o.xu,{color:"white",width:"2px",flex:"none"}),(0,r.jsx)(o.xu,{height:"100%",width:"100%",children:this.getImage(t[1],1)}),(0,r.jsx)(o.xu,{color:"white",width:"2px",flex:"none"}),(0,r.jsx)(o.xu,{height:"100%",width:"100%",children:this.getImage(t[2],2)})]}):(0,r.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",height:"100%",width:"100%",children:[(0,r.jsx)(o.xu,{height:"100%",flex:"grow",children:this.getImage(t[0],0)}),(0,r.jsx)(o.xu,{color:"white",width:"2px",flex:"none"}),(0,r.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",flex:"grow",height:136,children:[(0,r.jsx)(o.xu,{width:"100%",flex:"grow",children:this.getImage(t[1],1)}),(0,r.jsx)(o.xu,{color:"white",height:"2px",flex:"none"}),(0,r.jsx)(o.xu,{width:"100%",flex:"grow",children:this.getImage(t[2],2)})]})]}),(0,r.jsx)(o.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",height:136,children:(0,r.jsxs)(o.xu,{width:"100%",position:"relative",flex:"grow",children:[(0,r.jsx)(a,{isHorizontalDesign:e}),i,(0,r.jsx)(o.xu,{dangerouslySetInlineStyle:d,height:"100%",width:"100%",position:"absolute",top:!0,left:!0})]})})}}const u=function(e){const t=(0,s.ZP)();return(0,r.jsx)(c,{...e,i18n:t})};var p=i(151101),h=i(549135);const m=e=>{const{avatarUrl:t,isVerified:i,isHorizontalDesign:n,url:a,userFullName:s,viewParameter:l,viewType:d}=e,c=n?80:86;return(0,r.jsx)(o.xu,{zIndex:new o.Ry(1),dangerouslySetInlineStyle:{__style:{border:"2px white solid",marginTop:n?-58:-64,marginLeft:n?-6:0}},display:"flex",flex:"none",rounding:"circle",children:(0,r.jsx)(o.xu,{flex:"none",height:c,width:c,children:(0,r.jsx)(o.iP,{onTap:({event:e})=>{e.stopPropagation(),function(e,t){(0,h.j)(101,{view:e,viewParameter:t,component:13406,element:11373})}(d,l)},href:a,rounding:"circle",role:"link",children:(0,r.jsx)(p.Z,{name:s,src:t,verified:i})})})})};var g=i(537343);function f({text:e,singleLineMaxCharacters:t,isBold:i,isHorizontalDesign:n,numLines:a}){const s=a*t,l=(0,g.ZP)(e,s);return i?(0,r.jsx)(o.xv,{align:n?"start":"center",overflow:"normal",size:"md",weight:"bold",children:l}):(0,r.jsx)(o.xv,{align:n?"start":"center",overflow:"normal",size:"md",weight:"normal",color:n?"darkGray":"gray",children:l})}function _({description:e,domainUrl:t,isHorizontalDesign:i,userFullName:n}){const a=e||t,s={placeholder:{__style:{transition:"opacity 200ms",opacity:a?0:1}},subtitle:{__style:{transition:"opacity 200ms",opacity:a?1:0}}};return(0,r.jsxs)(o.xu,{position:"relative",width:"100%",marginTop:i?4:3,marginBottom:3,alignItems:i?"start":"center",display:"flex",direction:"column",children:[(0,r.jsx)(o.xu,{height:18,width:"100%",children:(0,r.jsx)(o.xv,{align:i?"start":"center",lineClamp:1,size:i?"lg":"md",weight:"bold",children:n})}),(0,r.jsxs)(o.xu,{marginTop:2,overflow:"hidden",position:"relative",width:"100%",children:[(0,r.jsxs)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:s.placeholder,direction:"column",display:"flex",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:[(0,r.jsx)(o.xu,{color:"lightGray",rounding:"pill",width:180,flex:"grow"}),(0,r.jsx)(o.xu,{height:6,flex:"none"}),(0,r.jsx)(o.xu,{color:"lightGray",rounding:"pill",width:140,flex:"grow"})]}),i&&!!t&&(0,r.jsx)(o.xu,{dangerouslySetInlineStyle:s.subtitle,width:"100%",height:"100%",marginTop:-1,children:(0,r.jsx)(f,{numLines:2,isBold:!0,isHorizontalDesign:i,singleLineMaxCharacters:36,text:t})}),i&&!!e&&(0,r.jsx)(o.xu,{dangerouslySetInlineStyle:s.subtitle,width:"100%",height:"100%",marginTop:2,children:(0,r.jsx)(f,{isHorizontalDesign:i,numLines:2,singleLineMaxCharacters:36,text:e})}),!i&&!!a&&(0,r.jsx)(o.xu,{dangerouslySetInlineStyle:s.subtitle,width:"100%",height:"100%",children:(0,r.jsx)(f,{isHorizontalDesign:i,numLines:2,singleLineMaxCharacters:27,text:a})})]})]})}var x=i(40142),v=i(756169),y=i(946753);function b({followText:e,followerCount:t,isHorizontalDesign:i,showFollowers:n,userFollowed:a}){const l=(0,s.ZP)();return n?(0,y.nk)(l._("{{ followCount }} {{ followText }}"),{followCount:(0,r.jsx)(o.xu,{"data-test-id":"followCount",display:"inlineBlock",marginEnd:1,opacity:a?void 0:.8,children:(0,r.jsx)(o.xv,{color:a?"gray":"white",size:i?"sm":"md",align:"center",weight:"bold",children:(0,r.jsx)(v.Z,{value:t||0,shortform:!0,shortformMaximumFractionDigits:0})})},"followCount"),followText:(0,r.jsx)(o.xu,{"data-test-id":"followText",display:"inlineBlock",children:(0,r.jsx)(o.xv,{weight:"bold",color:a?"darkGray":"white",size:i?"sm":"md",overflow:"normal",align:"center",children:e})},"followText")}):(0,r.jsx)(o.xu,{"data-test-id":"followText",children:(0,r.jsx)(o.xv,{weight:"bold",color:a?"darkGray":"white",size:i?"sm":"md",overflow:"normal",align:"center",children:e})},"followText")}var w=i(881220),S=i(475446),P=i(289605);const j=(0,x.connect)(((e,{id:t})=>{const i=(e.users||{})[t];return{userFollowed:!!i&&i.explicitly_followed_by_me}}),(e=>({follow:t=>e((0,P.ZN)(t)),unfollow:t=>e((0,P.fv)(t))})))((function({followerCount:e,isHorizontalDesign:t,showFollowerCount:i,userFollowed:a,follow:l,id:d,viewParameter:c,viewType:u,fullName:p,imageUrl:m,profileUrl:g}){const f=(0,s.ZP)(),{showOneToast:_}=(0,S.F9)(),x=a?f._("Following","User follow button","User follow button"):f._("Follow","User follow button","User follow button"),v=e=>(0,h.j)(e,{view:u,viewParameter:c,component:13406,element:11372});return(0,r.jsx)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{marginTop:t?"-22px":0}},display:"flex",justifyContent:"center",position:"relative",children:(0,r.jsx)(o.iP,{onTap:()=>{a?((0,P.fv)(d),v(46)):(l(d),v(45),_((({onHide:e})=>(0,r.jsx)(w.Z,{onHide:e,text:(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(o.xv,{children:f._("Now following","text that comes before a board/user name in toast","text that comes before a board/user name in toast")}),(0,r.jsx)(o.xv,{weight:"bold",children:p})]}),href:g,imageUrl:m}))))},rounding:"pill",children:(0,r.jsx)(o.xu,{alignItems:"center",color:a?"lightGray":"red",direction:"row",display:"flex",justifyContent:"center",paddingX:t?5:6,paddingY:t?3:4,rounding:"pill",children:(0,r.jsx)(b,{followerCount:e,followText:x,isHorizontalDesign:t,showFollowers:i&&0!==e,userFollowed:a})})})})}));function T({avatarUrl:e,description:t,domainUrl:i,followerCount:n,id:a,isCreator:s,isHorizontalDesign:l,isVerified:d,userFullName:c,username:u,viewParameter:p,viewType:h}){const g=function(e){return`/${e}`}(u);return(0,r.jsxs)(o.xu,{alignItems:l?"start":"center",display:"flex",direction:"column",paddingX:l?5:6,paddingY:l?3:4,marginTop:2,width:"100%",children:[(0,r.jsx)(m,{avatarUrl:e,isHorizontalDesign:l,isVerified:d,url:g,userFullName:c,viewType:h,viewParameter:p}),l&&(0,r.jsxs)(o.xu,{position:"relative",width:"100%",children:[(0,r.jsx)(o.xu,{display:"flex",marginTop:-2,marginEnd:-2,position:"absolute",right:!0,top:!0,children:(0,r.jsx)(j,{fullName:c,followerCount:n,id:a,imageUrl:e,isHorizontalDesign:l,profileUrl:g,showFollowerCount:s})}),(0,r.jsx)(o.xu,{width:"100%",display:"flex",left:!0,marginTop:1,children:(0,r.jsx)(_,{description:t,domainUrl:i,isHorizontalDesign:l,userFullName:c})})]}),!l&&(0,r.jsxs)(o.xu,{width:"100%",children:[(0,r.jsx)(_,{userFullName:c,domainUrl:i,description:t,isHorizontalDesign:l}),(0,r.jsx)(o.kC,{alignItems:"center",justifyContent:"center",width:"100%",children:(0,r.jsx)(j,{followerCount:n,fullName:c,id:a,imageUrl:e,isHorizontalDesign:l,profileUrl:g,showFollowerCount:s})})]})]})}var I=i(451190);const C=24;function E({anchor:e,children:t,isHorizontalDesign:i}){if(!e)return null;const n=i?320:236,{left:a,top:s,width:l,height:d}=e.getBoundingClientRect(),c=a+window.pageXOffset,u=s+window.pageYOffset,p=c+l+n+12>window.innerWidth,h={left:p?c:c+l,top:u+d/2},m={borderRadius:21,boxShadow:"0 9px 26px rgba(0, 0, 0, 0.4)",left:p?-12-n:12,top:-n/2-44},g={top:-12,left:-12,fill:"white"},f=p?"M0 0 L12 12 L0 24":"M24 0 L12 12 L24 24";return(0,r.jsxs)(o.xu,{position:"absolute",zIndex:I.b,dangerouslySetInlineStyle:{__style:h},children:[(0,r.jsx)(o.xu,{position:"absolute",color:"white",dangerouslySetInlineStyle:{__style:m},width:n,overflow:"hidden",children:t}),(0,r.jsx)(o.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:g},children:(0,r.jsx)("svg",{width:C,height:C,children:(0,r.jsx)("path",{d:f})})})]})}var k=i(311866),R=i(51610),O=i(34411),A=i(585967);function N(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class L extends n.PureComponent{constructor(e){super(e),N(this,"anchorRef",(0,n.createRef)()),N(this,"loadUser",(()=>{const{username:e}=this.props,{isMounted:t}=this.state;e&&(k.ZP.create("UserResource",{username:e,field_set_key:"profile"}).callGet().then((e=>{var i;t&&this.setState({detailedUser:null===(i=e.resource_response)||void 0===i?void 0:i.data})})),k.ZP.create("UserPinsResource",{username:e,page_size:3,field_set_key:"grid_item"}).callGet().then((e=>{var i;t&&this.setState({userPins:null===(i=e.resource_response)||void 0===i?void 0:i.data})})),t&&this.setState({isLoaded:!0}))})),N(this,"handleScroll",(()=>{clearTimeout(this.openTimeout),this.state.isMounted&&(this.setState({isVisible:!1}),this.forceUpdate())})),N(this,"timeoutDismiss",(()=>{this.dismissTimeout=setTimeout((()=>{this.state.isMounted&&(this.setState({isVisible:!1}),clearTimeout(this.openTimeout))}),150)})),N(this,"handleDisplayCard",(()=>{const{isDarkPromoter:e,pinId:t,requestContext:i,viewParameter:n}=this.props,{currentPinId:o,isLoaded:r,isMounted:a}=this.state;clearTimeout(this.openTimeout),clearTimeout(this.dismissTimeout),t&&o!==t&&this.forceUpdate(),t&&this.setState({currentPinId:t});const{group:s}=i.experiments.getWithActivation("web_avatar_hover_cards_v2");156!==n&&0!==n||e||!["enabled","enabled2_vertical","enabled2_horizontal"].includes(s)?a&&this.setState({isVisible:!1}):(r||this.loadUser(),this.openTimeout=setTimeout((()=>{a&&this.setState({isVisible:!0})}),300))})),N(this,"handleHideCard",(()=>{this.timeoutDismiss()})),this.state={currentPinId:e.pinId,detailedUser:null,isMounted:!1,isLoaded:!1,isVisible:!1,user:null,userPins:null}}componentDidMount(){this.setState({isMounted:!0}),window.addEventListener("scroll",this.handleScroll)}componentWillUnmount(){this.setState({isMounted:!1}),clearTimeout(this.openTimeout),clearTimeout(this.dismissTimeout),window.removeEventListener("scroll",this.handleScroll)}static getDerivedStateFromProps(e,t){const{user:i}=e,{detailedUser:n}=t,o={user:{}};return i&&(o.user=i),n&&(o.user={...o.user,...n}),o}render(){const{avatarSize:e,children:t,requestContext:i,username:n,viewer:a,viewParameter:s,viewType:l}=this.props,{isVisible:d,user:c,userPins:p}=this.state,{about:h,domain_url:m,follower_count:g,full_name:f,id:_,image_medium_url:x,show_creator_profile:v,verified_identity:y}=c||{},b=a.isAuth&&a.id===_,w=Boolean(null==y?void 0:y.verified),{group:S}=i.experiments.getWithoutActivation("web_avatar_hover_cards_v2"),P="enabled2_horizontal"===S;return(0,r.jsxs)(o.xu,{onMouseOver:this.handleDisplayCard,onFocus:this.handleDisplayCard,onMouseLeave:this.handleHideCard,children:[(0,r.jsxs)(o.xu,{marginStart:-2,marginEnd:-2,paddingX:2,position:"relative",children:[(0,r.jsx)(o.xu,{height:e,left:!0,marginStart:2,position:"absolute",ref:this.anchorRef,top:!0,width:e}),t]}),!b&&!!c&&!!n&&d&&(0,r.jsx)(o.xu,{children:(0,r.jsx)(R.Z,{children:(0,r.jsx)(o.mh,{children:(0,r.jsx)(E,{anchor:this.anchorRef.current,isHorizontalDesign:P,children:(0,r.jsx)(o.xu,{color:"white",zIndex:I.b,onFocus:this.handleDisplayCard,onMouseOver:this.handleDisplayCard,onMouseLeave:this.handleHideCard,position:"relative",width:"100%",children:(0,r.jsxs)(o.xu,{width:"100%",children:[(0,r.jsx)(u,{isHorizontalDesign:P,userPins:p}),(0,r.jsx)(T,{avatarUrl:null!=x?x:"",description:null!=h?h:"",domainUrl:m,followerCount:null!=g?g:0,id:null!=_?_:"",isCreator:v,isHorizontalDesign:P,isVerified:null!=w&&w,userFullName:null!=f?f:"",username:n,viewParameter:s,viewType:l})]})})})})})})]})}}function D(e){const t=(0,A.B)(),i=(0,O.ZP)();return(0,r.jsx)(L,{...e,requestContext:t,viewer:i})}},702403:(e,t,i)=>{i.d(t,{FC:()=>n,z9:()=>o,EC:()=>r,m9:()=>a,BS:()=>s,_5:()=>l,A6:()=>d});const n=424,o=800,r=508,a=424,s=278,l=640,d=508},104573:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(641483),o=i(549135);function r({filename:e,imgSrc:t,imageDownloadSuccessCallback:i,category:r,isUnauth:a,pinId:s,viewParameter:l,viewType:d,children:c}){return c((function(){!async function({filename:e,imgSrc:t,imageDownloadSuccessCallback:i,category:r,isUnauth:a,pinId:s,viewParameter:l,viewType:d}){"undefined"==typeof window?Promise.resolve():((0,n.ZP)(`web.${a?"unauth":"auth"}.download.click.${r||"no_category"}`),(0,o.j)(82,{objectId:s,view:d||3,viewParameter:l||139}),t&&document?fetch(t,{headers:new Headers({Origin:window.location.origin}),mode:"cors"}).then((e=>e.blob())).then((t=>{var n,o;const r=document.createElement("a");r.href=window.URL.createObjectURL(t),r.setAttribute("download",e&&e.replace(".","_")),r.style.display="none",null===(n=document.body)||void 0===n||n.appendChild(r),r.click(),null===(o=document.body)||void 0===o||o.removeChild(r),null==i||i()})).catch((()=>{throw new Error("Download image error")})):Promise.resolve())}({filename:e,imgSrc:t,imageDownloadSuccessCallback:i,category:r,isUnauth:a,pinId:s,viewParameter:l,viewType:d})}))}},628402:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(667294),o=i(40142),r=i(893945),a=i(174523),s=i(311866);var l=i(883119),d=i(785893);function c({favorited:e,favoriteCount:t,isCloseupButton:i,onFavorite:c,onUnfavorite:u,pinId:p,size:h}){const m=(0,a.ZP)(),g=(0,o.useDispatch)(),[f,_]=(0,n.useState)(!1),[x,v]=(0,n.useState)(e),[y,b]=(0,n.useState)(null!=t?t:0),w=async()=>{var e;v(!x),_(!0),x?(b(y-1),await g((e=p,async t=>{await s.ZP.create("ApiResource",{url:`/v3/pins/${e}/favorite/`}).callDelete(),t(function(e){return{type:"PIN_FAVORITE",payload:{id:e,increment:-1,value:!1}}}(e))})),u(),_(!1)):(b(y+1),await g(function(e){return async t=>{await s.ZP.create("ApiResource",{url:`/v3/pins/${e}/favorite/`}).callCreate(),t(function(e){return{type:"PIN_FAVORITE",payload:{id:e,increment:1,value:!0}}}(e))}}(p)),c(),_(!1))},S=y<10?y:m._("9+","favoriteButton.favoriteCountText","Text shown when greater than 9 favorites on Pin");return(0,d.jsxs)(l.kC,{alignItems:"center",gap:1,children:[void 0!==t&&y>0&&(0,d.jsx)(l.xv,{size:"md",weight:"bold",children:S}),(0,d.jsx)(r.Z,{isCloseupButton:i,isDisabled:f,isFavorited:x,onTap:()=>{w()},size:h})]})}},893945:(e,t,i)=>{i.d(t,{W:()=>s,Z:()=>l});var n=i(174523),o=i(883119),r=i(785893);const a={__path:"M10.52 3.11a2 2 0 013.59 0l2.06 4.17c.02.06.08.1.15.11l4.6.67a2 2 0 011.1 3.41l-3.32 3.25a.2.2 0 00-.06.17l.78 4.58a2 2 0 01-2.9 2.11l-4.11-2.16a.2.2 0 00-.19 0l-4.11 2.16a2 2 0 01-2.9-2.1l.78-4.59a.2.2 0 00-.06-.17l-3.32-3.25a2 2 0 011.1-3.41l4.6-.67a.2.2 0 00.15-.1zm3.9 5.15l-1.75-3.53a.4.4 0 00-.71 0L10.2 8.26a2 2 0 01-1.5 1.1l-3.9.56a.4.4 0 00-.23.69l2.83 2.75a2 2 0 01.57 1.77L7.31 19a.4.4 0 00.58.42l3.5-1.83a2 2 0 011.86 0l3.48 1.83a.4.4 0 00.59-.42l-.67-3.88a2 2 0 01.57-1.77l2.83-2.75a.4.4 0 00-.22-.69l-3.9-.56a2 2 0 01-1.51-1.1z"},s={__path:"M10.52 3.11a2 2 0 013.59 0l2.06 4.17c.02.06.08.1.15.11l4.6.67a2 2 0 011.1 3.41l-3.32 3.25a.2.2 0 00-.06.17l.78 4.58a2 2 0 01-2.9 2.11l-4.11-2.16a.2.2 0 00-.19 0l-4.11 2.16a2 2 0 01-2.9-2.1l.78-4.59a.2.2 0 00-.06-.17l-3.32-3.25a2 2 0 011.1-3.41l4.6-.67a.2.2 0 00.15-.1z"};function l({isCloseupButton:e,isDisabled:t,isFavorited:i,onTap:l,size:d}){const c=(0,n.ZP)();return e?(0,r.jsx)(o.hU,{accessibilityLabel:c._("Favorite icon","pinRep.footer.favoriteIcon","Accessible label for favorite icon on Pin"),dangerouslySetSvgPath:i?s:a,disabled:t,iconColor:"darkGray",onClick:l,size:"lg"}):(0,r.jsx)(o.iP,{disabled:t,onTap:l,children:(0,r.jsx)(o.JO,{accessibilityLabel:c._("Favorite icon","pinRep.footer.favoriteIcon","Accessible label for favorite icon on Pin"),color:"darkGray",dangerouslySetSvgPath:i?s:a,size:d})})}},801500:(e,t,i)=>{function n(e){const t=e.split("/");return[t[2],t[1]]}function o(e,t){return!e||!e.some((e=>e.pin_type===t))}i.d(t,{Jw:()=>n,Ej:()=>o})},176082:(e,t,i)=>{i.d(t,{ZP:()=>d});var n=i(326149),o=i(883119),r=i(785893);const a="rgb(255,255,255)",s={boxShadow:"0 0 0 4px rgba(0, 132, 255, 0.5)",outline:0},l=({accessibilityLabel:e,active:t,children:i,color:n="darkGray",focused:l,hovered:d,icon:c,isSVG:u,iconOnly:p,shouldPad:h})=>{const m="darkGray"===n?{hovered:{backgroundColor:"rgb(226, 226, 226)"},active:{backgroundColor:"rgb(218, 218, 218)"},focused:s,iconOnly:{backgroundColor:a}}:{hovered:{backgroundColor:"rgba(255,255,255,0.4)"},active:{backgroundColor:a},focused:s,iconOnly:{backgroundColor:"rgba(255,255,255,0.0)"}},g=p?{...m.iconOnly}:{...d?m.hovered:Object.freeze({}),...t?m.active:Object.freeze({}),...l?m.focused:Object.freeze({})},f="white"===n&&t?"darkGray":n;return(0,r.jsx)(o.xu,{"data-test-id":"lego-icon-wrapper",color:"transparent",rounding:i?"pill":"circle",dangerouslySetInlineStyle:{__style:g},children:(0,r.jsxs)(o.xu,{display:"flex",justifyContent:"center",alignItems:"center",dangerouslySetInlineStyle:{__style:{minHeight:p?30:48,minWidth:p?30:48}},paddingX:h?3:0,children:[u?(0,r.jsx)(o.JO,{accessibilityLabel:e,dangerouslySetSvgPath:{__path:c},color:f,inline:!0,size:p?16:20}):(0,r.jsx)(o.JO,{accessibilityLabel:e,icon:c,color:f,inline:!0,size:p?16:20}),i]})})},d=e=>{const{accessibilityLabel:t,children:i,color:o="darkGray",onClick:a,icon:s,isSVG:d,shadowType:c,shouldPad:u,iconOnly:p}=e;return(0,r.jsx)(n.Z,{accessibilityLabel:t,className:c||"",dataTestId:"lego-button",onClick:a,style:{display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none",borderRadius:"50%"},children:({active:e,hovered:n,focused:a})=>(0,r.jsx)(l,{active:e,accessibilityLabel:t,color:o,hovered:n,focused:a,icon:s,isSVG:d,iconOnly:p,shouldPad:u,children:i})})}},864793:(e,t,i)=>{i.d(t,{rh:()=>p,ZP:()=>h,_E:()=>m,G7:()=>g,l6:()=>f});var n=i(631739),o=i(750980),r=i(517458),a=i(754999),s=i(946753),l=i(998035),d=i(883119),c=i(785893);const u=()=>["employees","enabled"].includes(o.Z.getInstance().v2ActivateExperiment("px_show_protected_pin_stats_on_closeup"));function p(e,t){var i,a,s;if(!t.isAuth)return!1;const d=(0,l.Nc)(e)||(0,l.o)(e),c=(null===(i=e.board)||void 0===i?void 0:i.privacy)===n.Z.BoardPrivacy.PUBLIC,p=(null===(a=e.board)||void 0===a?void 0:a.privacy)===n.Z.BoardPrivacy.PROTECTED,h=(u()&&p||c)&&!e.is_repin&&(null===(s=e.pinner)||void 0===s?void 0:s.id)===t.id,{isStoryPin:m}=(0,r.Z)(e);return d&&(!p||u())||t.isPartner&&h||["employees","enabled"].includes(o.Z.getInstance().v2ActivateExperiment("web_ps4p"))&&m&&h}function h(e,t,i){return e?[{align:"start",displayText:i._("Video views","pinRep.pinStats.videoViews","Label for views of a video pin on pinrep"),field:"video_views",iconType:"play"},{align:"center",displayText:i._("Avg. time","pinRep.pinStats.videoAverageTime","Label for average time of a video pin on pinrep"),field:"video_average_time",iconType:"clock",valueFormat:"TIME"},{align:"end",displayText:i._("Saves","pinRep.pinStats.save","Label for saves of a video pin on pinrep"),field:"save",iconType:"angled-pin"}]:t?[{align:"start",displayText:i._("Impressions","pinRep.pinStats.impression","Label for impressions of a pin on pinrep"),field:"impression",iconType:"eye"},{align:"center",displayText:i._("Closeups","pinRep.pinStats.closeups","Label for closeups of a pin on pinrep"),field:"closeup",iconSize:10,iconType:"hand-pointing"},{align:"end",displayText:i._("Saves","pinRep.pinStats.save","Label for saves of a pin on pinrep"),field:"save",iconType:"angled-pin"}]:[{align:"start",displayText:i._("Impressions","pinRep.pinStats.impression","Label for impressions of a pin on pinrep"),field:"impression",iconType:"eye"},{align:"center",displayText:i._("Saves","pinRep.pinStats.save","Label for saves of a pin on pinrep"),field:"save",iconType:"angled-pin"},{align:"end",displayText:i._("Link clicks","pinRep.pinStats.clickthrough","Label for click-throughs of a pin on pinrep"),field:"clickthrough",iconSize:10,iconType:"arrow-up-right"}]}function m(e,t,i,n){const{isStoryPin:o,isVideo:a}=(0,r.Z)(e),u=(0,l.Nc)(e),p=(0,l.o)(e)&&(o||!u)?e.creator_analytics:e.aggregated_pin_data.creator_analytics,h=new Date(e.created_at),m=(new Date).getTime()-h.getTime(),g=Math.floor(m/36e5),f=p?p["24h_realtime"].is_realtime:null,_=p?p["24h_realtime"].timestamp:null;let x=null;p&&(x=o||a?p.all_time_realtime.timestamp:p["30d_realtime"].timestamp);const v=x!==_,y=e=>(0,s.nk)(i._("Updated {{ lastUpdated }}","closeup.partnerModule.lastUpdated","Indicates to the user when the stats were last updated"),{lastUpdated:e}).join(""),b={timeframe:"",lastUpdated:""};if(p)if(f){const e=p["24h_realtime"].impression>=(o||a?p.all_time_realtime.impression:p["30d_realtime"].impression);b.timeframe=e?i._("Last 24 hours","closeup.partnerModule.lastUpdatedRealtime","Stats from the stated duration"):o||a?i._("Lifetime of pin","closeup.partnerModule.lastUpdatedAllTime","Stats from stated duration"):i._("Last 30 days","closeup.partnerModule.lastUpdated30Days","Stats from stated duration"),b.lastUpdated=i._("Real-time estimates","closeup.partnerModule.lastUpdatedRealtime","Indicates to user that the stats are being updated in real-time")}else if(v||g>48)if(o||a){const e=n(p.all_time_realtime.timestamp);b.timeframe=i._("Lifetime of pin","closeup.partnerModule.lastUpdatedAllTime","Stats from stated duration"),b.lastUpdated=y(e)}else{const e=n(p["30d_realtime"].timestamp);b.timeframe=i._("Last 30 days","closeup.partnerModule.lastUpdated30Days","Stats from stated duration"),b.lastUpdated=y(e)}else{const e=n(p["24h_realtime"].timestamp);b.timeframe=i._("Last 24 hours","closeup.partnerModule.lastUpdatedHoursAgo","Stats from the stated duration"),b.lastUpdated=y(e)}else b.lastUpdated=i._("Stats are currently unavailable","closeup.partnerModule.statsUnavailable","Stats status for the pin");return(0,c.jsxs)(d.xu,{alignItems:o||"lg"!==t?"center":void 0,display:o||"lg"!==t?"flex":void 0,children:[(0,c.jsx)(d.xv,{align:"end",color:"gray",size:"sm",children:b.lastUpdated}),(o||["md","sm"].includes(t))&&!!p&&(0,c.jsx)(d.xv,{color:"gray",inline:!0,size:"sm",children:" ãƒ»"}),(0,c.jsx)(d.xv,{align:"end",color:"gray",size:"sm",children:b.timeframe})]})}function g(e,t){return(0,a.Z)(t.ngettext("Last {{ count }} Day","Last {{ count }} Days",e,"Previous {{ count }} days from current date","Previous {{ count }} days from current date"),{count:e})}function f(e,t){return(0,a.Z)(t.ngettext("Last {{ count }} Hour","Last {{ count }} Hours",e,"analytics.utils","Previous {{ count }} hours from current time"),{count:e})}},777158:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(667294);function o(e){return e<160?"header-only":"none"}function r(e){const[t,i]=(0,n.useState)(e.current?o(e.current.clientHeight||0):"none");return function(e,t){const i=(0,n.useRef)();(0,n.useEffect)((()=>{const n=e.current;if(!n)return;const o=i.current;o&&o.width===n.offsetWidth&&o.height===n.offsetHeight||(i.current={width:n.offsetWidth||0,height:n.offsetHeight||0},t&&t(i.current))})),i.current}(e,(({height:e})=>{const n=o(e);n!==t&&i(n)})),t}},250777:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=i(549135),r=i(626173);function a(e,t){const{componentType:i,contextLogData:a,viewParameter:s,viewType:l}=(0,r.Ep)();return(0,n.useCallback)((()=>{(0,o.j)(e,{component:i,view:l,viewParameter:s,...a,...t||{}})}),[t,i,a,e,s,l])}},335529:(e,t,i)=>{i.d(t,{X:()=>o,Z:()=>r});var n=i(667294);const o=120;function r(e,t=0,i=o){const[r,a]=(0,n.useState)(e?"active":"inactive");return(0,n.useEffect)((()=>{if(!e){const e=setTimeout((()=>a("inactive")),i);return()=>{clearTimeout(e)}}if(t){const e=setTimeout((()=>a("active")),t);return()=>{clearTimeout(e)}}a("active")}),[e]),r}},818270:(e,t,i)=>{i.d(t,{Bz:()=>o,$Z:()=>a});var n=i(762803);const{Provider:o,Consumer:r,useHook:a}=(0,n.ZP)("SurfaceContext",{surface:"Unknown"})},626173:(e,t,i)=>{i.d(t,{Be:()=>o,Ep:()=>a});var n=i(762803);const{Provider:o,Consumer:r,useHook:a}=(0,n.ZP)("trackingParametersContext")},752187:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(268648),o=i(560133),r=i(45815),a=i(233088),s=i(883119),l=i(549135),d=i(181307),c=i(626173),u=i(785893);function p({sizing:e="default",children:t,collageChipId:i,componentType:p,contextLogData:h,elementType:m,pin:g,viewParameter:f,viewType:_}){const x=(0,c.Ep)(),{group:v}=(0,d.tc)("web_search_share_skin_tone_filter")({dangerouslySkipActivation:!0}),{carousel_data:y,id:b}=g;let w,S=`/pin/${i||b}/`;if(y){const{carousel_slots:e=[],id:t,index:i=0}=y;S=`/pin/${b}/`,w={carousel_slot_id:e[i]&&e[i].id,carousel_data_id:t,carousel_slot_index:i}}w={...w||{},...(0,o.Kl)(g,h)||{}};const P=(0,n.Z)({href:S,externalData:{auxData:w,pin:g}});return(0,u.jsx)(s.iP,{mouseCursor:"zoomIn",rounding:2,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),(()=>{if((0,l.j)(101,{...h,component:p||x.componentType,element:m,objectId:b,view:_||x.viewType,viewParameter:f||x.viewParameter,...(0,o.Kl)(g,h)||{}}),(0,l.j)(8948,{closeup_navigation_type:"click",view:_||x.viewType,viewParameter:f||x.viewParameter,component:p||x.componentType,element:m,objectId:b,...h,...(0,o.Kl)(g,h)||{}}),v){const e=Number(a.y7.getItem(r.J)||0);a.y7.setItem(r.J,e+1)}})(),P({event:e})},fullWidth:"fullSize"===e,fullHeight:"fullSize"===e,href:S,role:"link",children:t})}},505812:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(752187),o=i(883119),r=i(785893);const a={chip:{marginRight:1,flex:"1 1 0"},chipInner:{paddingBottom:"100%"},chipContainer:{marginRight:-1}};function s({pin:e,enableCloseupLink:t}){const{aggregated_pin_data:i}=e,{pin_tags_chips:s}=i||{},l=s&&s.length>=3?s.slice(0,3):[];return(0,r.jsx)(o.xu,{display:"flex",dangerouslySetInlineStyle:{__style:a.chipContainer},children:l.map((i=>{var s,l,d,c;const u=(null===(s=i.images)||void 0===s?void 0:s["750x"])||{},p=(0,r.jsx)(o.Ee,{alt:"",fit:"cover",naturalHeight:null!==(l=u.height)&&void 0!==l?l:1,naturalWidth:null!==(d=u.width)&&void 0!==d?d:1,src:null!==(c=u.url)&&void 0!==c?c:""});return(0,r.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:a.chip},"data-test-id":"collageChip",children:(0,r.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:a.chipInner},position:"relative",children:(0,r.jsx)(o.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,children:(0,r.jsx)(o.zd,{height:"100%",wash:!0,width:"100%",children:t?(0,r.jsx)(n.Z,{sizing:"fullSize",collageChipId:i.id,pin:e,children:p}):p})})})},i.id)}))})}},546352:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(785893);function r({children:e,additionalStyles:t={}}){return(0,o.jsx)(n.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",...t}},children:e})}},452963:(e,t,i)=>{i.d(t,{F:()=>s,Z:()=>l});var n=i(185062),o=i(883119),r=i(785893);const a={impressed:{backgroundColor:"#adebad"}},s=()=>void 0!==(0,n.Z)().debug_impression_log;function l({debugImpressionState:e="paused",slotIndex:t}){return"paused"===e?null:(0,r.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:a.impressed},"data-test-id":"debug-pin-impressions",position:"absolute",top:!0,left:!0,right:!0,bottom:!0,opacity:.5,children:(0,r.jsx)(o.xu,{position:"absolute",top:!0,left:!0,padding:2,color:"darkGray",children:(0,r.jsx)(o.xv,{color:"white",children:(0,r.jsx)("span",{className:"deprecatedTextSizeXL",children:t})})})})}},514560:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(667294),o=i(881220),r=i(174523),a=i(883119),s=i(785893);function l(e){const t=(0,r.ZP)(),{onHide:i}=e,n=(0,s.jsx)(a.xv,{children:t._("Thank you for helping improve signal detection on Pinterest!","pinRep.actionBar.signalDetector.toast","Toast text displayed when a user submits a signal for review")});return(0,s.jsx)(o.Z,{onHide:i,text:n})}var d=i(311866),c=i(34411),u=i(475446);const p=function({anchor:e,onDismiss:t,pinId:i,signals:o}){const p=(0,r.ZP)(),[h,m]=(0,n.useState)(0),g=(0,c.ZP)(),{showOneToast:f}=(0,u.F9)();if(!g.isEmployee)return null;const _=o.map((({signal_message:e})=>({href:"#",text:null!=e?e:""}))),{background_color:x,icon_url:v,signal_id:y,signal_message:b}=o[h];return(0,s.jsx)(a.mh,{children:(0,s.jsx)(a.J2,{anchor:e,idealDirection:"right",onDismiss:t,positionRelativeToAnchor:!1,size:"lg",children:(0,s.jsxs)(a.xu,{padding:4,width:"100%",children:[o.length>1&&(0,s.jsx)(a.xu,{overflow:"scrollX",padding:1,marginBottom:4,children:(0,s.jsx)(a.mQ,{activeTabIndex:h,onChange:({event:e,activeTabIndex:t,dangerouslyDisableOnNavigation:i})=>{i(),(({activeTabIndex:e,event:t})=>{t.preventDefault(),m(e)})({activeTabIndex:t,event:e})},tabs:_})}),(0,s.jsx)(a.kC,{alignItems:"center",justifyContent:"start",children:(0,s.jsx)(a.X6,{size:"sm",children:p._("Signal detected:","pinRep.actionBar.signalDetector.header","Header for signal detector flyout")})}),(0,s.jsx)(a.xu,{paddingY:3,children:(0,s.jsxs)(a.kC,{alignItems:"center",gap:2,justifyContent:"center",children:[(0,s.jsx)(a.xu,{height:40,overflow:"hidden",rounding:"circle",width:40,children:v?(0,s.jsx)(a.Ee,{alt:p._("Signal display","pinRep.actionBar.signalDetector.signalAsset","Asset to represent the signal detected"),color:"white",naturalHeight:1,naturalWidth:1,src:v}):(0,s.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:x}},height:40,width:40})}),(0,s.jsx)(a.xv,{size:"md",children:b})]})}),(0,s.jsx)(a.xu,{marginBottom:3,children:(0,s.jsx)(a.xv,{size:"md",children:p._("If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.","pinRep.actionBar.signalDetector.instructions","Instructions to the user for how to handle inaccurate detection")})}),(0,s.jsxs)(a.kC,{alignItems:"center",gap:2,justifyContent:"start",children:[(0,s.jsx)(a.zx,{fullWidth:!0,color:"red",size:"md",text:p._("Send for review","pinRep.actionBar.signalDetector.button.review","Button label for users to send the pin for review"),onClick:()=>{const e={pin_id:i,signal_id:y,user:g.id};d.ZP.create("SignalReviewRequestResource",e).callCreate(),t(),f((({onHide:e})=>(0,s.jsx)(l,{onHide:e})))}}),(0,s.jsx)(a.zx,{fullWidth:!0,color:"gray",size:"md",text:p._("Cancel","pinRep.actionBar.signalDetector.button.cancel","Button label for users to cancel"),onClick:t})]})]})})})};var h=i(975151),m=i(907669),g=i(551687),f=i(689859);function _({signals:e,pinId:t}){const{background_color:i,icon_url:o,signal_message:r}=e[0],[l,d]=(0,n.useState)(!1),c=(0,n.useRef)();return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(g.Z,{name:"SafeSuspense_DebugSignal_FeedbackButton",children:(0,s.jsx)(f.Z,{children:(0,s.jsx)(a.xu,{"data-test-id":"debug-signals-feedback-button",children:(0,s.jsx)(m.Z,{children:(0,s.jsx)(h.Z,{children:({hovered:e,onMouseEnter:t,onMouseLeave:n})=>(0,s.jsx)(a.iP,{onTap:()=>d((e=>!e)),rounding:"pill",onMouseEnter:t,onMouseLeave:n,children:(0,s.jsxs)(a.xu,{color:e?"darkGray":"transparentDarkGray",rounding:"pill",display:"flex",alignItems:"center",padding:3,ref:c,children:[(0,s.jsx)(a.xu,{display:"flex",width:24,height:24,rounding:"circle",color:"white",marginEnd:1,justifyContent:"center",alignItems:"center",children:(0,s.jsx)(a.xu,{width:20,height:20,rounding:"circle",overflow:"hidden",children:(0,s.jsx)(a.Ee,{alt:"",color:i,src:null!=o?o:"",naturalHeight:1,naturalWidth:1})})}),(0,s.jsx)(a.xv,{color:"white",size:"md",weight:"bold",children:r})]})})})})})})}),l&&c&&c.current&&(0,s.jsx)(p,{anchor:c.current,onDismiss:()=>d(!1),pinId:t,signals:e})]})}function x({pin:e}){if(!(0,c.ZP)().isEmployee)return null;const{id:t,deb_ads:i,deb_content_quality:n,deb_inclusive_product:o,deb_shopping:r,deb_trust_and_safety:a}=e;return i?(0,s.jsx)(_,{pinId:t,signals:i}):n?(0,s.jsx)(_,{pinId:t,signals:n}):o?(0,s.jsx)(_,{pinId:t,signals:o}):r?(0,s.jsx)(_,{pinId:t,signals:r}):a?(0,s.jsx)(_,{pinId:t,signals:a}):null}},907669:(e,t,i)=>{i.d(t,{Z:()=>r,N:()=>a});var n=i(883119),o=i(785893);function r({children:e,fullWidth:t}){return(0,o.jsx)(n.xu,{"data-test-id":"pointer-events-wrapper",dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",width:t?"100%":void 0}},children:e})}function a({children:e,enabled:t}){return t?(0,o.jsx)(r,{children:e}):e}},7713:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(883119),o=i(335529),r=i(785893);function a(e,t){return{hidden:{opacity:0,transition:t?`opacity ${t}ms ease`:void 0},visible:{opacity:1,transition:e?`opacity ${e}ms ease`:void 0}}}function s({children:e,fadeInDuration:t=0,fadeOutDuration:i=o.X,visibility:s}){return"none"!==s&&e?(0,r.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:a(t,i)[s]},children:e}):null}},818026:(e,t,i)=>{i.d(t,{ZP:()=>f});var n=i(667294),o=i(546352),r=i(174523),a=i(365217),s=i(451875),l=i(549135),d=i(883119),c=i(785893);const u={base:{transition:"all 250ms",opacity:0},blurred:{backgroundPosition:"50% 50%",backgroundSize:"cover",borderRadius:s.Oc,filter:"blur(10px)",opacity:1}},p={base:{transition:"all 250ms"},blurred:{backgroundColor:"rgba(0,0,0,0.6)"}},h={base:{opacity:0,transition:"all 250ms"},visible:{opacity:1}},m=["followed","related","search"],g=["pfy","pfyBoard"];function f({feedbackType:e,isHomefeedTunerVariantExp:t,pin:i,hideContents:f=!1}){var _;const x=(0,r.ZP)(),[v,y]=(0,n.useState)(!1),[b,w]=(0,n.useState)(!1);(0,n.useEffect)((()=>y(!0)),[]);const S=()=>w(!0),{feedbackText:P,images:j,showFeedbackOverlay:T,undoAction:I,undoText:C}=i,E=j&&(null===(_=j["236x"])||void 0===_?void 0:_.url),{image:k,subTitle:R,title:O,unfollow:A}=null!=P?P:{},N=!m.includes(e),L=g.includes(e),D=()=>{(0,l.j)(101,{view:1,viewParameter:92,element:11347})};return(0,c.jsxs)(d.xu,{color:"transparent",dangerouslySetInlineStyle:{__style:{borderRadius:s.Oc}},"data-test-id":"obscured-overlay",overflow:"hidden",position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:[(0,c.jsxs)(d.xu,{dangerouslySetInlineStyle:{__style:{borderRadius:s.Oc}},margin:-4,overflow:"hidden",position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:[E&&(0,c.jsx)(o.Z,{additionalStyles:{...u.base,...v?u.blurred:{},backgroundImage:`url("${E}")`}}),(0,c.jsx)(o.Z,{additionalStyles:{...p.base,...p.blurred}})]}),(0,c.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{...h.base,...!T&&v?h.visible:{}}},height:"100%",padding:4,position:"relative",width:"100%",children:!f&&(0,c.jsx)(d.xu,{height:"100%",children:(0,c.jsxs)(d.xu,{"data-test-id":"PinFeedbackConfirmation",display:"flex",direction:"column",height:"100%",maxWidth:216,children:[(0,c.jsx)(d.xu,{marginBottom:2,children:(0,c.jsx)(d.X6,{color:"white",size:"sm",children:O})}),(0,c.jsxs)(d.xu,{display:"flex",marginBottom:1,children:[k&&(0,c.jsx)(d.xu,{marginEnd:3,children:(0,c.jsx)(d.zd,{width:k.width,height:k.height,rounding:2,wash:!0,children:(0,c.jsx)(d.Ee,{alt:R||"",fit:"cover",naturalHeight:1,naturalWidth:1,src:k.url||""})})}),(0,c.jsx)(d.xv,{color:"white",overflow:"normal",children:R})]}),t?(0,c.jsxs)(n.Fragment,{children:[I&&(0,c.jsx)(d.xu,{children:(0,c.jsx)(d.iP,{onTap:I,children:(0,c.jsx)(d.xv,{color:"white",weight:"bold",overflow:"normal",children:x._("Undo","Text on the button to navigate to undo hiding a pin","Text on the button to navigate to undo hiding a pin")})})}),(0,c.jsxs)(d.xu,{marginTop:"auto",children:[!I&&!b&&A&&!L&&(0,c.jsx)(d.zx,{fullWidth:!0,color:"white",onClick:()=>(0,a.tx)(A.action,A.actionOptions,S),text:x._("Unfollow","Text on the button to unfollow a specific board / user","Text on the button to unfollow a specific board / user")}),N&&(0,c.jsx)(d.zx,{role:"link",color:"white",fullWidth:!0,href:"/edit",onClick:D,text:x._("Tune your feed","Text on the button to navigate to homefeed control","Text on the button to navigate to homefeed control")})]})]}):(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(d.xu,{children:N&&(0,c.jsx)(d.rU,{href:"/edit",onClick:D,children:(0,c.jsx)(d.xv,{color:"white",weight:"bold",overflow:"normal",children:x._("Tune your home feed","Text on the link to navigate to homefeed control","Text on the link to navigate to homefeed control")})})}),(0,c.jsxs)(d.xu,{marginTop:"auto",children:[!I&&!b&&A&&!L&&(0,c.jsx)(d.zx,{fullWidth:!0,color:"white",onClick:()=>(0,a.tx)(A.action,A.actionOptions,S),text:x._("Unfollow","Text on the button to unfollow a specific board / user","Text on the button to unfollow a specific board / user")}),I&&(0,c.jsx)(d.zx,{fullWidth:!0,color:"white",onClick:I,text:C||x._("Undo","Text on the button to undo hiding a pin","Text on the button to undo hiding a pin")})]})]})]})})})]})}},665035:(e,t,i)=>{i.r(t),i.d(t,{default:()=>_});var n=i(667294),o=i(40142),r=i(101161),a=i(519922),s=i(83742),l=i(537343),d=i(174523),c=i(250777),u=i(529110),p=i(698602),h=i(784655),m=i(626173),g=i(883119),f=i(785893);function _({feedbackData:e,feedbackType:t,pin:i,pinTitle:_,setForcePrimary:x,transparentBackground:v}){const y=(0,d.ZP)(),b=(0,o.useDispatch)(),{viewParameter:w,viewType:S}=(0,m.Ep)(),[P,j]=(0,n.useState)(!1),[T,I]=(0,n.useState)(),{ad_match_reason:C,show_ad_reasons:E,board:k,category:R,description:O,id:A="",images:N,is_promoted:L,pinner:D,promoter:B,recommendation_reason:Z,source_interest:M,videos:F}=i;var G;const U=(G=L?60:50,function(e){return(0,l.ZP)((e||"").trim(),G)})(null!=O?O:""),V=(0,a.Z)(N,"236x"),H=(0,h.iR)(F),z=(0,c.Z)(101,{component:0,element:981,feedback_type:t,objectId:A}),W=()=>{E||(x(!1),b((0,p.i0)(A)),j(!1))};return(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)(g.xu,{"data-test-id":"feedback-button",ref:I,children:(0,f.jsx)(g.hU,{accessibilityLabel:y._("More information","accessibility label for overflow menu button","accessibility label for overflow menu button"),bgColor:v?"transparent":"white",icon:"ellipsis",iconColor:"darkGray",onClick:()=>{P?W():(x(!0),j(!0)),z()},size:"sm"})}),P&&(0,f.jsx)(g.mh,{children:(0,f.jsx)(g.J2,{anchor:T,idealDirection:"right",onDismiss:W,positionRelativeToAnchor:!1,size:"md",children:(0,f.jsx)(s.ZP,{ad_match_reason:C,bestPinImgSrc:(0,u.P0)(i),board:k,feedbackData:e,feedbackType:t,hideDownload:H,onLinkClick:()=>{P&&W()},onHide:W,onDownloadHideFlyout:()=>{x(!1),j(!1)},pinCategory:R,pinDescription:U,pinId:A,pinImgSrc:V,pinner:D,pinTitle:_,promoter:B,recommendationReason:Z,reportPin:(0,r.Z)({pin:i,viewParameter:w,viewType:S}),sourceInterest:M,viewParameter:w,viewType:S})})})]})}},83742:(e,t,i)=>{i.d(t,{ZP:()=>M});var n=i(667294),o=i(40142),r=i(549156),a=i(883119),s=i(785893);function l({iconAccessibilityLabel:e,icon:t,linkAccessibilityLabel:i,showNavigationIcon:n,text:o}){return(0,s.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,s.jsx)(r.Z,{id:"ad-reason-icon",children:(0,s.jsx)(a.Sj,{accessibilityLabel:e,bgColor:"lightGray",icon:t,iconColor:"darkGray"})}),(0,s.jsx)(a.xu,{alignSelf:"center","data-test-id":"ad-location-targeting-reason",height:"100%",marginStart:2,children:(0,s.jsx)(a.xv,{children:o})}),n&&i&&(0,s.jsx)(a.kC,{direction:"column",justifyContent:"center",children:(0,s.jsx)(a.JO,{accessibilityLabel:i,color:"darkGray",icon:"arrow-forward"})})]})}var d=i(451190),c=i(180307),u=i(174523),p=i(946753),h=i(549135);const{ACCOUNT_SETTINGS:m,CANONICAL_MAIN_URL:g,HELP_BLOCKING:f,HELP_PROMOTED_PINS_URL:_}=c.Z.settings;function x({onDismiss:e,brandName:t,country:i,language:n,isAgeMatched:o,isBehaviorTargetingMatched:c,isCustomerListMatched:x,isGeoPostalCodeMatched:v,isGeoRegionMatched:y,isShoppingTargetingRematched:b}){const w=(0,u.ZP)();return(0,s.jsx)(d.Z,{accessibilityModalLabel:w._("Why am I seeing this Ad?","app.common.react.components.PinRep.components.AdReasonsModal","Modal for explaining the reasons an advertiser is targeting a user"),onDismiss:e,children:(0,s.jsxs)(a.xu,{paddingX:8,paddingY:6,children:[(0,s.jsxs)(a.xu,{display:"flex",justifyContent:"center",marginBottom:6,position:"relative",children:[(0,s.jsx)(a.xu,{position:"absolute",left:!0,children:(0,s.jsx)(a.hU,{accessibilityLabel:w._("Close","app.common.react.components.PinRep.components.AdReasonsModal.closeModal","Close ad reasons modal"),icon:"cancel",iconColor:"darkGray",onClick:e,size:"sm"})}),(0,s.jsx)(a.X6,{align:"center",size:"md",children:w._("Why am I seeing this ad?","Heading for promoted Pins explanation","Heading for promoted pins explanation")})]}),(0,s.jsxs)(a.xu,{children:[(0,s.jsxs)(a.kC,{direction:"column",gap:4,children:[(0,s.jsx)(a.xu,{children:(0,s.jsx)(a.xv,{children:(0,p.nk)(w._("{{ brandName }} wants to get their ads in front of people like you. {{ learnMoreLink }}","app.common.react.components.PinRep.components.AdReasonsModal.advertiserExplanation","text informing the user about who is the advertiser"),{brandName:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:t},"ad-reasons-brand-name"),learnMoreLink:(0,s.jsx)(r.Z,{id:"ad-reasons-learn-more-link",children:(0,s.jsx)(a.xv,{inline:!0,children:(0,s.jsx)(a.rU,{href:_,inline:!0,onClick:()=>{(0,h.j)(101,{component:13756,element:12057})},target:"blank",children:w._("Learn more","app.common.react.components.PinRep.components.AdReasonsModal.learnMoreLink","Learn more link for info about the reasons an ad is shown")})},"ad-reasons-learn-more-link")})})})}),(0,s.jsx)(a.xu,{marginBottom:4,children:(0,s.jsx)(a.xv,{children:(0,p.nk)(w._("{{ brandName }} is trying to reach people who fit the following criteria:","app.common.react.components.PinRep.components.AdReasonsModal.audienceExplanation","text informing the user about who is the advertiser's target audience"),{brandName:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:t},"ad-reasons-brand-name")})})})]}),(0,s.jsx)(r.Z,{id:"ad-reasons",children:(0,s.jsxs)(a.kC,{direction:"column",flex:"none",gap:4,children:[v||y?(0,s.jsx)(a.iP,{role:"link",href:`${g}${m}`,onTap:()=>{(0,h.j)(101,{component:13756,element:12059})},target:"blank",children:(0,s.jsx)(l,{iconAccessibilityLabel:w._("Icon for ad targeting location","app.common.react.components.PinRep.components.AdReasons.locationIcon","Icon for ad targeting location"),icon:"location",linkAccessibilityLabel:w._("Navigate to account settings","app.common.react.components.PinRep.components.AdReasonRow.icon","An icon for navigating to account settings"),showNavigationIcon:!0,text:(0,p.nk)(w._("Your primary location is in {{countryName}} and your primary language is {{language}}","app.common.react.components.PinRep.components.AdReasonsModal.locationTargeting","Ad explanation for targeting location"),{countryName:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:i},"ad-reasons-country-name"),language:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:n},"ad-reasons-language")})})}):null,o&&(0,s.jsx)(l,{iconAccessibilityLabel:w._("Icon for ad targeting age","app.common.react.components.PinRep.components.AdReasons.ageIcon","Icon for ad targeting age"),icon:"person",text:(0,p.nk)(w._("{{ brandName }} is trying to reach people in your age range","app.common.react.components.PinRep.components.AdReasonsModal.ageTargeting","Ad explanation for targeting age range"),{brandName:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:t},"ad-reasons-age-brand-name")})}),c&&(0,s.jsx)(l,{iconAccessibilityLabel:w._("Icon for ad targeting search history","app.common.react.components.PinRep.components.AdReasons.searchIcon","Icon for ad targeting search history"),icon:"search",text:w._("Your Pinterest browsing history and search behavior","app.common.react.components.PinRep.components.AdReasonsModal.searchTargeting","Ad explanation for targeting the search history of the user")}),b&&(0,s.jsx)(l,{iconAccessibilityLabel:w._("Icon for ad targeting customers who interacted with this brand previously","app.common.react.components.PinRep.components.AdReasonsModal.shoppingTargetingIcon","Ad explanation for targeting users who have interacted with an advertiser brand"),icon:"clock",text:(0,p.nk)(w._("You've interacted with {{brandName}} before","app.common.react.components.PinRep.components.AdReasonsModal.shoppingTargetingText","Text explaining the ad reason for targeting users who interacted with brand previously"),{brandName:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:t},"retargeting-ad-reason")})}),x&&(0,s.jsx)(l,{iconAccessibilityLabel:w._("Icon for ad targeting user on an audience list","app.common.react.components.PinRep.components.AdReasons.genderIcon","Icon for ad targeting gender"),icon:"menu",text:(0,p.nk)(w._("You're on an audience list provided by {{brandName}}","app.common.react.components.PinRep.components.AdReasonsModal.customerListTargeting","Ad explanation for targeting customer list"),{brandName:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:t},"ad-reasons-customer-list")})}),(0,s.jsx)(a.xu,{marginBottom:1,children:(0,s.jsx)(a.xv,{children:w._("There could also be more factors not listed here.","app.common.react.components.PinRep.components.AdReasonsModal.miscFactors","Text explaining there are more targeting factors")})})]})}),(0,s.jsxs)(a.kC,{direction:"column",gap:1,children:[(0,s.jsx)(a.xu,{marginBottom:3,marginTop:3,children:(0,s.jsx)(a.iz,{})}),(0,s.jsx)(a.xu,{marginBottom:1,marginTop:1,children:(0,s.jsx)(a.X6,{size:"sm",children:w._("I don't want to see this ad","app.common.react.components.PinRep.components.AdReasonsModal.hideThisAdHeading","Text for explaining how to hide an ad")})}),(0,s.jsx)(a.xu,{marginBottom:4,children:(0,s.jsx)(a.xv,{children:(0,p.nk)(w._("If you don't want to see ads from a specific advertiser you can block the advertiser's Pinterest profile. {{learnMoreLink}}","app.common.react.components.PinRep.components.AdReasonsModal.blockAdvertiserText","Text explaining how to block an advertiser profile"),{learnMoreLink:(0,s.jsx)(a.xv,{inline:!0,children:(0,s.jsx)(a.rU,{inline:!0,href:f,onClick:()=>{(0,h.j)(101,{component:13756,element:12058})},target:"blank",children:w._("Learn more","app.common.react.components.PinRep.components.AdReasonsModal.learnMoreLink","Learn more link for info about the reasons an ad is shown")})},"ad-reasons-learn-more-link")})})})]})]})]})})}var v=i(535718),y=i(34411),b=i(585967);function w({pinId:e,onDismiss:t}){var i,r,a,l;const{locale:d}=(0,b.B)(),{country:c=""}=(0,y.ZP)(),u=(0,v.Z)({name:"CountriesResource",options:{hasEmptyState:!0}}),p=(0,v.Z)({name:"LocalesResource"}),m=(0,o.useSelector)((({pins:t})=>t[e]));(0,n.useEffect)((()=>{(0,h.j)(120,{component:13756})}),[]);const{ad_targeting_attribution:g,promoter:f}=null!=m?m:{},{is_age_matched:_=!1,is_behavior_targeting_matched:w=!1,is_customer_list_matched:S=!1,is_geo_postal_code_matched:P=!1,is_geo_region_matched:j=!1,is_shopping_retargeting_matched:T=!1}=null!==(i=function(e=null,t=4){return e&&Object.keys(e).filter((t=>"boolean"==typeof e[t])).slice(0,t).reduce(((t,i)=>({...t,[i]:e[i]})),{})}(g))&&void 0!==i?i:{},I=null!==(r=null==f?void 0:f.full_name)&&void 0!==r?r:"",C=function(e,t){var i;const{name:n=""}=null!==(i=e.find((e=>e.key===t)))&&void 0!==i?i:{};return n}(null!==(a=u.data)&&void 0!==a?a:[],c),E=function(e,t){var i;const{name:n=""}=null!==(i=e.find((e=>e.key===t)))&&void 0!==i?i:{};return n}(null!==(l=p.data)&&void 0!==l?l:[],d);return(0,s.jsx)(x,{brandName:I,country:C,language:E,isAgeMatched:_,isBehaviorTargetingMatched:w,isCustomerListMatched:S,isGeoPostalCodeMatched:P,isGeoRegionMatched:j,isShoppingTargetingRematched:T,onDismiss:t})}var S=i(595657),P=i(104573),j=i(52620),T=i(539484),I=i(374284),C=i(538958),E=i(266750),k=i(778423),R=i(454217),O=i(698602),A=i(365217),N=i(708206),L=i(855168);function D(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const B={color:"white",textDecorationColor:"white"};class Z extends n.Component{constructor(e){super(e),D(this,"getRecommendationDescription",(()=>{const{ad_match_reason:e,board:t,feedbackType:i,pinner:n,promoter:o,recommendationReason:r,sourceInterest:a}=this.props;return this.feedbackHelpers.getRecommendationDescription({ad_match_reason:e,board:t,feedbackType:i,makeNavigateLink:this.makeNavigateLink,pinner:n,promoter:o,recommendationReason:r,sourceInterest:a})})),D(this,"getRecommendationDescriptionImage",(()=>{const{board:e,feedbackType:t,pinner:i,recommendationReason:n}=this.props;if("followed"!==t&&"pfyBoard"!==t)return null;let o,r,l;return i&&i.explicitly_followed_by_me?(o=i.image_small_url,r="50%",l=`/${i.username}`):e&&e.image_thumbnail_url&&(o=e.image_thumbnail_url,r="4px",l=n&&n.board&&n.board.url||e.url),o?(0,s.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{borderRadius:r}},flex:"none",marginStart:3,overflow:"hidden",children:(0,s.jsx)(a.iP,{onTap:()=>{var e;return this.props.history.push(null!==(e=l)&&void 0!==e?e:"")},children:(0,s.jsx)(a.zd,{height:40,wash:!0,width:40,children:(0,s.jsx)(a.Ee,{alt:"",fit:"cover",naturalHeight:1,naturalWidth:1,src:o})})})}):null})),D(this,"getUnfollowAction",(()=>{const{board:e,feedbackType:t,pinner:i,sourceInterest:n}=this.props;return this.feedbackHelpers.getUnfollowAction({board:e,feedbackType:t,makeNavigateLink:this.makeNavigateLink,pinner:i,sourceInterest:n})})),D(this,"getUndoText",(e=>"unfollowPinner"===e||"unfollowBoard"===e?this.props.i18n._("Follow again","Caption for button to undo a unfollowing of a topic","Caption for button to undo a unfollowing of a topic"):"")),D(this,"feedbackHelpers",(0,R.ZP)({i18n:this.props.i18n,interpolateNamedTemplate:p.nk})),D(this,"makeNavigateLink",((e,t,i,n)=>{const o={display:"inline",...n?B:{}};return(0,s.jsx)(a.rU,{onClick:this.props.onLinkClick,role:"link",href:t,inline:!0,children:(0,s.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:o},children:i})},e)})),D(this,"reportPinOption",(()=>({action:"reportPin",elementType:974,text:this.props.i18n._("Report Pin","Report a pin in the dropdown","Report a pin in the dropdown"),description:this.props.i18n._("This goes against Pinterest's community guidelines","Description for the report pin option","Description for the report pin option"),callback:this.props.reportPin}))),D(this,"hidePinOption",(e=>{const{feedbackData:t,feedbackType:i,pinId:n,recommendationReason:o}=this.props,r="search"===i?973:982,{action:a,actionOptions:s}=this.feedbackHelpers.getHidePinAction({feedbackData:t,feedbackType:i,pinId:n,recommendationReasonId:o&&o.reason&&k.ReasonToChoose[o.reason],pinFeedbackType:"pfy"===i?4:10,throughId:o&&(0,R.yl)(o),throughProperties:o&&(0,R.XZ)(o),clientTrackingParams:(0,S.Z)(n)}),l=this.props.i18n._("Hide Pin","message displayed in pin feedback list","message displayed in pin feedback list");return{action:a,actionOptions:s,feedbackText:this.pinHiddenFeedbackText(e),text:l,description:this.props.i18n._("See fewer Pins like this","Description for the hide pin option","Description for the hide pin option"),elementType:r}})),D(this,"stopRecommendationOption",(()=>{const{feedbackData:e,feedbackType:t,pinId:i,recommendationReason:n}=this.props,{board:o,reason:r}=null!=n?n:{},a=r&&k.ReasonToChoose[r],s=n&&(0,R.yl)(n),l=n&&(0,R.XZ)(n),d="pfyBoard"===t,{action:c,actionOptions:u}=this.feedbackHelpers.getHidePinAction({feedbackData:e,feedbackType:t,pinId:i,recommendationReasonId:a,pinFeedbackType:d?2:4,throughId:s,throughProperties:l,clientTrackingParams:(0,S.Z)(i)}),h=o?this.makeNavigateLink("boardUrl",o.url,o.name,!0):"";return{action:c,actionOptions:u,feedbackText:{subTitle:d&&o?(0,p.nk)(this.props.i18n._("We won't show you Pins inspired by your board {{ formattedBoard }} anymore.","Primary caption displayed in pin feedback list to unfollow a board","Primary caption displayed in pin feedback list to unfollow a board"),{formattedBoard:h}):this.props.i18n._("Got it! We won't show you Pins like this in the future.","message displayed after stopping recommendations from a pin","message displayed after stopping recommendations from a pin")},text:d&&o?(0,p.nk)(this.props.i18n._("Stop seeing Pins inspired by {{ boardName }}","Primary caption displayed in pin feedback list to unfollow a board","Primary caption displayed in pin feedback list to unfollow a board"),{boardName:o.name}):this.props.i18n._("See fewer Pins like this","Feedback option to stop recommendations inspired by this Pin","Feedback option to stop recommendations inspired by this Pin"),elementType:284}})),D(this,"unfollowBoardOption",(()=>{var e,t;const{board:i}=this.props,n=i?this.makeNavigateLink("boardUrl",null!==(e=i.url)&&void 0!==e?e:"",null!==(t=i.name)&&void 0!==t?t:"",!0):"",o=(0,p.nk)(this.props.i18n._("Unfollow {{ boardName }}","Primary caption displayed in pin feedback list to unfollow a board","Primary caption displayed in pin feedback list to unfollow a board"),{boardName:null==i?void 0:i.name}),r=(0,p.nk)(this.props.i18n._("Got it! You unfollowed {{ formattedBoard }} and won't see Pins saved to it in the future.","Confirmation text after unfollowing a board","Confirmation text after unfollowing a board"),{formattedBoard:n});return{action:"unfollowBoard",actionOptions:{board_id:null==i?void 0:i.id},feedbackText:{title:"",subTitle:r},text:o,description:(0,p.nk)(this.props.i18n._('Stop seeing Pins from the board "{{ boardName }}"',"Secondary caption displayed in pin feedback list to unfollow a board","Secondary caption displayed in pin feedback list to unfollow a board"),{boardName:null==i?void 0:i.name}),elementType:10614}})),D(this,"unfollowTopicOption",(()=>{const{sourceInterest:e}=this.props;if(e){const{id:t,name:i="",url_name:n=""}=e,o=`/topics/${n}`,r=this.makeNavigateLink("topicUrl",o,i,!0),a=(0,p.nk)(this.props.i18n._("See fewer Pins from {{ topicName }}","Primary caption displayed in pin feedback list to unfollow a topic","Primary caption displayed in pin feedback list to unfollow a topic"),{topicName:i}),s=(0,p.nk)(this.props.i18n._("We'll show you fewer Pins from {{ formattedTopic }} in the future.","Confirmation text after unfollowing a topic","Confirmation text after unfollowing a topic"),{formattedTopic:r});return{action:"unfollowTopic",actionOptions:{interest_id:t,interest_list:E.X},feedbackText:{title:"",subTitle:s},text:a,description:(0,p.nk)(this.props.i18n._('Stop seeing Pins from the topic "{{ topicName }}"',"Secondary caption displayed in pin feedback list to unfollow a topic","Secondary caption displayed in pin feedback list to unfollow a topic"),{topicName:e.name}),elementType:976}}return null})),D(this,"unfollowUserOption",(()=>{const{pinner:e}=this.props,{id:t,username:i,full_name:n}=null!=e?e:{},o=`/${i}`,r=e?this.makeNavigateLink("pinnerUrl",o,null!=n?n:"",!0):"";return{action:"unfollowPinner",actionOptions:{user_id:t},feedbackText:{title:"",subTitle:(0,p.nk)(this.props.i18n._("Got it! You unfollowed {{ formattedUser }} and won't see Pins they save in the future.","Confirmation text after unfollowing a user","Confirmation text after unfollowing a user"),{formattedUser:r})},text:(0,p.nk)(this.props.i18n._("Unfollow {{ fullName }}","Primary caption displayed in pin feedback list to unfollow a user","Primary caption displayed in pin feedback list to unfollow a user"),{fullName:n}),description:this.props.i18n._("Stop seeing all their Pins","Secondary caption displayed in pin feedback list to unfollow a user","Secondary caption displayed in pin feedback list to unfollow a user"),elementType:10640}})),D(this,"downloadPinOption",(()=>({action:"downloadPin",text:this.props.i18n._("Download image","Button to download Pin image","Button to download Pin image"),elementType:10836}))),D(this,"_pinFeedbackText",(()=>{const{location:e,feedbackType:t,hideDownload:i,pinner:n}=this.props,o="followed"===this.props.feedbackType,r=e.pathname.includes("following"),a=(o||"topic"===t)&&!r,s=this.hidePinOption(a),l=this.reportPinOption(),d="promoted"!==t&&!i;switch(t){case"followed":const e=r,i=!e&&this.getRecommendationDescription(),o=null!=n&&n.explicitly_followed_by_me?this.unfollowUserOption():this.unfollowBoardOption();return{...i?{description:i}:{},options:[s,...a||e?[o]:[],..."promoted"!==t?[this.downloadPinOption()]:[],l]};case"promoted":const{pinId:c,showAdReasonsModal:u}=this.props,p=[s,{dataTestId:"why-am-i-seeing-this-ad-reasons",action:"showAdReasons",text:this.props.i18n._("Why am I seeing this ad?","app.common.react.components.PinFeedbackDropdown.adReasonText","Text to promoted pins explanation modal"),callback:()=>{u(c)}},l];return{description:this.getRecommendationDescription(),options:p};case"topic":const h=this.unfollowTopicOption(),m=[s,...a&&h?[h]:[],...d?[this.downloadPinOption()]:[],l];return{description:this.getRecommendationDescription(),options:m};case"pfy":case"pfyBoard":const g=[s,..."pfyBoard"===t?[this.stopRecommendationOption()]:[],...d?[this.downloadPinOption()]:[],l];return{description:this.getRecommendationDescription(),options:g};default:const f=[s,...d?[this.downloadPinOption()]:[],l];return{description:this.getRecommendationDescription(),options:f}}})),D(this,"pinHiddenFeedbackText",(e=>{const t=e?null:this.getUnfollowAction();return t?{title:"",subTitle:this.getRecommendationDescription(),unfollow:t}:{title:"",subTitle:this.props.i18n._("Got it! We won't show you this Pin in the future.","message displayed after hiding a pin","message displayed after hiding a pin")}}));const t=this._pinFeedbackText();this.state={pinFeedbackConfig:t,showSecondary:!1}}onPinFeedbackActionButtonClick(e,t,i){e.stopPropagation(),t.auxData?this.handleClickLogging(t.elementType,t.auxData):this.handleClickLogging(t.elementType),(0,A.tx)(t.action,t.actionOptions,i)}onPinHide(e,t,i,n){const{hidePinFeedback:o,onHide:r,pinId:a,showPinFeedback:s,showPinFeedbackOverlay:l,showPinFeedbackUndo:d,viewParameter:c,viewType:u}=this.props;t&&i&&n?d(a,e,(0,R.EF)(i,n,a,u,c,o,h.j),this.getUndoText(n)):s(a,e),!i||i.promoted||10!==i.feedback_type&&4!==i.feedback_type?r():(this.setState({showSecondary:!0}),l(a))}makeStrongText(e,t){return(0,s.jsx)("strong",{children:t},e)}handleClickLogging(e,t={}){const{feedbackType:i,viewParameter:n,viewType:o}=this.props;(0,h.j)(101,{...t,view:o,viewParameter:n,element:e,component:(0,R.nb)(i)})}renderButtons(){const{hideDownload:e,onDownloadHideFlyout:t,pinId:i,viewType:n,viewParameter:o}=this.props,{pinFeedbackConfig:l}=this.state,{options:d}=l,c=[],u=d.length;for(let p=0;p<u;p+=1){const l=d[p],u=A.P5.includes(l.action),h=l.callback?l.callback:()=>this.onPinHide(l.feedbackText,u,l.actionOptions,l.action);if("downloadPin"!==l.action){const e=(0,T.Z)({url:l.link||""})?"nofollow":"none";c.push((0,s.jsx)(a.xu,{children:l.link?(0,s.jsx)(r.Z,{id:l.dataTestId||"",children:(0,s.jsx)(a.iP,{target:"blank",role:"link",href:l.link,rel:e,children:(0,s.jsx)(j.Z,{compact:!0,text:l.text})})}):(0,s.jsx)(r.Z,{id:l.dataTestId||"",children:(0,s.jsx)(a.iP,{fullWidth:!1,onTap:({event:e})=>this.onPinFeedbackActionButtonClick(e,l,h),children:(0,s.jsx)(j.Z,{compact:!0,text:l.text})})})},p))}else if(!e&&"undefined"!=typeof window&&"windows"!==(0,C.ZP)(window)){const{bestPinImgSrc:e,pinTitle:r,pinDescription:l,pinCategory:d}=this.props;c.push((0,s.jsx)(a.xu,{children:(0,s.jsx)(P.Z,{category:d,filename:r||l,imageDownloadSuccessCallback:()=>{t&&t()},imgSrc:e,pinId:i,viewParameter:o,viewType:n,children:e=>(0,s.jsx)(a.iP,{fullWidth:!1,onTap:e,children:(0,s.jsx)(j.Z,{compact:!0,text:this.props.i18n._("Download image","Button to download Pin image","Button to download Pin image")})})})},p))}}return c}render(){const{pinFeedbackConfig:e,showSecondary:t}=this.state,{feedbackData:i,feedbackType:n,hideAdReasonsModal:o,pinId:r,onHide:l,recommendationReason:d,showAdReasons:c,viewParameter:u,viewType:p}=this.props,{description:h}=e,m=this.getRecommendationDescriptionImage();return(0,s.jsxs)(a.xu,{overflow:"hidden",width:"100%",children:[t?(0,s.jsx)(I.Z,{feedbackData:i,feedbackType:n,pinId:r,onHide:l,recommendationReason:d,viewParameter:u,viewType:p}):(0,s.jsxs)(a.xu,{children:[h&&(0,s.jsxs)(a.xu,{children:[(0,s.jsxs)(a.xu,{alignItems:"center",display:"flex",padding:4,children:[(0,s.jsx)(a.xu,{"data-pin-recommendation-reason":null==d?void 0:d.reason,maxHeight:56,overflow:"hidden",children:(0,s.jsx)(a.xv,{color:"darkGray",overflow:"normal",size:"md",children:h})}),m]}),(0,s.jsx)(a.iz,{})]}),(0,s.jsx)(a.xu,{marginBottom:3,marginTop:2,children:this.renderButtons()})]}),c&&(0,s.jsx)(w,{onDismiss:()=>o(r),pinId:r})]})}}const M=(0,N.compose)((0,o.connect)(null,(e=>({hidePinFeedback:t=>e((0,O.I1)(t)),showPinFeedback:(t,i)=>e((0,O.ZP)(t,i)),showPinFeedbackOverlay:t=>e((0,O.Ib)(t)),showPinFeedbackUndo:(t,i,n,o)=>e((0,O.NA)(t,i,n,o)),showAdReasonsModal:t=>e((0,O.b9)(t)),hideAdReasonsModal:t=>e((0,O.yj)(t))}))),L.EN)((function(e){const t=(0,u.ZP)(),{ad_targeting_attribution:i,show_ad_reasons:n=!1}=(0,o.useSelector)((({pins:t})=>t[e.pinId]));return(0,s.jsx)(Z,{...e,showAdReasons:n,adTargetingAttribution:i,i18n:t})}))},374284:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(52620),o=i(549156),r=i(174523),a=i(365217),s=i(946753),l=i(778423),d=i(549135),c=i(454217),u=i(883119),p=i(785893);function h({feedbackData:e,feedbackType:t,pinId:i,onHide:h,recommendationReason:m,viewParameter:g,viewType:f}){const _=(0,r.ZP)(),x=(0,c.ZP)({i18n:_,interpolateNamedTemplate:s.nk}),v=(n,o)=>{const r=m&&m.reason&&l.ReasonToChoose[m.reason],s=m&&(0,c.yl)(m),u=m&&(0,c.XZ)(m),{action:p,actionOptions:_}=x.getHidePinAction({feedbackData:e,feedbackType:t,pinId:i,recommendationReasonId:r,throughId:s,throughProperties:u,complaintReason:n});(e=>{(0,d.j)(101,{view:f,viewParameter:g,element:e,component:(0,c.nb)(t)})})(o),(0,a.tx)(p,_),h()},y="promoted"===t?[{text:_._("Not relevant to me","homefeed.hideReasons.reason.notRelevant","Feedback option for Pin that is not relevant"),reason:10,elementType:1296},{text:_._("Seen Pin too many times","homefeed.hideReasons.reason.seenTooMany","Feedback option for Pin that has been seen too many times"),reason:3,elementType:11172},{text:_._("Blurry or pixelated image","homefeed.hideReasons.reason.lowQualityPicture","Feedback option for Pin with low quality picture"),reason:13,elementType:10898}]:[{text:_._("Not relevant to me","homefeed.hideReasons.reason.notRelevant","Feedback option for Pin that is not relevant"),reason:10,elementType:1296},{text:_._("Not in a language I understand","homefeed.hideReasons.reason.languageDontUnderstand","Feedback option for Pin that is in a language I dont understand"),reason:15,elementType:11178},{text:_._("Seen Pin too many times","homefeed.hideReasons.reason.seenTooMany","Feedback option for Pin that has been seen too many times"),reason:3,elementType:295},{text:_._("Blurry or pixelated image","homefeed.hideReasons.reason.lowQualityPicture","Feedback option for Pin with low quality picture"),reason:13,elementType:10898},{text:_._("Other","homefeed.hideReasons.reason.other","Feedback option for Pin hidden for other reasons"),reason:8,elementType:11179}];return(0,p.jsxs)(u.xu,{overflow:"hidden",rounding:2,width:"100%",children:[(0,p.jsx)(u.xu,{paddingX:4,paddingY:4,children:(0,p.jsx)(u.xv,{color:"darkGray",size:"md",children:_._("Got a moment? Tell us why.","homefeed.hideReasons.title","Title of follow up question after negative Pin feedback")})}),(0,p.jsx)(u.iz,{}),(0,p.jsx)(u.xu,{paddingY:2,children:y.map((({text:e,reason:t,elementType:i})=>(0,p.jsx)(o.Z,{id:`hide-reason-${e.split(" ").join("-")}`,children:(0,p.jsx)(u.iP,{fullWidth:!1,onTap:()=>v(t,i),children:(0,p.jsx)(n.Z,{compact:!0,text:e})})},e)))})]})}},773788:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(667294),o=i(294184),r=i.n(o),a=i(539484),s=i(204478),l=i(174523),d=i(883119),c=i(785893);class u extends n.Component{constructor(...e){var t,i,n;super(...e),n={showBoardName:!1},(i="state")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}componentDidMount(){this.timer=setTimeout((()=>{this.setState({showBoardName:!0})}),950)}componentWillUnmount(){clearTimeout(this.timer)}render(){const{showBoardName:e}=this.state,{isDenseView:t,isNewlySaved:i,name:n,shouldUseLegoStyles:o,type:l,url:u}=this.props;if(o&&t)return null;const p="boardless"===l?this.props.i18n._("Saved to Profile","Saved.render.title","Text indicating saved to your profile"):n;let h,m;if(!i||e||o){const e=o?(0,c.jsx)(d.xv,{color:"white",size:"lg",weight:"bold",children:p.length<=20?p:(0,s.Z)(p,20)}):(0,c.jsx)(d.X6,{color:"white",size:"sm",lineClamp:1,children:p}),t=(0,a.Z)({url:u})?"nofollow":"none";h=u?(0,c.jsx)(d.rU,{rel:t,href:u,children:e}):e}else h=(0,c.jsx)(d.xv,{color:"white",children:(0,c.jsx)("span",{className:"deprecatedTextSizeXL",children:this.props.i18n._("Saved!","Indication that a pin has been saved","Indication that a pin has been saved")})});return i&&(m=e?"board":"saved"),(0,c.jsx)("div",{"data-test-id":"savedInfo",style:{paddingLeft:o?14:void 0,paddingRight:o?14:void 0},className:o?r()("Lego__SavedPin",m):r()("SavedAnimation",m),children:h})}}const p=function(e){const t=(0,l.ZP)();return(0,c.jsx)(u,{...e,i18n:t})}},488023:(e,t,i)=>{i.d(t,{Y:()=>s,Z:()=>u});var n=i(174523),o=i(549135),r=i(883119),a=i(785893);const s=["CreatorProfileStoryPinGrid","CreatorProfileActivityPinGrid"],l={component:210,view:4,viewParameter:3106},d={view:5,viewParameter:3069},c={component:13668,view:4,viewParameter:3106};function u({pinId:e,surface:t}){const i=(0,n.ZP)(),u=()=>{const e=s.includes(t)?c:"BaseBoardPinGrid"===t?d:"UserProfilePinGrid"===t?l:{};(0,o.j)(101,{element:10573,...e})},p=i._("See more stats","pinRep.actionBar.seeStatsButton","Button that will re-direct user to detailed stats page");return(0,a.jsx)(r.xu,{"data-test-id":"see-stats-button",paddingX:3,paddingY:3,children:s.includes(t)?(0,a.jsx)(r.zx,{role:"link",accessibilityLabel:i._("Go to pin stats details page","pinRep.actionBar.seeStatsButton","This button will take the user to their detailed pin stats page for the pin"),color:"semiTransparentWhite",fullWidth:!0,href:`/pin/${e}/analytics`,onClick:u,size:"sm",text:(h=p,h.length>14?`${h.substring(0,12).trim()}...`:h)}):(0,a.jsx)(r.hU,{role:"link",accessibilityLabel:i._("Go to pin stats details page","pinRep.actionBar.seeStatsButton","This icon button will take the user to their detailed pin stats page for the pin"),bgColor:"white",href:`/pin/${e}/analytics`,icon:"ads-stats",iconColor:"darkGray",onClick:u,size:"sm"})});var h}},577302:(e,t,i)=>{function n(e,t){const i=t&&t.owner&&t.owner.id;return e.isAuth&&i===e.id}i.d(t,{Z:()=>n})},398791:(e,t,i)=>{i.d(t,{ZP:()=>J});var n=i(667294),o=i(40142),r=i(963232),a=i(517458),s=i(515528);function l({isGroupBoard:e,pin:t,surface:i}){const{carousel_data:n,grid_title:o,rich_summary:r,title:l}=t,{isOwnPin:d,isPromoted:c}=(0,a.Z)(t);if(n){const{carousel_slots:e=[],index:t=0}=n;if(e[t]&&e[t].title)return e[t].title.trim()}if(c){if(s.ZF.includes(i))return o||"";if(d&&!e&&!n&&"UserProfilePinGrid"!==i)return"";const t=r&&"mobile application"!==r.type_name&&r.display_name;return l||t||o||""}return o||""}var d=i(784655);const c=["EngagementDetails","OtherProfilePinGrid","UserProfilePinGrid"];var u=i(746857),p=i(864793);const h=["CloseupRelatedProducts","ConversationView","CreatorProfileStoryPinGrid","CreatorProfileActivityPinGrid","ProductPinsFeed","UserProfilePinGrid"];function m({attributionOption:e,board:t,contentType:i,feedbackData:n,feedbackType:o,hasCarouselData:r,isGroupBoard:s,isOwnBoard:d,pin:c,showImageOnly:m,showNativeReactions:g,showPromotedShoppingPrice:f,surface:_,viewer:x,isORBACProfileManager:v,inMsgPinCardUpdateExp:y=!1}){var b;const{isPromoted:w,isSponsored:S}=(0,a.Z)(c),{promoter:P,pin_note:j}=c,T=function({attributionOption:e,feedbackType:t,isGroupBoard:i,pin:n,showImageOnly:o,surface:r,inMsgPinCardUpdateExp:a=!1}){const{is_downstream_promotion:s,native_creator:l,promoter:d,sponsorship:c}=n;if("promoted"===t||d&&!s||c)return"default";if((!a||"ConversationView"!==r)&&h.includes(r))return"none";if(i)return"none";let u="default";return e&&("image-only"===e?u="image-only-credit":"hide"===e&&(u="none")),"followed"!==t||o?["IdeasHubSeasonalRow","TodayArticleFeed","ShoppingPackageItem"].includes(r)&&"hide"===e?u:"TodayArticleFeed"===r&&"show"===e?"show-for-claimed-content":l?"default":"none":u}({attributionOption:e,feedbackType:o,isGroupBoard:s,pin:c,showImageOnly:m,surface:_,inMsgPinCardUpdateExp:y}),I=m?"":l({isGroupBoard:s,pin:c,surface:_}),C=!["ShoppingPackageItem","ShoppingSquareGridDomain","ShoppingSquareGridStorefrontDomain","ShoppingSquareGridStorefront"].includes(_)&&!w&&!m&&Boolean((0,u.Z)(c,_)),E="ShoppingWishlist"===_,k="BaseBoardPinGrid"===_&&j?null===(b=j.text)||void 0===b?void 0:b.trim():null,R=w,O="shopping"===i,A=/ShoppingSquareGridRelatedProducts/.test(_);let N=2;w?N=3:(C||"none"!==T)&&(N=O||A?2:1);let L,D,B,Z;if(O||(w&&A||f)){var M,F;const e=null===(M=c.rich_summary)||void 0===M||null===(F=M.products)||void 0===F?void 0:F[0],{offer_summary:t}=e||{};L=t?t.standard_price:void 0,D=t?t.price||t.max_price:void 0}if(O&&!w){var G,U,V;const{rating_count:e,rating_value:t,review_count:i}=(null===(G=c.rich_summary)||void 0===G?void 0:G.aggregate_rating)||{};(e||i)&&parseFloat(t)&&(B={count:e||i,rating:t}),Z=null===(U=c.rich_metadata)||void 0===U||null===(V=U.products)||void 0===V?void 0:V[0].shipping_info}const H=(0,p.rh)(c,x),z="CreatorProfileStoryPinGrid"!==_&&"CreatorProfileActivityPinGrid"!==_,W=s&&!S;return{attributionType:T,board:t,contentType:i,feedbackData:n,feedbackType:o,isDarkPromoter:!w&&!!P,pinNoteText:k,pinTitle:I,productCurrentPrice:D,productOriginalPrice:L,productRating:B,productShipping:Z,showCarouselEllipsis:r,showFavoriteButton:!v&&("BaseBoardPinGrid"===_&&d||Boolean(null==t?void 0:t.should_show_board_activity)),showGroupBoardAvatar:W,showNativeReactions:g,showOverflowMenu:R,showPinStats:H,showSource:C,showTextContent:z,showVisitSiteButton:E,titleLines:N}}var g=i(631739),f=i(30494),_=i(233088),x=i(702403),v=i(344886);const y=["ShoppingCatalogsProductsMetadata"];var b=i(577302),w=i(551687),S=i(586840);const P={BaseBoardPinGrid:"boardPinView",UserProfilePinGrid:"profilePinView"};var j=i(789875),T=i(601750),I=i(300970),C=i(215484),E=i(609304),k=i(593482);var R=i(689859),O=i(174523),A=i(767523),N=i(383722),L=i(34411),D=(i(883119),i(488023)),B=i(438280),Z=i(159276),M=i(818270),F=i(626173),G=i(778299),U=i(452963),V=i(181307),H=i(382745),z=i(855168),W=i(785893);const Y=(0,n.lazy)((()=>Promise.all([i.e(76030),i.e(19509),i.e(92982)]).then(i.bind(i,969810)))),q=["ArticleProductsStory","BoardCoverSelectablePin","BoardNoteSelectablePin","BulkEditMode","CommentReply","EngagementDetails","IdeasHubSeasonalRow","OtherProfilePinGrid","SectionSuggestedPins","SelectableBoardlessPin","TopicBestPinNarrow","TopicBestPinWide"],X=["BoardCreateUpsell","BoardCoverSelectablePin","BoardNoteSelectablePin","BoardNotePin","BulkEditMode","EngagementDetails","SectionSuggestedPins","SelectableBoardlessPin"],$=["BoardCreateUpsell","BoardCoverSelectablePin","BoardNoteSelectablePin","BoardNotePin","BulkEditMode","ConversationView","EngagementDetails","SectionSuggestedPins","SelectableBoardlessPin","ShoppingCatalogsProductsMetadata"],K=["BaseBoardPinGrid","UserProfilePinGrid",...D.Y];const J=(0,o.connect)((function({boards:{isSocialSeasonalBoard:e=!1,content:t={}},pins:i},{pin:n,pinId:o}){const r=i[o]||n,a=r.board&&r.board.id,s=(a?t[`${a}`]:void 0)||r.board;return r.grid_title=r.grid_title||n.grid_title,{board:s,isSocialSeasonalBoard:e,reduxPin:r}}),(()=>({})))((function({blockClickEvents:e,attributionOption:t,board:i,debugImpressionState:u,feedbackOptions:h,imageOnlyOption:D="default",isSocialSeasonalBoard:J,pinImageCrop:Q,pinImageFit:ee,reduxPin:te,resolution:ie="default",saveButtonOptions:ne,shouldShowFooter:oe=!0,surface:re,trackingParameters:ae,...se}){var le;const de=(0,O.ZP)(),{collaborated_by_me:ce,collaborator_count:ue,is_collaborative:pe}=i||{},{pinner:he,showFeedback:me,sponsorship:ge}=te,fe=(0,E.Z)(te),_e=(0,L.ZP)(),xe=(0,A.Z)(),ve=(0,z.TH)(),{slotIndex:ye,viewParameter:be}=ae,{anyEnabled:we}=(0,V.aq)("web_repin_flow",["AuthHomefeed","BaseBoardPinGrid"].includes(re)),Se=(0,o.useSelector)((({ui:e})=>e.views)),Pe=(0,o.useSelector)((({ui:e})=>e)),je=Pe.app?Pe.app.videosAutoplaying:{organicVideosAutoplaying:{},promotedVideosAutoplaying:{}},Te=(0,d.i8)(te.id,je),Ie=(0,o.useSelector)((({changeBoardFromToast:e})=>e))||{},Ce=(0,C.Z)(te),Ee=(0,T.Z)(te),ke=_e.isAuth&&_e.isEmployee,Re=_e.isAuth&&((0,I.Z)(null,_e)||(0,k.Z)(null,_e))&&!_e.isPartner;let Oe=Re;"TodayArticleFeed"===re&&(Oe=!1),"default"!==D&&(Oe="image-only"===D),function(e){return s.zI.includes(e)}(re)&&(Oe=!1),"ShoppingSquareGridDomainNoMetadata"===re&&(Oe=!0);let Ae=t;Re&&!Ae&&(Ae="image-only");const Ne=(0,j.Z)({feedbackOptions:h,pin:te,viewParameter:be},de),{data:Le}=h||{},De="number"==typeof ue&&ue>0||pe,Be=function(e,t){if("OtherProfilePinGrid"===t)return!0;const i=P[t];return!!i&&"dense"===e[i]}(Se,re),Ze=Boolean(De&&"BaseBoardPinGrid"===re),Me=(0,N.Z)(),Fe=(0,o.useSelector)((({users:e})=>{var t,i,n,o;return e&&e[null!==(t=null===(i=Me.data)||void 0===i?void 0:i.id)&&void 0!==t?t:""]?e[null!==(n=null===(o=Me.data)||void 0===o?void 0:o.id)&&void 0!==n?n:""]:Me.data})),Ge=(0,b.Z)(_e,i);let Ue=!1;if(!!(0,z.LX)(ve.pathname,{path:"/:username/_created/",exact:!0}))Ue=(0,Z.q6)(_e,null==Fe?void 0:Fe.id,xe);else if((0,H.am)(ve)||(0,H.OJ)(ve)){const e=i&&i.owner&&i.owner.id||"";Ue=(0,Z.q6)(_e,e,xe)}const Ve=Boolean(_e.isAuth&&he&&he.id===_e.id),He=Boolean(ce||De&&Ge),ze=_e.isAuth&&_e.isPartner,We=te.is_quick_promotable&&!["ShoppingSquareGridHomefeedBoth","ShoppingListGrid"].includes(re),Ye=(0,n.useMemo)((()=>function({board:e,isDenseView:t,isGroupBoard:i,isInlineBetterSave:n,isOwnBoard:o,isORBACProfileManager:r,isQuickPromotable:a,isRemovable:l,saveButtonOptions:d,surface:c,viewer:u,viewerIsCollaborator:p}){const h=u.isAuth?u.boardCount:void 0;let m=d||function(e=0){return 0===e?{type:"classic"}:{type:"inline"}}(h);return a?m={type:"promote"}:(p||o||["OtherProfilePinGrid","UserProfilePinGrid"].includes(c))&&"BoardlessPins"!==c&&(m={type:"classic"}),n&&(m={type:"inline",hidePinBetterSaveDropdown:"BaseBoardPinGrid"===c}),(l||y.includes(c)||r)&&(m={type:"none"}),{board:e,derivedSaveButtonOptions:m,showLikeButton:p&&i&&s.UP.includes(c),supportsReactionBar:!t}}({board:i,isInlineBetterSave:we,isDenseView:Be,isGroupBoard:Ze,isOwnBoard:Ge,isOwnPin:Ve,isORBACProfileManager:Ue,isQuickPromotable:We,isRemovable:fe,saveButtonOptions:ne,surface:re,viewer:_e,viewerIsCollaborator:He})),[i,we,Be,Ze,Ge,Ve,Ue,We,fe,ne,re,_e,He]),{isPromoted:qe}=(0,a.Z)(te),{anyEnabled:Xe}=(0,V.tc)("web_shopping_grid_metadata_ratings_shipping")({dangerouslySkipActivation:!0});let $e;["ShoppingDynamicHeightGrid","ShoppingRegularGridRelatedProductsBoth","ShoppingSquareGridRelatedProductsBoth","ShoppingSquareGridStorefront","ShoppingSquareGridStorefrontDomain","ShoppingSquareGridDomain","ShoppingSquareGridDomainNoMetadata","ShoppingWishlist","ShoppingWishlistCategories","ShoppingWishlistRecentlyViewed","ShoppingWishlistRecentlyViewedFeed","ShoppingSquareGridCrop","ShoppingSquareGridHomefeedBoth","ShoppingSquareGridRelatedProducts"].includes(re)&&!qe&&($e="white");const Ke=(0,n.useMemo)((()=>function({allowProductCarousel:e=!1,shoppingLabelColor:t,surface:i}){return{allowProductCarousel:e,allowShoppingPriceIndicator:s.Wv.includes(i),shoppingLabelColor:t}}({allowProductCarousel:Ce,shoppingLabelColor:$e,surface:re})),[Ce,$e,re]),Je=Ee,Qe=(0,n.useMemo)((()=>function({board:e,feedbackData:t,feedbackType:i,isDenseView:n,isGroupBoard:o,isOwnBoard:s,isORBACProfileManager:u,pin:p,surface:h,viewer:m}){var g;const{isOwnPin:f,isPromoted:_}=(0,a.Z)(p),x=l({isGroupBoard:o,pin:p,surface:h}),v=e&&(0,r.Z)({action:4,board:e,viewer:m})||f,y=p.savedInfo&&p.savedInfo.localPinId,b=Boolean(s&&!o||"UserProfilePinGrid"===h&&v||y),w=o&&v||b||u&&!(0,d.hy)(p),S=Boolean((null==e?void 0:e.is_collaborative)||b),P=!(_||s||o||c.includes(h)||u),j="CloseupRelatedProducts"!==h&&!u,{tracked_link:T,link:I}=p,C=!(null===(g=null!=T?T:I)||void 0===g||!g);let E=o&&n?"equally-spaced":"default",k="default";return n&&(k=o?"icon-only":"truncated-text"),n&&["UserProfilePinGrid","BaseBoardPinGrid","BoardlessPins"].includes(h)&&(k="icon-only",E="equally-spaced"),{actionBarEditBeforeShare:S,feedbackData:t,feedbackType:i,layout:E,pinTitle:x,showEditButton:w,showOverflowMenu:P,showShareButton:j,showSourceLinkButton:C,sourceLinkStyle:k}}({board:i,feedbackData:Le,feedbackType:Ne,isDenseView:Be,isGroupBoard:Ze,isOwnBoard:Ge,isORBACProfileManager:Ue,pin:te,surface:re,viewer:_e})),[i,Le,Ne,Be,Ze,Ge,Ue,te,re,_e]),et=!Ue&&(0,p.rh)(te,_e)&&K.includes(re),tt=["ShoppingCatalogsProductsMetadata","ShoppingDynamicHeightGrid","ShoppingRegularGridRelatedProductsBoth","ShoppingSquareGridCrop","ShoppingSquareGridDomain","ShoppingSquareGridDomainNoMetadata","ShoppingSquareGridHomefeedBoth","ShoppingSquareGridRelatedProductsBoth","ShoppingSquareGridRelatedProductsMetadata","ShoppingSquareGridStorefront","ShoppingSquareGridStorefrontDomain","ShoppingWishlist","ShoppingWishlistCategories","ShoppingWishlistRecentlyViewed","ShoppingWishlistRecentlyViewedFeed"].includes(re),it=!qe&&tt?"shopping":"standard",nt=(0,B.J6)(te),ot=(0,V.tc)("web_ag_msg_pin_card_update"),rt="ConversationView"===re&&ot({dangerouslySkipActivation:!0}).anyEnabled,at=(0,n.useMemo)((()=>m({attributionOption:Ae,board:i,contentType:it,feedbackData:Le,feedbackType:Ne,hasCarouselData:Ee,isGroupBoard:Ze,isOwnBoard:Ge,isORBACProfileManager:Ue,pin:te,showImageOnly:Oe,showNativeReactions:nt,showPromotedShoppingPrice:Xe&&qe&&tt,surface:re,viewer:_e,inMsgPinCardUpdateExp:rt})),[Ae,i,it,Le,Ne,Ee,Ze,Ge,Ue,qe,tt,te,Xe,Oe,nt,re,_e,rt]),st=Boolean(at.pinTitle)||at.contentType||at.userNote||at.showSource||"none"!==at.attributionType||at.showNativeReactions||at.productCurrentPrice||at.productOriginalPrice||at.showPinStats;let lt=oe&&(st||Ze);"BaseBoardPinGrid"===re&&Ge&&ze||ge?lt=!0:q.includes(re)||Be&&(Ge||ce)||J?lt=!1:Ve||"CreatorProfileStoryPinGrid"!==re&&"CreatorProfileActivityPinGrid"!==re||(lt=!1);const dt=Boolean(me),ct=(0,V.tc)("web_others_board_feed_ads_border"),ut={showNoPinBorderRadius:"TopicBestPinNarrow"===re||"TopicBestPinWide"===re||rt&&"ConversationView"===re,showPromotedPinBorderTreatment:"BaseBoardPinGrid"===re&&qe&&ct().anyEnabled,shouldUseLegoWash:!0},{anyEnabled:pt}=(0,V.aq)("hfp_homefeed_control_cta_variants"),ht={feedbackType:Ne,isHomefeedTunerVariantExp:pt},{anyEnabled:mt}=(0,V.tc)("ads_desktop_video_ads")({dangerouslySkipActivation:!0}),gt=(0,n.useMemo)((()=>function({hasCarouselData:e,isDenseView:t,isPromoted:i,isSocialSeasonalBoard:n,pinImageCrop:o,pinImageFit:r,resolution:a,showPromotedVideos:s,surface:l}){let d="backend";"CloseupRelatedProducts"===l?d={height:v.GZ,width:v.OE}:"TopicBestPinWide"===l?d={height:x.m9,width:x.BS}:"TopicBestPinNarrow"===l?d={height:x._5,width:x.A6}:["ArticleProductsStory","ShoppingSquareGridCrop","ShoppingSquareGridDomain","ShoppingSquareGridDomainNoMetadata","ShoppingSquareGridHomefeedBoth","ShoppingSquareGridRelatedProducts","ShoppingSquareGridRelatedProductsBoth","ShoppingSquareGridStorefront","ShoppingSquareGridStorefrontDomain","ShoppingWishlist","ShoppingWishlistCategories","ShoppingWishlistRecentlyViewed","ShoppingWishlistRecentlyViewedFeed"].includes(l)?d={height:v.zX,width:v.zX}:o&&(d=o);const c=["ShoppingSquareGridDomain","ShoppingSquareGridHomefeedBoth","ShoppingSquareGridRelatedProducts","ShoppingSquareGridRelatedProductsBoth","ShoppingSquareGridStorefront","ShoppingSquareGridStorefrontDomain","ShoppingWishlist","ShoppingWishlistCategories","ShoppingWishlistRecentlyViewed","ShoppingWishlistRecentlyViewedFeed"].includes(l);let u="none";"string"!=typeof d&&(u="cover",(c||"ShoppingSquareGridCrop"===l&&i||"ShoppingDynamicHeightGrid"===l&&!r||"ShoppingSquareGridDomainNoMetadata"===l)&&(u="contain"));const p=c||["ShoppingSquareGridDomainNoMetadata","ShoppingDynamicHeightGrid"].includes(l)?"transparent":"dominant",h=(0,f.e)(l);return{autoplaySettingOff:"undefined"!=typeof window&&0===_.Xb.getItem(g.Z.VIDEO_AUTOPLAY_LOCAL_STORAGE_KEY),fallbackColor:p,imageFit:u,isDenseView:t,isSocialSeasonalBoard:n,resolution:null!=a?a:"default",rootMargin:h,pinImageCrop:d,showCarousel:e&&!["ShoppingSquareGridStorefrontDomain","ShoppingSquareGridStorefront"].includes(l),showPromotedVideos:s}}({hasCarouselData:Ee,isDenseView:Be,isPromoted:qe,isSocialSeasonalBoard:J,pinImageCrop:Q,pinImageFit:ee,resolution:ie,showPromotedVideos:mt,surface:re})),[Ee,Be,qe,J,Q,ee,ie,mt,re]),ft=ke&&(0,U.F)(),_t=(0,n.useMemo)((()=>({debugImpressionState:u,slotIndex:ye})),[u,ye]);return(0,W.jsx)(w.Z,{name:"PinRepConfiguration",children:(0,W.jsx)(F.Be,{value:ae,children:(0,W.jsxs)(M.Bz,{value:{surface:re},children:[(0,W.jsx)(G.Z,{actionBarProps:Qe,blockClickEvents:e,currentlyPlayingVideo:Te,footerProps:at,forcePrimaryContentVisibility:["HomefeedMoreIdeasTabs"].includes(re)||"BoardMoreIdeasTabContent"===re,impressionsDebuggerProps:_t,obscuredPinOverlayProps:ht,pin:te,pinVisualProps:gt,presentationProps:ut,primaryContentProps:Ye,secondaryContentProps:Ke,showAccessoryContent:Je,showActionBar:!$.includes(re),showFooter:lt,showImpressionsDebugger:ft,showObscuredPinOverlay:dt,showPrimaryAndSecondaryContent:!X.includes(re),showSeeStatsButton:et,showSignalDebugger:ke,surface:re,...(0,S.Z)(se,["pinId"])}),Ie.shouldOpenModal&&Ie.newPin&&(null===(le=Ie.originalPin)||void 0===le?void 0:le.id)===te.id&&(0,W.jsx)(w.Z,{name:"SafeSuspense_PinRepConfiguration_ChangeBoardModal",children:(0,W.jsx)(R.Z,{children:(0,W.jsx)(Y,{experience:Ie.experience,newPin:Ie.newPin})})})]})})})}))},778299:(e,t,i)=>{i.d(t,{J:()=>$t,Z:()=>Kt});var n=i(667294),o=i(907669),r=i(551687),a=i(517458),s=i(689859),l=i(174523),d=i(585967),c=i(626173),u=i(100001),p=i(439887),h=i(542756);function m(e,t){const{carousel_data:i,domain:n}=e;let o=n||"";return i&&i.id&&(o=function(e,t){const i=t||e&&e.index||0,n=e&&e.carousel_slots||[],o=n[i]&&n[i].link||"";return o&&(0,h.Z)(o).hostname||""}(i,t)),o.replace("www.","")}var g=i(268648),f=i(250777),_=i(560133),x=i(855168),v=i(883119),y=i(785893);const b={container:{backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:18,height:"32px",maxWidth:"132px"},containerHovered:{backgroundColor:"rgba(255, 255, 255, 1.0)"},containerTruncated:{maxWidth:"87px"},text:{color:"#333333"}};function w({pin:e,sourceLinkStyle:t,surface:i,url:o}){const r=(0,l.ZP)(),[a,s]=(0,n.useState)(!1),{id:d}=e,h=m(e),w=(0,x.TH)(),S=(0,_.Kl)(e)||{},{slotIndex:P}=(0,c.Ep)(),j=(0,p.ZP)(e,w),T=(0,f.Z)(12,{grid_index:P,objectId:d,clientTrackingParams:j,...(0,_.Kl)(e)||{}}),I=(0,f.Z)(101,{element:162,objectId:d,clientTrackingParams:j,...(0,_.Kl)(e)||{}}),C=(0,f.Z)(8948,{click_type:"clickthrough",closeup_navigation_type:"click",grid_index:P,objectId:d,clientTrackingParams:j,...(0,_.Kl)(e)||{}}),E=()=>{T(),I(),C()},k=(0,g.Z)({href:o,target:"blank",externalData:{auxData:S,pin:e,surface:i}});return"icon-only"===t?(0,y.jsx)(v.hU,{accessibilityLabel:r._("link","Website url link","Website url link"),bgColor:"white",href:o,icon:"arrow-up-right",iconColor:"darkGray",onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),E(),k({event:e})},role:"link",rel:"nofollow",size:"sm"}):(0,y.jsx)(v.xu,{dangerouslySetInlineStyle:{__style:{...b.container,...a?b.containerHovered:Object.freeze({}),..."truncated-text"===t?b.containerTruncated:Object.freeze({})}},"data-test-id":"pinrep-source-link",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),position:"relative",children:(0,y.jsx)(u.Z,{hovered:a,pin:e,slotIndex:P,viewType:1,children:(0,y.jsx)(v.iP,{fullWidth:!1,href:o,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),E(),k({event:e})},rel:"nofollow",role:"link",rounding:4,children:(0,y.jsxs)(v.xu,{alignItems:"baseline",dangerouslySetInlineStyle:{__style:b.text},display:"flex",justifyContent:"between",children:[(0,y.jsx)(v.xu,{display:"flex",flex:"none",marginTop:3,marginBottom:3,marginStart:3,children:(0,y.jsx)(v.JO,{accessibilityLabel:r._("link","Website url link","Website url link"),color:"darkGray",icon:"arrow-up-right",size:9})}),(0,y.jsx)(v.xu,{alignItems:"center",display:"flex",height:18,marginStart:2,marginEnd:3,overflow:"hidden",children:(0,y.jsx)(v.xv,{color:"darkGray",size:"md",weight:"bold",lineClamp:1,children:h})})]})})})})}const S=(0,n.lazy)((()=>Promise.all([i.e(34496),i.e(79295),i.e(94659),i.e(48035)]).then(i.bind(i,395553)))),P=(0,n.lazy)((()=>Promise.resolve().then(i.bind(i,665035)))),j=(0,n.lazy)((()=>i.e(5035).then(i.bind(i,806841))));const T=(0,n.memo)((function({actionBarEditBeforeShare:e,feedbackData:t,feedbackType:i,layout:u,onToggleFlyout:p,pin:h,pinTitle:m,setForcePrimary:g,showEditButton:f,showOverflowMenu:_,showShareButton:x,showSourceLinkButton:b,sourceLinkStyle:T,surface:I}){var C;const E=(0,l.ZP)(),k=(0,v.JZ)(),{isRTL:R}=(0,d.B)(),{viewParameter:O,viewType:A}=(0,c.Ep)(),{carousel_data:N,id:L,savedInfo:D,tracked_link:B,link:Z}=h,M=null!==(C=null!=B?B:Z)&&void 0!==C?C:"",{isLeadPin:F}=(0,a.Z)(h),[G,U]=(0,n.useState)(f),[V,H]=(0,n.useState)(f),[z,W]=(0,n.useState)(f),Y={...R?{marginLeft:f&&_?-44:0}:{marginRight:f&&_?-44:0},transition:R?"margin-left .2s ease-in-out":"margin-right .2s ease-in-out"},q={opacity:z?1:0,transition:"opacity .2s ease-in-out",pointerEvents:"auto"},X={...R?{marginRight:V?4:0}:{marginLeft:V?4:0},transition:R?"margin-right .2s ease-in-out":"margin-left .2s ease-in-out"};(0,n.useEffect)((()=>{let e;return f&&_?(H(!0),e=setTimeout((()=>{requestAnimationFrame((()=>{U(!0),requestAnimationFrame((()=>{W(!0)}))}))}),800)):(H(f),U(f),requestAnimationFrame((()=>{W(f)}))),()=>{clearTimeout(e)}}),[f,_]);let $=null;b&&($=(0,y.jsx)(o.Z,{children:F?(0,y.jsx)(v.zx,{role:"button",accessibilityLabel:E._("Link for closeup view and sign up","[m10n] pinRep.actionBar.signup","Content for sign up link"),size:"sm",text:E._("Sign up","[m10n] pinRep.actionBar.signup","Content for sign up link")}):(0,y.jsx)(w,{pin:h,sourceLinkStyle:T,surface:I,url:M})}));const K=x&&(0,y.jsx)(r.Z,{name:"SafeSuspense_PinRep_SendShareLink",children:(0,y.jsx)(s.Z,{children:(0,y.jsx)(v.xu,{"data-test-id":"send-share-link",children:(0,y.jsx)(o.Z,{children:(0,y.jsx)(j,{pin:h,setForcePrimary:g})})})})}),J=Boolean(null==D?void 0:D.localPinId)?null==D?void 0:D.localPinId:L,Q=G&&(0,y.jsx)(r.Z,{name:"SafeSuspense_PinRep_EditButton",children:(0,y.jsx)(s.Z,{children:(0,y.jsx)(v.xu,{"data-test-id":"edit-button",dangerouslySetInlineStyle:k?void 0:{__style:q},children:(0,y.jsx)(o.Z,{children:(0,y.jsx)(S,{carouselSlotCurrentIndex:N&&N.index,component:0,onToggleModal:p,pinId:J,style:{size:"sm"},view:A,viewParameter:O,useLegoStyles:!0})})})})});return"equally-spaced"===u?(0,y.jsxs)(v.xu,{display:"flex",justifyContent:"between",alignItems:"center",padding:3,children:[(0,y.jsx)(v.xu,{dangerouslySetInlineStyle:{__style:{flexBasis:32}},children:$}),e?Q:K,e?K:Q]}):(0,y.jsxs)(v.xu,{alignItems:"center",display:"flex",padding:3,children:[(0,y.jsx)(v.xu,{flex:"shrink",children:$}),(0,y.jsx)(v.xu,{alignItems:"center",display:"flex",flex:"none",marginStart:"auto",dangerouslySetInlineStyle:k?void 0:{__style:Y},children:(0,y.jsxs)(v.kC,{alignItems:"center",gap:2,justifyContent:"end",children:[e?Q:K,e?K:Q,_&&(0,y.jsx)(r.Z,{name:"SafeSuspense_PinRep_OverflowMenu",children:(0,y.jsx)(s.Z,{children:(0,y.jsx)(v.xu,{"data-test-id":"overflow-menu-button",dangerouslySetInlineStyle:k?void 0:{__style:X},children:(0,y.jsx)(o.Z,{children:(0,y.jsx)(P,{feedbackData:t,feedbackType:i,pin:h,pinTitle:m,setForcePrimary:g})})})})})]})})]})}));var I=i(40142),C=i(224982),E=i(589444),k=i(549135);function R({direction:e,swipeHandler:t}){const i=(0,l.ZP)(),n={left:i._("View Previous","Button to advance carousel to the previous image","Button to advance carousel to the previous image"),right:i._("View Next","Button to advance carousel to the next image","Button to advance carousel to the next image")};return(0,y.jsx)(v.xu,{position:"absolute",bottom:!0,top:!0,left:"left"===e,right:"right"===e,children:(0,y.jsx)(v.iP,{fullHeight:!0,fullWidth:!0,onTap:t,children:(0,y.jsx)(v.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",padding:2,width:"100%","data-test-id":`carousel-slider-${e}`,children:(0,y.jsx)(v.JO,{accessibilityLabel:n[e],color:"white",icon:{left:"arrow-back",right:"arrow-forward"}[e]})})})})}const O=(0,I.connect)(null,(function(e){return{changeCarouselSlotIndex:(t,i)=>e((0,C.Z)(t,i))}}))((({pin:e,changeCarouselSlotIndex:t})=>{const{componentType:i,viewParameter:n,viewType:r}=(0,c.Ep)(),a=(0,E.Z)({pin:e});if(!a)return null;const{id:s=""}=e,{carousel_slots:l=[],index:d=0,id:u}=a;function p(o){return()=>{const a="left"===o?d-1:d+1;t(s,a),((t=0,o)=>{(0,k.j)(108,{objectId:s,component:i,view:r,viewParameter:n,eventData:{pinCarouselSlotEventData:{carouselSlotId:l[t]&&Number(l[t].id),carouselDataId:Number(u),carouselSlotIndex:t,toCarouselSlotIndex:o}},...(0,_.Kl)(e)||{}})})(d,a)}}return(0,y.jsxs)(v.xu,{height:"100%",position:"relative",width:"100%",children:[d>0&&(0,y.jsx)(o.Z,{children:(0,y.jsx)(R,{direction:"left",swipeHandler:p("left")})}),d<l.length-1&&(0,y.jsx)(o.Z,{children:(0,y.jsx)(R,{direction:"right",swipeHandler:p("right")})})]})}));var A=i(514560),N=i(151101);function L({avatarUrl:e,attributionNameLink:t,name:i="",onClick:n,accessibilityLabel:o,size:r=32,outline:a=!1}){const s=(0,y.jsx)(v.xu,{"data-test-id":"attribution-avatar",height:r,width:r,children:(0,y.jsx)(N.Z,{name:i,src:e,accessibilityLabel:o,outline:a})});return t?(0,y.jsx)(v.iP,{role:"link",href:t,onTap:n,children:s}):s}var D=i(181307);function B({isHover:e,attributionNameLink:t,name:i,onClick:n,regularWeight:o}){const{anyEnabled:r}=(0,D.aq)("web_disable_ads_blocker",!t);return(0,y.jsx)(v.xu,{children:(0,y.jsx)(v.xv,{underline:e,size:"md",lineClamp:1,weight:o?"normal":"bold",children:t?(0,y.jsx)(v.rU,{onClick:n,href:t,children:i}):r?(0,y.jsx)("span",{children:i}):i})})}function Z({isHover:e,link:t,onClick:i,title:n,weight:o}){return n?(0,y.jsx)(v.xv,{inline:!0,underline:e,size:"md",weight:o,children:t?(0,y.jsx)(v.rU,{onClick:i,href:t,children:n}):n}):null}var M=i(352483),F=i(234070),G=i(550242);const U=(0,I.connect)(null,(function(e){return{setMostRecentPin:t=>{e((0,G.K9)(t))}}}))((function({attributionNameLink:e,attributionTitle:t,avatarUrl:i,display:o="default",isDarkPromoter:r,isPromotedByPinCreator:s,pin:l,name:d,setMostRecentPin:u,url:p,verifiedIdentity:h,isVerifiedMerchant:m}){const{viewParameter:g,viewType:_}=(0,c.Ep)(),[x,b]=(0,n.useState)(!1),{id:w,pinner:S,sponsorship:P,story_pin_data_id:j}=l,{isPromoted:T}=(0,a.Z)(l),I=S||l.promoter,{creator:C}=P||{},{id:E}=C||{},k=!!j,R=(0,f.Z)(101,{view:3,element:T?283:27,objectId:w,component:k?230:void 0,...E?{creator_id:E,pin_id:w}:{}}),O=()=>{u(w),R()},A=()=>{b((e=>!e))},N=p&&!e,D="overlay"===o,G=(0,y.jsxs)(v.xu,{alignItems:"center",display:D?void 0:"flex",dangerouslySetInlineStyle:{__style:{marginLeft:"-3px",marginRight:"-3px"}},children:[(0,y.jsx)(v.xu,{flex:"none",dangerouslySetInlineStyle:{__style:{marginLeft:"3px",marginRight:"3px"}},display:D?"flex":void 0,justifyContent:"center",children:(0,y.jsx)(v.xu,{dangerouslySetInlineStyle:D?{__style:{marginTop:-45}}:void 0,children:(0,y.jsx)(M.Z,{avatarSize:D?64:32,isDarkPromoter:r,pinId:w,user:I,username:I&&I.username,viewParameter:g,viewType:_,children:(0,y.jsx)(L,{attributionNameLink:e,avatarUrl:i,name:d,onClick:()=>O(),accessibilityLabel:"",size:D?64:32,outline:D})})})}),(0,y.jsxs)(v.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:"3px",marginRight:"3px"}},flex:"grow",overflow:"hidden",display:D?"flex":void 0,justifyContent:"center",marginTop:D?2:void 0,children:[(0,y.jsx)(v.xu,{dangerouslySetInlineStyle:{__style:{marginBottom:"2px"}},children:(0,y.jsxs)(v.kC,{gap:1,children:[(0,y.jsx)(B,{attributionNameLink:e,name:d,onClick:()=>O(),regularWeight:!(T&&!P||s),isHover:x}),(0,y.jsx)(F.Z,{size:"sm",hasVerifiedIdentity:h,isVerifiedMerchant:m})]})}),(0,y.jsx)(Z,{isHover:x,title:t,weight:"normal"})]})]});return N?(0,y.jsx)(v.iP,{role:"link",onTap:({event:e})=>{e.stopPropagation(),O()},href:p,onMouseEnter:A,onMouseLeave:A,children:G}):G}));var V=i(479996),H=i(577302),z=i(390764),W=i(628402),Y=i(411221),q=i(34411),X=i(801500),$=i(816670),K=i(613330),J=i(648381);function Q({board:e,favoriteCount:t,favorited:i,pinId:o}){const r=(0,I.useDispatch)(),{slotIndex:a}=(0,c.Ep)(),{currentFilter:s,eligibleFilters:l,refreshData:d=(()=>{}),sectionId:u,setShowExperienceTooltip:p}=(0,J.s)(),h=(0,n.useRef)(null),m=(0,q.ZP)(),g=(0,H.Z)(m,e),f=s===$.Ac&&(!t||1===t),_=(0,X.Ej)(l,$.Ac),x=e=>{(0,k.j)(101,{component:0,element:e?12225:12226,objectId:o,view:5,viewParameter:g?3069:3070})};return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(v.xu,{ref:h,children:(0,y.jsx)(W.Z,{favorited:i,favoriteCount:t,onFavorite:()=>{x(!0),_&&d(),p&&p(!0)},onUnfavorite:()=>{x(!1),e&&f&&r((0,Y.Z)({feedId:u||e.id,feedType:u?K.DV.SECTION_PINS:K.DV.BOARD_PINS,itemIds:[o],itemType:"pin"}))},pinId:o,size:20})}),h&&!i&&!u&&0===a&&(0,y.jsx)(v.mh,{children:(0,y.jsx)(z.Z,{anchor:h.current,experienceIds:[502973],flyoutSize:312,idealDirection:"up",placementId:18,positionRelativeToAnchor:!1,showCaret:!0,textAlign:"center"})})]})}var ee=i(468966),te=i.n(ee),ie=i(529084),ne=i.n(ie),oe=i(893870),re=i.n(oe),ae=i(756169),se=i(664507),le=i.n(se),de=i(369765),ce=i.n(de),ue=i(438280);const pe={goodIdea:te(),love:re(),thanks:le(),wow:ce(),haha:ne()},he={7:"goodIdea",1:"love",13:"thanks",11:"wow",5:"haha"},me=["CreatorProfileStoryPinGrid"];const ge=function({alignment:e="start",pinId:t,pinner:i,reactionCounts:n,surface:o}){const r=(0,q.ZP)(),a=n?(0,ue.At)(n):null,s=n?(0,ue.Ud)(n):0,l=Boolean(r.isAuth&&(null==i?void 0:i.id)===r.id),d=!!a&&a.length>0&&a.map(((e,t)=>{const i=pe[he[e]];return(0,y.jsx)(v.xu,{dangerouslySetInlineStyle:{__style:{marginRight:2}},children:(0,y.jsx)(v.xu,{width:17,height:17,dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${i})`,backgroundPosiiton:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}}})},t)})),c=!!d&&(0,y.jsx)(v.iP,{role:"link",href:`/pin/${t}/`,children:(0,y.jsxs)(v.xu,{display:"flex",direction:"row",alignItems:"center",justifyContent:e,height:19,paddingY:3,children:[(0,y.jsx)(v.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",children:d}),(0,y.jsx)(v.xu,{paddingX:1,children:(0,y.jsx)(v.xv,{size:"md",children:(0,y.jsx)(ae.Z,{value:s,shortform:!0,shortformMaximumFractionDigits:1})})})]})}),u=l&&me.includes(o)&&(0,y.jsx)(v.xu,{height:24});return c||u};var fe=i(752187),_e=i(660310);function xe({feedbackType:e,pin:t}){const i=(0,l.ZP)(),{pinner:n,source_interest:o}=t,{full_name:r,username:a}=n||{},{name:s}=o||{},d="topic"===e,c=!d&&"followed"===e,u=`/${a}/`,p=(0,_e.NO)(s),h=`/search/pins/?q=${encodeURIComponent(p)}&rs=image_only_attribution`,m=d?h:u,g={topic:i._("From {topic}","attribution on pin rep","attribution on pin rep"),followed:i._("From {pinnerName}","attribution on pin rep","attribution on pin rep"),pfyBoard:i._("Picked for you","attribution on pin rep","attribution on pin rep"),pfy:i._("Picked for you","attribution on pin rep","attribution on pin rep")}[e];if(!g)return null;if(c||d){const e=0===g.indexOf("{"),t=d?s:r,i=e?g.slice(g.indexOf("}")+1):g.slice(0,g.indexOf("{"));return e?(0,y.jsxs)(v.xu,{children:[(0,y.jsx)(v.rU,{inline:!0,href:m,children:(0,y.jsx)(v.xv,{weight:"bold",inline:!0,size:"md",lineClamp:1,children:t})}),(0,y.jsx)(v.xv,{inline:!0,size:"md",children:i})]}):(0,y.jsxs)(v.xu,{children:[(0,y.jsx)(v.xv,{inline:!0,size:"md",children:i}),(0,y.jsx)(v.rU,{inline:!0,href:m,children:(0,y.jsx)(v.xv,{color:"darkGray",weight:"bold",inline:!0,size:"md",lineClamp:1,children:t})})]})}return(0,y.jsx)(v.xu,{children:(0,y.jsx)(fe.Z,{pin:t,children:(0,y.jsx)(v.xv,{color:"darkGray",overflow:"normal",size:"md",weight:"bold",children:g})})})}var ve=i(665035),ye=i(708206),be=i(484898),we=i(844870),Se=i(180307),Pe=i(622400),je=i(580849),Te=i(661966),Ie=i(215828);const Ce=({href:e,pinId:t,pin:i,location:n,auxData:o})=>{if("undefined"!=typeof window&&window.Windows)(0,we.Z)({url:e,pinId:t,pin:i,location:n,auxData:o});else{if(i&&i.is_promoted){const d=(0,p.ZP)(i,n),c=(0,Ie.nS)({url:e,pinId:t,csrId:null,clientTrackingParams:d,auxData:o});if(be.Z.isSafari()){var r;const n=je.K.fromGlobalContext(),o=new Pe.e(n,"m10n_event_conversion_measurement");let s=null!==(r=n.userAgent)&&void 0!==r&&r.browserVersion?n.userAgent.browserVersion:"0.0";var a;if(s=parseFloat(s.split(".")[0]+"."+s.split(".")[1]),void 0!==i.campaign_id&&s>=14.1&&["enabled_safari"].includes(o.getGroup(!0)))return((e,t,i)=>{const n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("target","_blank"),n.setAttribute("rel","noopener nofollow noreferrer"),n.style.cursor="pointer",n.style.display="block",n.setAttribute(Te.$N.ATTRIBUTION_SOURCE_ID,""+e%256),n.setAttribute(Te.$N.ATTRIBUTE_DESTINATION,i),n.setAttribute(Te.$N.ATTRIBUTE_ON,i),n.click()})(null!==(a=i.campaign_id)&&void 0!==a?a:0,c,e),void(0,k.j)(101,{clientTrackingParams:d,objectId:t||"",pin_id:t||"",click_measurement_ppid:i.pin_promotion_id||"",click_measurement_campaign_id:i.campaign_id||"",is_pcm:!0,page_url:e})}else if(be.Z.isChrome()){var s;const n=je.K.fromGlobalContext(),o=new Pe.e(n,"m10n_event_conversion_measurement_cr"),r=null!==(s=n.userAgent)&&void 0!==s&&s.browserVersion?parseInt(n.userAgent.browserVersion.split(".")[0],10):0;var l;if(void 0!==i.pin_promotion_id&&r>86&&["enabled"].includes(o.getGroup(!0)))return((e,t,i)=>{const n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("target","_blank"),n.setAttribute("rel","noopener nofollow noreferrer"),n.style.cursor="pointer",n.style.display="block",n.setAttribute(Te.Dl.ATTRIBUTION_SOURCE_EVENT_ID,""+e),n.setAttribute(Te.Dl.ATTRIBUTION_DESTINATION,i),n.setAttribute(Te.Dl.ATTRIBUTION_EXPIRY,""+Te.uV),n.setAttribute(Te.Dl.ATTRIBUTION_REPORT_TO,Se.Z.settings.CANONICAL_MAIN_URL),n.click()})(null!==(l=i.pin_promotion_id)&&void 0!==l?l:-1,c,e),void(0,k.j)(101,{clientTrackingParams:d,objectId:t||"",pin_id:t||"",click_measurement_ppid:i.pin_promotion_id||"",click_measurement_campaign_id:i.campaign_id||"",is_ecm:!0,page_url:e})}}(0,Ie.Gj)({url:e,pinId:t,csrId:null,clientTrackingParams:(0,p.ZP)(i,n),auxData:o})}};function Ee(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ke extends n.Component{constructor(...e){super(...e),Ee(this,"state",{spamCheck:null}),Ee(this,"spamCheckExperimentGroup",null),Ee(this,"mounted",!1),Ee(this,"handleSpammyDomainCheck",(()=>{const{location:e,pin:t,surface:i,url:n}=this.props;n&&t&&(0,Ie.$3)({location:e,pin:t,surface:i})&&(0,Ie.iw)({isMounted:this.mounted,pin:t,location:e,spamCheckCallback:e=>this.setState({spamCheck:e}),href:n})})),Ee(this,"handleClick",(e=>{const{auxData:t,location:i,onClick:n,pin:o,pinId:r,url:a}=this.props;(0,Ie.gV)({isOffsiteUrl:!0,event:e})||(e.preventDefault(),n&&n(e),a&&Ce({href:a,pinId:r,pin:o,location:i,auxData:t}))}))}componentDidMount(){this.mounted=!0,this.handleSpammyDomainCheck()}componentWillUnmount(){this.mounted=!1}componentDidUpdate(){const{spamCheck:e}=this.state;null===e&&this.handleSpammyDomainCheck()}render(){const{children:e,url:t}=this.props;return(0,y.jsx)("a",{href:t,onClick:this.handleClick,rel:"nofollow",style:{color:"inherit",textDecoration:"none",outline:"none",cursor:"pointer",display:"block"},target:null,children:e})}}const Re=(0,ye.compose)((0,I.connect)((function({pins:e},{pinId:t}){return{pin:t&&e?e[t]:void 0}}),(()=>({}))),x.EN)(ke);var Oe=i(730762);function Ae(e){if(!window||!window.prefetchCompletion||!window.prefetchCompletion[e])return"0";const{downloadedAssets:t,totalAssets:i}=window.prefetchCompletion[e];return i?(t/i*100).toFixed(3).toString():"-1"}var Ne=i(549156);function Le({children:e,componentType:t,contextLogData:i,pin:n,surface:o,viewParameter:r,viewType:a}){const s=(0,c.Ep)(),{ad_destination_url:l,carousel_data:d,id:u,link:p,tracked_link:h}=n;let m,g=l||h||p||"",f="one-tap-desktop";if(d){const{carousel_slots:e=[],id:t,index:i=0}=d;e[i]&&e[i].link&&(g=e[i].link),m={carousel_slot_id:e[i]&&e[i].id,carousel_data_id:t,carousel_slot_index:i},f+="-carousel"}return(0,y.jsx)(v.xu,{"data-test-id":"otpp",children:(0,y.jsx)(Ne.Z,{id:f,children:(0,y.jsx)(Re,{auxData:m,onClick:()=>{const e=Oe.Z.getInstance(),n=e.getViewFromContext();(0,k.j)(12,{...i,view:a||s.viewType,viewParameter:r||s.viewParameter,component:t||s.componentType,objectId:u,grid_index:s.slotIndex,pin_id:u,prefetch_percentage_complete:Ae(p||"")}),(0,k.j)(8948,{click_type:"clickthrough",closeup_navigation_type:"click",view:a||s.viewType,viewParameter:r||s.viewParameter,...i,component:t||s.componentType,objectId:u,grid_index:s.slotIndex,pin_id:u,prefetch_percentage_complete:Ae(p||"")}),(0,k.j)(13,{closeup_navigation_type:"web_closeup",objectId:u,component:t||s.componentType,view:3,...s.contextLogData,...i}),e.addViewToContext(n)},pinId:u,surface:o,url:g,children:e})})})}var De=i(586840);function Be(e){const{pin:t,surface:i}=e,{isOneTap:n,isVideo:o,isPromoted:r,isLeadPin:s}=(0,a.Z)(t),l=(0,D.tc)("web_no_tap_tap"),d=!s&&(n||o&&r&&l().anyEnabled)?Le:fe.Z;return(0,y.jsx)(d,{surface:n?i:void 0,...(0,De.Z)(e,["surface"])})}function Ze({pin:e,pinNoteText:t}){return(0,y.jsx)(Be,{pin:e,children:(0,y.jsx)(v.xv,{lineClamp:1,overflow:"normal",size:"md",children:t})})}var Me=i(864793),Fe=i(965035);function Ge({value:e,valueFormat:t}){const i=(0,l.ZP)();return e||0===e?"TIME"===t?(0,Fe.Z)(e):(0,y.jsx)(ae.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:e}):(0,y.jsx)(v.u,{idealDirection:"up",text:i._("This stat is not available yet","closeup.partnerAnalytics.unavailableStat","when data for this field has not populated yet"),children:"â€”"})}function Ue({pin:e}){const t=(0,l.ZP)(),{isStoryPin:i,isVideo:n}=(0,a.Z)(e),o=function(e){const{aggregated_pin_data:t,creator_analytics:i}=e,{creator_analytics:n}=t||{},{isStoryPin:o}=(0,a.Z)(e);return!i||!o&&n?n:i}(e),r=(0,Me.ZP)(n,i,t),s=n||i?null==o?void 0:o.all_time_realtime:null==o?void 0:o["30d_realtime"];return(0,y.jsx)(v.kC,{alignItems:"stretch",justifyContent:"start",children:r.map((({align:e,displayText:t,field:i,iconType:n,iconSize:o=12,valueFormat:r})=>(0,y.jsxs)(v.xu,{alignItems:"center",column:4,display:"flex",justifyContent:e,children:[(0,y.jsx)(v.xu,{display:"inlineBlock",marginEnd:1,children:(0,y.jsx)(v.JO,{accessibilityLabel:t,color:"darkGray",icon:n,size:o})}),(0,y.jsx)(v.xv,{inline:!0,size:"md",children:(0,y.jsx)(Ge,{value:null==s?void 0:s[i],valueFormat:r})})]},i)))})}function Ve({currentPrice:e,originalPrice:t,pin:i,surface:n}){const o=t&&t!==e;return(0,y.jsx)(Be,{pin:i,surface:n,children:(0,y.jsxs)(v.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",children:[e&&(0,y.jsx)(v.xv,{color:o?"blue":"darkGray",size:"md",weight:"bold",children:e}),o&&(0,y.jsx)(v.xu,{dangerouslySetInlineStyle:{__style:{textDecoration:"line-through",textDecorationColor:"#767676"}},marginStart:1,children:(0,y.jsx)(v.xv,{color:"gray",size:"md",weight:"bold",children:t})})]})})}var He=i(537343),ze=i(746857);function We({pin:e,surface:t}){return(0,y.jsx)(Be,{pin:e,surface:t,children:(0,y.jsx)(v.kC,{alignItems:"stretch",justifyContent:"start",children:(0,y.jsx)(v.xv,{color:"darkGray",lineClamp:1,overflow:"normal",size:"md",weight:"normal",children:(0,ze.Z)(e,t)})})})}var Ye=i(11200);function qe({numberOfLines:e=2,pin:t,pinTitle:i,surface:n}){return(0,y.jsx)(v.xv,{color:"darkGray",lineClamp:e,size:"md",weight:"bold",children:(0,y.jsx)(Be,{pin:t,surface:n,children:i})})}var Xe=i(335529);const $e={container:{padding:"8px 6px 16px"},productContainer:{padding:"12px 6px 16px"},imageOnlyAttribution:{hidden:{opacity:0,transition:`opacity ${Xe.X}ms ease`},visible:{opacity:1}}};function Ke({attributionType:e,board:t,feedbackData:i,feedbackType:o,hasTextContent:r,hasTitleOrSource:s,hoverTransitionState:d,isDarkPromoter:c,pin:u,pinNoteText:p,pinTitle:h,productCurrentPrice:m,productOriginalPrice:g,setForcePrimary:_,showCarouselEllipsis:x,showFavoriteButton:b,showGroupBoardAvatar:w,showNativeReactions:S,showOverflowMenu:P,showPinStats:j,showSource:T,showTextContent:C,surface:E,titleLines:k}){var R,O,A,N;const B=(0,l.ZP)(),M=(0,I.useDispatch)(),{favorited_by_me:F,favorite_user_count:G,id:H,pinner:z,reaction_counts:W,sponsorship:Y,story_pin_data:q}=u,{has_affiliate_products:X}=q||{},$=function(e,t,i){var n,o,r,s;const{board:l,link_domain:d={},promoter:c,sponsorship:u,native_creator:p}=e,{sponsor:h}=u||{},{isPromoted:m}=(0,a.Z)(e),{official_user:g}=d||{},f=m&&!!u&&(null==p?void 0:p.id)!==(null==c?void 0:c.id),_=e.pinner||{};let x="",v="",y="",b="",w="",S="",P=!1,j=!1;var T,I,C,E,k,R;if(f)x=null!==(T=null!==(I=null==p?void 0:p.image_medium_url)&&void 0!==I?I:null==p?void 0:p.image_small_url)&&void 0!==T?T:"",v=`/${null!==(C=null==p?void 0:p.username)&&void 0!==C?C:""}/`,y=null==c?void 0:c.full_name,b=null==p?void 0:p.full_name,S=`/${null!==(E=null==p?void 0:p.username)&&void 0!==E?E:""}/`,w=`/${null!==(k=null==c?void 0:c.username)&&void 0!==k?k:""}/`,P=null==p||null===(R=p.verified_identity)||void 0===R?void 0:R.verified,j=null==p?void 0:p.is_verified_merchant;else if(m&&c)x=c.image_medium_url||c.image_small_url,y=c.full_name,b=i._("Promoted by","indicating the username of the person who promoted the pin","indicating the username of the person who promoted the pin"),S=`/${c.username}/`;else if(u&&null!=h&&h.username){var O,A,N,L,D,B;x=null!==(O=null!==(A=null!==(N=null==p?void 0:p.image_large_url)&&void 0!==N?N:null==p?void 0:p.image_medium_url)&&void 0!==A?A:null==p?void 0:p.image_small_url)&&void 0!==O?O:"",v=`/${null!==(L=null==p?void 0:p.username)&&void 0!==L?L:""}/`,y=h.full_name,b=null==p?void 0:p.full_name,S=`/${null!==(D=null==p?void 0:p.username)&&void 0!==D?D:""}/`,w=`/${h.username}/`,P=null==p||null===(B=p.verified_identity)||void 0===B?void 0:B.verified,j=null==p?void 0:p.is_verified_merchant}else if(p){var Z,M,F,G,U;x=null!==(Z=null!==(M=null!==(F=p.image_large_url)&&void 0!==F?F:p.image_medium_url)&&void 0!==M?M:p.image_small_url)&&void 0!==Z?Z:"",b=p.full_name,S=`/${null!==(G=p.username)&&void 0!==G?G:""}/`,P=null===(U=p.verified_identity)||void 0===U?void 0:U.verified,j=p.is_verified_merchant}else if("show-for-claimed-content"===t){var V,H,z,W;null!=g&&g.is_primary_website_verified&&g.username&&(x=null!==(V=null!==(H=null!==(z=g.image_large_url)&&void 0!==z?z:g.image_medium_url)&&void 0!==H?H:g.image_small_url)&&void 0!==V?V:"",b=g.full_name,S=`/${g.username}/`,P=null===(W=g.verified_identity)||void 0===W?void 0:W.verified,j=g.is_verified_merchant)}else{var Y,q,X,$;x=null!==(Y=null!==(q=null!==(X=_.image_large_url)&&void 0!==X?X:_.image_medium_url)&&void 0!==q?q:_.image_small_url)&&void 0!==Y?Y:"",v=`/${_.username}/`,b=_.full_name,S=l?l.url:"",P=null===($=_.verified_identity)||void 0===$?void 0:$.verified,j=_.is_verified_merchant}return{avatarUrl:null!==(n=x)&&void 0!==n?n:"",attributionNameLink:v,attributionTitle:null!==(o=y)&&void 0!==o?o:"",name:null!==(r=b)&&void 0!==r?r:"",sponsorUrl:w,url:null!==(s=S)&&void 0!==s?s:"",verifiedIdentity:!!P,isVerifiedMerchant:!!j}}(u,e,B),{avatarUrl:K,attributionNameLink:J,attributionTitle:ee,name:te,sponsorUrl:ie,url:ne,verifiedIdentity:oe,isVerifiedMerchant:re}=$,ae=!!u.promoter&&!u.is_downstream_promotion,se=ae&&(null===(R=u.native_creator)||void 0===R?void 0:R.id)===(null===(O=u.promoter)||void 0===O?void 0:O.id),le=(0,f.Z)(101,{view:3,element:27,pin_id:H,objectId:H,component:u.story_pin_data_id?230:void 0,...null!=Y&&null!==(A=Y.creator)&&void 0!==A&&A.id&&null!==(N=Y.sponsor)&&void 0!==N&&N.id?{creator_id:Y.creator.id,sponsor_id:Y.sponsor.id}:{}}),de=e=>M(de(e)),ce=(0,D.tc)("web_search_ideapin_module"),ue=!!u.story_pin_data_id&&"SearchItem"===E&&ce().anyEnabled,pe=(0,D.tc)("web_ag_msg_pin_card_update"),he="ConversationView"===E&&pe({dangerouslySkipActivation:!0}).anyEnabled,me=!se&&Y?(0,y.jsx)(Z,{link:ie||ne,onClick:()=>(de(H),void le()),title:(0,He.ZP)(ee,20),weight:"bold"},`${u.id}-sponsor-name-link`):null,fe="ConversationView"===E&&he?{padding:"8px"}:$e.container;return(0,y.jsxs)(v.xu,{dangerouslySetInlineStyle:{__style:fe},children:[x&&(0,y.jsx)(v.xu,{dangerouslySetInlineStyle:{__style:s||w||"none"!==e?{marginBottom:"6px"}:{}},display:"flex",justifyContent:"center",children:(0,y.jsx)(V.default,{pinId:H})}),j&&(0,y.jsx)(v.xu,{dangerouslySetInlineStyle:{__style:{marginBottom:"6px"}},flex:"grow",width:"100%",children:(0,y.jsx)(Ue,{pin:u})}),(0,y.jsx)(v.kC,{alignItems:"stretch",justifyContent:"start",children:(0,y.jsxs)(v.xu,{flex:"grow",children:[(!!Y||X&&!ae)&&!se&&(0,y.jsx)(v.xu,{marginBottom:1,children:(0,y.jsx)(v.xu,{flex:"grow",overflow:"hidden",children:(0,y.jsx)(Ye.Z,{hasAffiliateProducts:X,isPromoted:ae,sponsorName:me,sponsorshipStatus:null==Y?void 0:Y.status})})}),(C&&r||b)&&(0,y.jsxs)(v.xu,{marginBottom:1,children:[(g||m)&&(0,y.jsx)(v.xu,{marginBottom:1,children:(0,y.jsx)(Ve,{currentPrice:m,originalPrice:g,pin:u,surface:E})}),b?(0,y.jsxs)(v.kC,{alignItems:"start",children:[(0,y.jsx)(v.kC,{flex:"grow",children:(0,y.jsx)(qe,{numberOfLines:k,pin:u,pinTitle:h,surface:E})}),(0,y.jsx)(v.xu,{marginStart:3,children:(0,y.jsx)(Q,{board:t,favorited:!!F,favoriteCount:null!=t&&t.should_show_board_activity?null!=G?G:0:void 0,pinId:H})})]}):!ue&&(0,y.jsx)(qe,{numberOfLines:k,pin:u,pinTitle:h,surface:E}),T&&(0,y.jsx)(v.xu,{marginBottom:2,children:(0,y.jsx)(We,{pin:u,surface:E})})]}),(0,y.jsxs)(v.kC,{alignItems:"center",justifyContent:"start",children:[(0,y.jsx)(v.xu,{flex:"grow",children:(()=>{const t=(0,y.jsx)(U,{attributionNameLink:J,attributionTitle:ae&&!Y||se?ee:"",avatarUrl:K,isDarkPromoter:!!c,isPromotedByPinCreator:!!se,verifiedIdentity:ue&&oe,isVerifiedMerchant:ue&&re,name:te,pin:u,url:ne,display:ue?"overlay":"default"});if(ue)return t;switch(e){case"none":return null;case"image-only-credit":return(0,y.jsx)(v.xu,{dangerouslySetInlineStyle:{__style:$e.imageOnlyAttribution["active"===d?"visible":"hidden"]},children:(0,y.jsx)(xe,{pin:u,feedbackType:o})});default:return Object.values($).some((e=>Boolean(e)))?t:null}})()}),P&&(0,y.jsx)(v.xu,{flex:"none",children:(0,y.jsx)(ve.default,{feedbackData:i,feedbackType:o,pin:u,pinTitle:h,setForcePrimary:_,transparentBackground:!0})})]}),S&&!!W&&(0,y.jsx)(v.xu,{marginTop:"ConversationView"===E&&he?2:void 0,children:(0,y.jsx)(ge,{pinId:H,pinner:z,reactionCounts:W,surface:E,alignment:ue?"center":void 0})}),p&&(0,y.jsx)(v.xu,{marginBottom:1,children:(0,y.jsx)(Ze,{pin:u,pinNoteText:p})}),w&&!b&&(0,y.jsx)(v.xu,{alignItems:"center",display:"flex",marginTop:1,marginBottom:1,children:!b&&(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(L,{attributionNameLink:J,avatarUrl:K,name:te}),(0,y.jsx)(v.xu,{marginStart:2,flex:"grow",children:(0,y.jsx)(v.xv,{size:"md",children:te})})]})})]})})]})}var Je=i(539484),Qe=i(278646);const et=(0,n.lazy)((()=>i.e(33168).then(i.bind(i,950057)))),tt=(0,n.lazy)((()=>i.e(69221).then(i.bind(i,379575))));function it({contentType:e,hasTextContent:t,pin:i,pinTitle:o,productCurrentPrice:a,productOriginalPrice:d,productRating:c,productShipping:u,showSource:p,showVisitSiteButton:h,surface:m,titleLines:g}){var f;const x=(0,l.ZP)(),b=(0,D.tc)("web_shopping_grid_metadata_ratings_shipping"),{anyEnabled:w,group:S}=b({dangerouslySkipActivation:!0}),P=null===(f=i.rich_summary)||void 0===f?void 0:f.url;"shopping"!==e||S.includes("pwt")||b();const j=(0,Je.Z)({url:P})?"nofollow":"none";return(0,y.jsx)(v.xu,{dangerouslySetInlineStyle:{__style:$e.productContainer},height:"100%",children:(0,y.jsx)(v.kC,{direction:"column",flex:"grow",height:"100%",justifyContent:"between",children:t&&(0,y.jsxs)(n.Fragment,{children:[(0,y.jsxs)(v.xu,{children:[(d||a)&&(0,y.jsx)(v.xu,{marginBottom:1,children:(0,y.jsx)(Ve,{currentPrice:a,originalPrice:d,pin:i,surface:m})}),(0,_.qN)(i)&&(0,y.jsx)(r.Z,{name:"SafeSuspense_PinRepFooter_OutOfStock",children:(0,y.jsx)(s.Z,{children:(0,y.jsx)(v.xu,{marginBottom:1,children:(0,y.jsx)(et,{})})})}),(0,_.SP)(i)&&(0,y.jsx)(r.Z,{name:"SafeSuspense_PinRepFooter_StaleProduct",children:(0,y.jsx)(s.Z,{children:(0,y.jsx)(v.xu,{marginBottom:1,children:(0,y.jsx)(tt,{})})})}),(0,y.jsx)(v.xu,{marginBottom:1,children:(0,y.jsx)(qe,{numberOfLines:g,pin:i,pinTitle:o,surface:m})}),p&&(0,y.jsx)(We,{pin:i,surface:m}),"shopping"===e&&w&&(c||Number.isFinite(null==u?void 0:u.free_shipping_value))&&(0,y.jsx)(Qe.L,{count:null==c?void 0:c.count,countFormat:"number",ratingValue:null==c?void 0:c.rating,shippingInfo:u})]}),h&&P?(0,y.jsx)(v.xu,{marginTop:2,children:(0,y.jsx)(v.zx,{role:"link",fullWidth:!0,href:P,rel:j,onClick:()=>{(0,k.j)(12,{view:1,viewParameter:3563})},target:"blank",text:x._("Visit site","Wishlist.Pin.CTA.Button.VisitSite.Text","Text on CTA button on Wishlist Pin to Visit Site")})}):null]})})})}const nt=(0,n.memo)((function({attributionType:e,blockClickEvents:t,board:i,contentType:n,feedbackData:r,feedbackType:a,hoverTransitionState:s,isDarkPromoter:l,pin:d,pinNoteText:c,pinTitle:u,productCurrentPrice:p,productOriginalPrice:h,productRating:m,productShipping:g,setForcePrimary:f,showCarouselEllipsis:_,showFavoriteButton:x,showGroupBoardAvatar:b,showNativeReactions:w,showOverflowMenu:S,showPinStats:P,showSource:j,showTextContent:T,showVisitSiteButton:I,surface:C,titleLines:E}){const k=u||j,R="shopping"===n?(0,y.jsx)(it,{contentType:n,hasTextContent:!!k,pin:d,pinTitle:u,productCurrentPrice:p,productOriginalPrice:h,productRating:m,productShipping:g,showSource:j,showVisitSiteButton:I,surface:C,titleLines:E}):(0,y.jsx)(Ke,{attributionType:e,board:i,feedbackData:r,feedbackType:a,hasTextContent:!!k,hasTitleOrSource:!!k,hoverTransitionState:s,isDarkPromoter:l,pin:d,pinNoteText:c,pinTitle:u,productCurrentPrice:p,productOriginalPrice:h,setForcePrimary:f,showCarouselEllipsis:_,showFavoriteButton:x,showGroupBoardAvatar:b,showNativeReactions:w,showOverflowMenu:S,showPinStats:P,showSource:j,showTextContent:T,surface:C,titleLines:E});return t?(0,y.jsx)(v.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},children:R}):(0,y.jsx)(v.kC,{flex:"grow",children:(0,y.jsx)(o.Z,{fullWidth:!0,children:R})})}));var ot=i(773788),rt=i(269307);const at=(0,n.lazy)((()=>i.e(34979).then(i.bind(i,479818)))),st=(0,n.lazy)((()=>Promise.all([i.e(34496),i.e(79295),i.e(94659),i.e(45062),i.e(43473)]).then(i.bind(i,845680)))),lt=(0,n.lazy)((()=>Promise.all([i.e(34496),i.e(79295),i.e(94659),i.e(45062),i.e(22347)]).then(i.bind(i,912836)))),dt=(0,n.lazy)((()=>Promise.all([i.e(76030),i.e(22538)]).then(i.bind(i,23945)))),ct=(0,n.lazy)((()=>i.e(1593).then(i.bind(i,34399))));function ut({derivedSaveButtonOptions:e,forcePrimaryContent:t,showEnabledSaveBehavior:i,onToggleFlyout:a,onToggleModal:l,pin:d}){const{id:u,savedInfo:p}=d,h=(0,n.useRef)(!!p),m=(0,I.useSelector)((({experiences:e})=>{const t=e.eligibleExperiences[1000294];return 502450===(null==t?void 0:t.experience_id)?t:null})),{saveBehaviorType:g}=(0,rt.tY)(i);void 0!==g&&["classic","controlled","inline"].includes(e.type)&&(e=g);const{viewParameter:_,viewType:x}=(0,c.Ep)(),b=(0,f.Z)(101,{element:0,objectId:u});let w=null;const S={onToggleModal:a,view:x,viewParameter:_,useLegoStyles:!0};if(!e.hidePinBetterSaveDropdown&&(m||i&&["classic","controlled"].includes(e.type))&&["classic","controlled","inline"].includes(e.type)){const{renderPinSaveTooltip:n}=e;w=(0,y.jsx)(r.Z,{name:"SafeSuspense_PinRepPrimaryContent_QuickSaveButton",children:(0,y.jsx)(s.Z,{children:(0,y.jsx)(o.Z,{children:(0,y.jsx)(dt,{experience:m||void 0,forcePrimaryContent:t,pin:d,renderPinSaveTooltip:n,showEnabledSaveBehavior:i,viewParameter:_})})})})}else if("classic"===e.type||"controlled"===e.type){const{renderPinSaveTooltip:t}=e;w=(0,y.jsx)(r.Z,{name:"SafeSuspense_PinRepPrimaryContent_PinSaveButton",children:(0,y.jsx)(s.Z,{children:(0,y.jsx)(v.xu,{"data-test-id":"pin-save-button",maxWidth:"100%",children:(0,y.jsx)(o.Z,{children:(0,y.jsx)(st,{onClickCallback:b,onToggleModal:l,oneTapSave:"controlled"===e.type?e:void 0,pin:d,renderPinSaveTooltip:t,renderSavedStatus:()=>!!p&&(0,y.jsx)(o.Z,{children:(0,y.jsx)(ot.Z,{isNewlySaved:!h.current,name:p.title,type:p.type,url:p.url})}),variant:"lego",viewParameter:_})})})})})}else if("inline"===e.type){const t=d,{initialSelection:i,onSave:n,renderPinSaveTooltip:c,hidePinBetterSaveDropdown:u}=e;w=(0,y.jsx)(r.Z,{name:"SafeSuspense_PinRepPrimaryContent_PinBetterSave",children:(0,y.jsx)(s.Z,{children:(0,y.jsx)(v.xu,{"data-test-id":"better-save",children:(0,y.jsx)(o.Z,{children:(0,y.jsx)(lt,{initialSelection:i,onSave:n,onToggleFlyout:a,onToggleModal:l,pin:t,renderPinSaveTooltip:c,renderSavedStatus:({savedInfo:e})=>e&&(0,y.jsx)(o.Z,{children:(0,y.jsx)(ot.Z,{isNewlySaved:!h.current,name:e.title,type:e.type,url:e.url,shouldUseLegoStyles:!0})}),variant:"pin",viewParameter:_,hideDropdown:u})})})})})}else"persistentOneClickSave"===e.type?w=(0,y.jsx)(r.Z,{name:"SafeSuspense_PinRepPrimaryContent_PersistentOneClickSave",children:(0,y.jsx)(s.Z,{children:(0,y.jsx)(v.xu,{"data-test-id":"persistent-one-click-save",children:(0,y.jsx)(o.Z,{children:(0,y.jsx)(at,{...S,saveOptions:e,pin:d})})})})}):"promote"===e.type&&(w=(0,y.jsx)(v.kC,{alignItems:"stretch",justifyContent:"end",children:(0,y.jsx)(r.Z,{name:"SafeSuspense_PinRepPrimaryContent_PinPromoteButton",children:(0,y.jsx)(s.Z,{children:(0,y.jsx)(v.xu,{"data-test-id":"pin-promote-button",children:(0,y.jsx)(o.Z,{children:(0,y.jsx)(ct,{pin:d})})})})})}));return(0,y.jsx)(r.Z,{name:"PinRepPrimaryContent",children:(0,y.jsx)(v.xu,{display:"flex",margin:3,children:w&&(0,y.jsx)(v.xu,{marginStart:"auto",flex:"grow",children:w})})})}var pt=i(299485),ht=i(505812),mt=i(329485),gt=i(771400),ft=i(344573);const _t={__style:{boxShadow:"inset 0 0 0 2px black,  inset 0 0 0 4px white",transition:"all 300ms ease"}};function xt({isSelected:e}){const t=(0,l.ZP)();return(0,y.jsx)(v.xu,{bottom:!0,left:!0,position:"absolute",right:!0,rounding:4,top:!0,dangerouslySetInlineStyle:e?_t:{},children:(0,y.jsx)(v.xu,{position:"absolute",bottom:!0,right:!0,padding:3,children:(0,y.jsx)(v.xu,{alignItems:"center",color:e?"darkGray":"white",display:"flex",height:"24px",justifyContent:"center",rounding:2,width:"24px",dangerouslySetInlineStyle:{__style:{transition:"all 300ms ease"}},children:(0,y.jsx)(v.JO,{accessibilityLabel:t._("Pin is selected to be saved","SectionSuggestionPin.iconOnPin.selectedPin","accessibility label on an icon"),color:"white",icon:"check",size:12})})})})}var vt=i(639387),yt=i(925854),bt=i(80078),wt=i(711874),St=i(852474),Pt=i(731164);const jt={},Tt=e=>{Pt.Z.increment("web_prefetch_via_xhr.attempt",1);const t=(0,h.Z)(e);return new Promise(((i,n)=>{if(window.navigator&&window.navigator.connection){const e=window.navigator.connection;e.saveData&&(Pt.Z.increment("web_prefetch_via_xhr.saveDataOn",1),i()),/2g/.test(e.effectiveType)&&(Pt.Z.increment("web_prefetch_via_xhr.poorConnection",1),i())}const o=new XMLHttpRequest;o.open("GET",e),o.onload=()=>{200===o.status?(jt[e]&&(jt[e].loaded=!0),Pt.Z.increment("web_prefetch_via_xhr.load.success",1,{hostname:t.hostname||"unknown"}),i(o.response)):(Pt.Z.increment("web_prefetch_via_xhr.load.error",1,{hostname:t.hostname||"unknown"}),n())},jt[e]||(o.send(),jt[e]={added:!0,xhr:o},Pt.Z.increment("web_prefetch_via_xhr.xhrSent",1,{hostname:t.hostname||"unknown"}))}))},It={},Ct=(e,t)=>{const i="string"==typeof e?e:e.url;if(t&&i){const e="control"===t?"v1.pinimg.com":"v2.pinimg.com";return i.replace("v.pinimg.com",e)}return i};function Et(e,t){return(Ct("https://v.pinimg.com/videos/mc/hls/",t)||"")+`${e.slice(0,2)}/${e.slice(2,4)}/${e.slice(4,6)}/${e}`}function kt(e){const{id:t}=e;t&&It[t]&&It[t].length>0&&It[t].forEach((e=>{(e=>{jt[e]&&jt[e].xhr&&!jt[e].loaded&&(Pt.Z.increment("web_prefetch_abort_xhr",1),jt[e].xhr.abort(),jt[e].aborted=!0)})(e)}))}function Rt({autoplaySettingOff:e,blockClickEvents:t,fallbackColor:i,imageFit:o,isHovering:r,isSocialSeasonalBoard:s=!1,onError:l,onLoad:d,pin:p,pinImageCrop:h,resolution:m="default",rootMargin:g,selectionState:f,showCarousel:_,showPromotedVideos:x,surface:b}){const{contextLogData:w,slotIndex:S,viewParameter:P,viewType:j}=(0,c.Ep)(),{group:T}=(0,D.aq)("web_prefetch_video_in_feed"),{id:I="",aggregated_pin_data:C,image_signature:E,story_pin_data:k}=p,{pin_tags_chips:R}=C||{},{isOneTap:O,isVideo:A,isPromoted:N,isGif:L}=(0,a.Z)(p),{cropHeight:B,cropWidth:Z}=(e=>"string"==typeof e?{cropHeight:0,cropWidth:0}:{cropHeight:e.height,cropWidth:e.width})(h);let M=null;if(e||!A||!x&&N)if(_)M=(0,y.jsx)(v.xu,{"data-test-id":"pinrep-carousel",children:(0,y.jsx)(mt.Z,{cropHeight:B,cropWidth:Z,onError:l,onLoad:d,highResOnly:"high-res"===m,lowResOnly:"low-res"===m,pinId:I,showCarouselBadge:!1,pin:p})});else{const e="backend"===h?function({images:e,image_crop:t}){var i;const n=e&&(null===(i=e["236x"])||void 0===i?void 0:i.height);if(t&&(0!==t.min_y||1!==t.max_y)){const{min_y:e=0,max_y:i=0}=t;return{marginTop:(e>0?-1*e*(null!=n?n:0):0)+"px",marginBottom:`${i<1?Math.round(-1*(1-i)*(null!=n?n:0)):0}px`}}return{}}(p):{};M=(0,y.jsx)(v.xu,{dangerouslySetInlineStyle:{__style:e},"data-test-id":"pinrep-image",minHeight:55,children:(0,y.jsx)(gt.ZP,{animateGif:L&&s,cropHeight:B,cropWidth:Z,fallbackColor:i,imageFit:o,highResOnly:"high-res"===m,lowResOnly:"low-res"===m,mediumResOnly:"medium-res"===m,onLoad:d,onError:l,pin:p})})}else M=(0,y.jsx)(v.xu,{"data-test-id":"pinrep-video",direction:"column",display:"flex",height:B||void 0,justifyContent:"center",children:(0,y.jsx)(ft.Z,{cropHeight:B,rootMargin:g,inAdsDesktopVideoExperiment:A&&x,pin:p,surface:b,onLoad:d,viewType:j,viewParameter:P,highResOnly:"high-res"===m,lowResOnly:"low-res"===m,onError:l,isExperimentalPinRep:!0})});const F=(0,y.jsx)(v.zd,{wash:!0,children:(0,y.jsx)(u.Z,{hovered:r,pin:p,slotIndex:S,viewType:1,children:M})}),G=["selected-image-only","deselected-image-only"].includes(f),U="selected-image-only"===f,V=(0,n.useRef)(!0),H=(0,n.useRef)(!1),z=(0,n.useRef)(!1),W=(0,D.aq)("web_video_quic").group;if((0,n.useEffect)((()=>{V.current||!r||O||t||H.current?r||!H.current||z.current||(kt(k||p),z.current=!0):k?(!function(e,t){var i;const{id:n,pages:o,pages_preview:r}=e;if(!r&&!o)return;const a=r?r[0]:null==o?void 0:o[0],s=null==a||null===(i=a.blocks)||void 0===i?void 0:i.find((e=>3===e.block_type));if(s&&s.video){const{hlsv3:e,mp4:i}=(0,St.ZP)(s.video)||{},o=i||e;if(o&&n){var l;const e=null!==(l=Ct(o,t))&&void 0!==l?l:"";It[n]=It[n]?It[n].concat(e):[e],Tt(e)}}}(k,W),H.current=!0):(!function(e,t){const{id:i,videos:n}=e,{video_list:o}=n||{},r=(0,vt.Z)({pin:e}),{video:a}=(0,yt.Z)(r)||{},{hls:s,hlsv3:l,mp4:d}=a||{};if(o){const e=(0,St.t2)(o)||{},n=l||s||{},r=je.K.fromGlobalContext().experiments.v2GetGroup("web_mp4_video_closeup")||"",a=n.duration||(null==d?void 0:d.duration)||null;if(a&&(0,wt.F)(r,a)&&r.startsWith("enabled")&&e.url){var c;const n=null!==(c=Ct(e.url,t))&&void 0!==c?c:"";Tt(n),It[i]=It[i]?It[i].concat(n):[n]}else if(n.url){var u;const e=null!==(u=Ct(n.url,t))&&void 0!==u?u:"";It[i]=It[i]?It[i].concat(e):[e],Tt(e).then((e=>{let n=[];if("string"==typeof e&&(n=e.split("\n").filter((e=>e.endsWith(".m3u8")))),n&&n[bt.VS]){const e=Et(n[bt.VS],t);return It[i]=It[i].concat(e),Tt(null!=e?e:"")}return null})).then((e=>{let n=[];if("string"==typeof e&&(n=e.split("\n").filter((e=>e.endsWith(".ts")))),n&&n[0]){const e=Et(n[0],t);return It[i]=It[i].concat(e),Tt(null!=e?e:"")}return null}))}}}(p,W),H.current=!0),V.current=!1}),[t,r,O,k,p,T,W]),t)return(0,y.jsxs)(n.Fragment,{children:[F,G&&(0,y.jsx)(xt,{isSelected:U}),R&&(0,y.jsx)(v.xu,{dangerouslySetInlineStyle:{__style:{marginTop:1}},children:(0,y.jsx)(ht.Z,{pin:p,enableCloseupLink:!0})})]});const{commerce_data:Y}=w||{},q=["RelatedProductsExploreTab","RelatedProductsFeed"].includes(b);return(0,y.jsxs)(Be,{contextLogData:{grid_index:S,image_signature:E,commerce_data:q?Y:void 0},elementType:35,pin:p,surface:b,children:[F,R&&(0,y.jsx)(v.xu,{dangerouslySetInlineStyle:{__style:{marginTop:1}},children:(0,y.jsx)(ht.Z,{pin:p,enableCloseupLink:!1})})]})}var Ot=i(488023),At=i(255539),Nt=i(998864);const Lt=At.Z.makeSendShareButton((({handleSendShareFlyoutButtonClick:e})=>{const t=(0,l.ZP)(),i=(0,Nt.Z)();return(0,y.jsx)(v.zx,{fullWidth:!0,onClick:i((({event:t})=>{t&&t.stopPropagation&&t.stopPropagation(),e()})),text:t._("Send","Send a pin","Send a pin"),color:"gray",accessibilityLabel:t._("Send","Accessible label to send a pin","Accessible label to send a pin")})}));var Dt=i(777158);var Bt=i(452963),Zt=i(818026),Mt=i(546352),Ft=i(7713),Gt=i(451875);const Ut="#000000",Vt="#ffffff";function Ht({selected:e=!1}){const t=(0,l.ZP)(),{isRTL:i}=(0,d.B)();return(0,y.jsx)(v.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,zIndex:new v.Ry(1),dangerouslySetInlineStyle:{__style:{borderWidth:"3px",borderStyle:"solid",borderColor:e?Ut:Vt,borderRadius:Gt.Oc,boxShadow:"inset 0 0 0 3px #fff"}},children:e?(0,y.jsx)(v.xu,{position:"absolute",bottom:!0,right:!i,left:i,display:"flex",alignItems:"center",justifyContent:"center",margin:3,rounding:2,height:24,width:24,color:"darkGray",children:(0,y.jsx)(v.JO,{accessibilityLabel:t._("Check icon","pinRepSelectionBorder.checkIcon","Accessibility label for check icon on selected Pin"),icon:"check",color:"white",size:12})}):(0,y.jsx)(v.xu,{right:!i,left:i,position:"absolute",top:!0,margin:3,children:(0,y.jsx)(v.JO,{accessibilityLabel:t._("Handle icon","pinRepSelectionBorder.handleIcon","Accessibility label for handle icon on an organizable Pin"),icon:"handle",color:"white",size:24})})})}const zt={wrapper:{borderRadius:Gt.Oc,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},promotedPinBorderTreatment:{background:"#EFEFEF",padding:4,borderRadius:20},primaryContentContainer:{marginBottom:"auto"},visualOverlay:{backgroundColor:Gt.Dv.VISUAL},savedOverlay:{backgroundColor:Gt.Dv.SAVED},legoWashOverlay:{backgroundColor:Gt.Dv.LEGO_WASH}};function Wt({children:e,savedOverlayVisibility:t="none",visualOverlayVisibility:i="none",handleMouseOverPinContent:n,handleMouseLeavePinContent:o,primaryContent:r,primaryContentVisibility:a="none",secondaryContent:s,secondaryContentVisibility:l="none",accessoryContent:d,accessoryContentVisibility:c="none",actionBar:u,actionBarVisibility:p="none",seeStatsButton:h,footer:m,selectionState:g="no-selection",debugContent:f,signalDebuggerContent:_,signalDebuggerV2Content:x,signalDebuggerV2ContentVisibility:b="none",obscuredPinOverlay:w,showNoPinBorderRadius:S,showPromotedPinBorderTreatment:P,shouldUseLegoWash:j}){return(0,y.jsx)(v.xu,{dangerouslySetInlineStyle:{__style:P?zt.promotedPinBorderTreatment:{}},height:"100%",children:(0,y.jsxs)(v.xu,{dangerouslySetInlineStyle:{__style:S?{}:zt.wrapper},"data-test-id":"pinWrapper",display:"flex",direction:"column",height:"100%",overflow:"hidden",position:"relative",children:[["selected","deselected"].includes(g)&&(0,y.jsx)(Ht,{selected:"selected"===g}),(0,y.jsxs)(v.xu,{dangerouslySetInlineStyle:{__style:S?{}:zt.wrapper},overflow:"hidden",position:"relative",onFocus:n,onBlur:o,onMouseEnter:n,onMouseLeave:o,children:[e,(0,y.jsx)(Ft.Z,{visibility:i,children:(0,y.jsx)(Mt.Z,{additionalStyles:j?zt.legoWashOverlay:zt.visualOverlay})}),(0,y.jsx)(Ft.Z,{visibility:t,children:(0,y.jsx)(Mt.Z,{additionalStyles:j?zt.legoWashOverlay:zt.savedOverlay})}),d&&(0,y.jsx)(Ft.Z,{visibility:c,children:(0,y.jsx)(Mt.Z,{children:d})}),s&&(0,y.jsx)(Ft.Z,{visibility:l,children:(0,y.jsx)(Mt.Z,{children:s})}),r&&(0,y.jsx)(Ft.Z,{visibility:a,children:(0,y.jsx)(Mt.Z,{children:r})}),x&&(0,y.jsx)(Ft.Z,{visibility:b,children:(0,y.jsx)(Mt.Z,{children:(0,y.jsx)(v.xu,{position:"absolute",left:!0,bottom:!0,marginBottom:12,marginStart:2,children:x})})}),u&&(0,y.jsx)(Ft.Z,{visibility:p,children:(0,y.jsx)(Mt.Z,{children:(0,y.jsx)(v.xu,{position:"absolute",left:!0,right:!0,bottom:!0,children:u})})}),h&&(0,y.jsx)(Mt.Z,{children:(0,y.jsx)(v.xu,{position:"absolute",left:!0,bottom:!0,children:h})}),f&&(0,y.jsx)(Mt.Z,{children:f}),_]}),m,w&&(0,y.jsx)(v.xu,{children:w})]})})}var Yt=i(515528);function qt(e){return"active"===e?"visible":"inactive"===e?"none":"hidden"}function Xt(...e){return e.includes("visible")?"visible":e.includes("hidden")?"hidden":"none"}const $t=228;const Kt=(0,n.memo)((function({actionBarProps:e,blockClickEvents:t,borderStyle:i,currentlyPlayingVideo:a,disableHover:s=!1,footerProps:l,forcePrimaryContentVisibility:d,impressionsDebuggerProps:u,onError:p,onLoad:h,obscuredPinOverlayProps:m,pin:g,pinVisualProps:f,presentationProps:_,primaryContentProps:x,rounding:b,selectionState:w,secondaryContentProps:S,showAccessoryContent:P,showActionBar:j,showFooter:I,showImpressionsDebugger:C,showSeeStatsButton:E,showSignalDebugger:k,showObscuredPinOverlay:R,showPrimaryAndSecondaryContent:N,surface:L}){const{savedInfo:B}=g,{viewType:Z}=(0,c.Ep)(),{showEnabledSaveBehavior:M}=(0,rt.Yh)(Yt.ZF.includes(L)||Yt.zI.includes(L)),[F,G]=(0,n.useState)(!1),U=(0,Xe.Z)(F);let{isHovering:V,hoverTransitionState:H,handleMouseOver:z,handleMouseLeave:W}=function(){const[e,t]=(0,n.useState)(!1);return{isHovering:e,hoverTransitionState:(0,Xe.Z)(e,0,Xe.X),handleMouseOver:(0,n.useCallback)((()=>t(!0)),[t]),handleMouseLeave:(0,n.useCallback)((()=>t(!1)),[t])}}();s&&(V=!1,H="inactive");const Y=(0,Xe.Z)(!!B),q=qt(Y),X=qt(H),$=qt(H),K=qt(U),J=qt(Y),Q=["HomefeedMoreIdeasTabs","BoardMoreIdeasTabContent"].includes(L),ee="visible"!==q||Q?q:"none",te={primaryContentVisibility:Xt($,K,"visible"===J?"none":J),secondaryContentVisibility:(ie=Xt($,K,J),"none"===ie?"visible":"visible"===ie?"none":"hidden"),actionBarVisibility:Xt($,K),accessoryContentVisibility:"none",signalDebuggerV2ContentVisibility:"visible"};var ie;const ne=e=>G(e),oe=e=>G(e),re=e=>{G(e),e||W()};let ae=null;d&&(te.primaryContentVisibility="visible"),"none"!==te.primaryContentVisibility&&N&&(ae=(0,y.jsx)(ut,{forcePrimaryContent:ne,showEnabledSaveBehavior:M,onToggleFlyout:oe,onToggleModal:re,pin:g,...x}));let se=null;const le=(0,n.useRef)(!0),de=le.current;le.current=!1;const ce=function(e,t){const{carousel_data:i}=e,{index:o}=i||{},[r,a]=(0,n.useState)(!i||t),s=(0,n.useRef)(o),l=(0,n.useRef)(null);if(i){const e=s.current;s.current=o,(o!==e||t)&&(l.current&&clearTimeout(l.current),a(!0),l.current=setTimeout((()=>{a(!1),l.current=null}),4e3))}return(0,n.useEffect)((()=>()=>{l.current&&clearTimeout(l.current)}),[]),r}(g,de),ue=qt((0,Xe.Z)(ce));te.secondaryContentVisibility=function(...e){return e.includes("none")?"none":e.includes("hidden")?"hidden":"visible"}(te.secondaryContentVisibility,ue),se=(S.allowShoppingPriceIndicator||S.shoppingLabelColor||"none"!==te.secondaryContentVisibility)&&N&&!a&&(0,y.jsx)(v.xu,{margin:2,children:(0,y.jsx)(pt.Z,{pin:g,...S})});let pe=null;P&&(pe=(0,y.jsx)(O,{pin:g}),te.accessoryContentVisibility=qt(H)),f.isSocialSeasonalBoard&&(e.showShareButton=!1);let he=null;E&&(e.showSourceLinkButton=!1,he=(0,y.jsx)(o.Z,{children:(0,y.jsx)(Ot.Z,{pinId:g.id,surface:L})}));const me=j?(0,y.jsx)(T,{onToggleFlyout:oe,pin:g,setForcePrimary:G,surface:L,...e}):null;let ge=null;I&&(ge=(0,y.jsx)(nt,{blockClickEvents:t,hoverTransitionState:"image-only-credit"===l.attributionType?H:null,pin:g,setForcePrimary:G,surface:L,...l})),f.isSocialSeasonalBoard&&(ge=(0,y.jsx)(v.xu,{"data-test-id":"social-seasonal-footer",marginTop:2,marginBottom:3,width:"100%",children:(0,y.jsx)(v.xu,{margin:"auto",width:$t,children:(0,y.jsx)(Lt,{isFlyoutOpen:F,onFlyoutDismiss:()=>oe(!F),onToggleFlyout:()=>oe(!F),pinId:g.id,sendType:"pin",shownWithinMasonry:!0,viewType:Z})})}));const fe=C&&(0,y.jsx)(Bt.Z,{...u}),_e=k&&g.debug_info_html&&(0,y.jsx)(v.xu,{paddingY:1,children:(0,y.jsx)("pre",{children:g.debug_info_html})}),xe=(0,y.jsx)(A.Z,{pin:g}),ve=(0,n.useRef)();"header-only"===(0,Dt.Z)(ve)&&(te.actionBarVisibility="none",te.accessoryContentVisibility="none");const ye=R?(0,y.jsx)(Zt.ZP,{pin:g,...m}):null,be="ShoppingWishlist"===L?{height:"100%"}:{},we=(0,D.tc)("web_ag_msg_pin_card_update"),Se="ConversationView"===L&&we({dangerouslySkipActivation:!0}).anyEnabled,Pe=(0,D.tc)("web_creator_attr_hover_overlay"),je=I&&"default"===l.attributionType&&Yt.ZF.includes(L),Te=!g.is_promoted&&!s&&je,Ie=Te&&Pe({dangerouslySkipActivation:!0}).anyEnabled;return Te&&(ge=(0,y.jsx)(v.xu,{onMouseEnter:Pe,onFocus:Pe,children:ge})),(0,y.jsx)(r.Z,{name:"PinRepContainer",children:(0,y.jsx)(v.xu,{"data-test-id":"pin","data-test-pin-id":g.id,onFocus:Ie?()=>{}:z,onBlur:Ie?()=>{}:W,onMouseEnter:Ie?()=>{}:z,onMouseLeave:Ie?()=>{}:W,dangerouslySetInlineStyle:{__style:be},rounding:Se&&"ConversationView"===L?b:void 0,borderStyle:Se&&"ConversationView"===L?i:"none",overflow:Se&&"ConversationView"===L?"hidden":"visible",children:(0,y.jsx)(Wt,{visualOverlayVisibility:X,savedOverlayVisibility:ee,handleMouseOverPinContent:Ie?z:()=>{},handleMouseLeavePinContent:Ie?W:()=>{},primaryContent:ae,primaryContentVisibility:te.primaryContentVisibility,secondaryContent:se,secondaryContentVisibility:te.secondaryContentVisibility,accessoryContent:pe,accessoryContentVisibility:te.accessoryContentVisibility,actionBar:me,actionBarVisibility:te.actionBarVisibility,seeStatsButton:he,footer:ge,selectionState:w,debugContent:fe,signalDebuggerV2Content:xe,signalDebuggerV2ContentVisibility:te.signalDebuggerV2ContentVisibility,signalDebuggerContent:_e,obscuredPinOverlay:ye,..._,children:(0,y.jsx)(v.xu,{height:"100%",ref:ve,children:(0,y.jsx)(Rt,{blockClickEvents:t,isHovering:V,onError:p,onLoad:h,pin:g,surface:L,selectionState:w,...f})})})})})}))},451875:(e,t,i)=>{i.d(t,{Oc:()=>n,mv:()=>o,Dv:()=>r});const n=16,o=4,r={SAVED:"rgba(0, 0, 0, 0.33)",VISUAL:"rgba(0, 0, 0, 0.1)",LEGO_WASH:"rgba(0, 0, 0, 0.4)"}},789875:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(454217),o=i(946753);function r({feedbackOptions:e,pin:t,viewParameter:i},r){const{board:a,pinner:s}=t,{getFeedbackType:l}=(0,n.ZP)({i18n:r,interpolateNamedTemplate:o.nk});return l({board:a,feedback:e,pin:t,pinner:s,viewParameter:i})}},519922:(e,t,i)=>{function n(e,t){return e&&e[t]&&e[t].url}i.d(t,{Z:()=>n})},746857:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(517458),o=i(560133);function r(e,t){const{isProduct:i}=(0,n.Z)(e);return(i||"ShoppingWishlist"===t&&(0,o.Uz)(e))&&(0,o.QY)(e)||""}},438280:(e,t,i)=>{function n(e){const t=Object.keys(e);if(t.length>0){return t.sort(((t,i)=>e[i]-e[t])).slice(0,3)}return null}function o(e){const t=Object.values(e);if(t.length>0){return t.reduce(((e,t)=>e+t),0)}return 0}function r(e){const{videos:t,is_downstream_promotion:i,is_promoted:n,story_pin_data_id:o,board:r}=e;return!(n||i||(!t||!t.id)&&!o||null!=r&&r.is_collaborative&&r.collaborated_by_me)}i.d(t,{At:()=>n,Ud:()=>o,J6:()=>r})},255539:(e,t,i)=>{i.d(t,{Z:()=>g});var n=i(667294),o=i(415339),r=i(204891),a=i(451190),s=i(237574),l=i(549135),d=i(998864),c=i(883119),u=i(785893);function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const h=new c.Ry(1),m=({children:e})=>e((0,d.Z)({shouldStopEventPropagation:!1}));class g extends n.Component{constructor(...e){super(...e),p(this,"handleDismiss",(()=>{const{onFlyoutDismiss:e}=this.props;e()})),p(this,"onHide",(()=>{this.props.onClick(),this.handleDismiss()})),p(this,"flyoutProps",(()=>{const{gridDescription:e,idealDirection:t,imageSrc:i,pinId:n,userId:a,board:l,sendType:d,url:c,fullName:p,profileUrl:h,viewParameter:m,viewType:g,onExternalSend:f,showCaret:_,todayArticle:x}=this.props;let v={description:e,id:n,imageUrl:i,name:"",type:s.d.PIN,url:`/pin/${n}/`},y=s.d.PIN;switch(d){case"user":v={description:e,id:a,imageUrl:i,name:p,type:s.d.PINNER,url:h},y=s.d.USER;break;case"board":v=l&&{description:l.description,id:l.id,imageUrl:l.imageUrl,name:l.name,type:s.d.BOARD,url:l.url},y=s.d.BOARD;break;case"today_article":v=x&&{description:x.subtitle||"",id:x.id,imageUrl:i,name:x.title,type:s.d.TODAY_ARTICLE,url:(0,r.bz)(x)},y=s.d.TODAY_ARTICLE;break;case"search":v={...v,type:s.d.SEARCH,url:c},y=s.d.SEARCH}const b={isFlyout:!0,onHide:this.onHide,onExternalSend:f,sendType:y,sharedObject:v,viewParameter:m,viewType:g};return{anchor:this.flyoutAnchor,idealDirection:t,onDismiss:this.handleDismiss,showCaret:_,children:(0,u.jsx)(o.default,{...b})}}))}static makeSendShareButton(e){return t=>(0,u.jsx)(this,{ref:t.shareButtonRef,Subject:e,...t})}toggle(){const{isOwnProfile:e,onToggleFlyout:t,sendType:i,userId:n}=this.props;"user"===i&&(0,l.j)(101,{component:13675,element:1079,objectId:n,view:4,viewParameter:e?3106:3107}),t()}render(){const{Subject:e,inModal:t,isFlyoutOpen:i,shownWithinMasonry:n,shownWithinProfileHeader:o}=this.props,{anchor:r,idealDirection:s,onDismiss:l,showCaret:d,children:p}=this.flyoutProps();return(0,u.jsxs)(c.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},children:[(0,u.jsx)(c.xu,{ref:e=>{e&&(this.flyoutAnchor=e)},children:(0,u.jsx)(m,{children:t=>(0,u.jsx)(e,{handleSendShareFlyoutButtonClick:t((e=>{null!=e&&e.stopPropagation&&e.stopPropagation(),this.toggle()})),...this.props})})}),i&&(n||o?(0,u.jsx)(c.mh,{zIndex:o?h:void 0,children:(0,u.jsx)(c.xu,{zIndex:t?a.b:void 0,position:t?"absolute":void 0,top:!!t||void 0,children:(0,u.jsx)(c.J2,{anchor:r,idealDirection:s,onDismiss:l,showCaret:d,size:"xl",positionRelativeToAnchor:!1,children:p})})}):(0,u.jsx)(c.J2,{anchor:r,idealDirection:s,onDismiss:l,showCaret:d,size:"xl",children:p}))]})}}p(g,"defaultProps",{idealDirection:"down",onClick:()=>{}})},11200:(e,t,i)=>{i.d(t,{j:()=>l,Z:()=>d});var n=i(174523),o=i(883119),r=i(181307),a=i(946753),s=i(785893);const l=[0,2,3];function d({hasAffiliateProducts:e,isPromoted:t,sponsorName:i,sponsorshipStatus:d,textWeight:c}){const u=(0,n.ZP)(),p=(0,r.tc)("mweb_web_android_ios_clbc_eu_ad_string")().anyEnabled;let h;t?h=(0,a.nk)(u._("Promoted by {{ name }}","sponsorship.sponsorshipText.promotedByBrand","indicating the username of the person who promoted the pin"),{name:i}):d||0===d?h=i&&!l.includes(d)?(0,a.nk)(u._("Paid partnership with {{ name }}","closeup.creator.sponsoredPinTitle","Subtext of closeup creator card when sponsored by a brand"),{name:i}):u._("Paid partnership","closeup.creator.sponsoredPinTitle","Subtext of closeup creator card when the pin is sponsored but the sponsorship status is rejected/requested/unaffiliated"):e&&(h=u._("Includes sponsored products","sponsorship.sponsorshipText.affiliatedProducts","Subtext of pincard attribution for a pin with affiliated products"));const m=p&&!t?"Ad â€¢ ":"";return(0,s.jsxs)(o.xv,{inline:!0,size:"md",weight:c,children:[m,h]})}},533127:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(176082),o=i(785893);function r({accessibilityLabel:e,handleClick:t,icon:i,iconColor:r,isSVG:a,iconOnly:s}){return(0,o.jsx)(n.ZP,{accessibilityLabel:e,color:r,onClick:t,icon:i,isSVG:a,iconOnly:s})}},773808:(e,t,i)=>{i.d(t,{Z:()=>o});const n={WebkitMaskImage:"-webkit-radial-gradient(white, black)"};function o({isSideBySide:e,isPadded:t}){return e?{...n,borderRadius:t?"16px":"32px 0 0 32px"}:{...n,borderRadius:t?"16px":"32px 32px 0 0"}}},79267:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(785893);const r=({children:e})=>(0,o.jsx)(n.xu,{display:"flex",justifyContent:"center",height:"100%",width:"100%",padding:5,children:e})},711874:(e,t,i)=>{i.d(t,{Z:()=>N,F:()=>O});var n=i(667294),o=i(40142),r=i(877039),a=i(233949),s=i(647560),l=i(32529),d=i(784655),c=i(785893);function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const p=(0,r.Z)(s.ZP);class h extends n.Component{constructor(...e){super(...e),u(this,"handleVisibilityChanged",(e=>{const{pinId:t,isPromoted:i,setCurrentVideo:n,pauseAutoplay:o,videosAutoplaying:r,videoStartTime:a}=this.props,s=(0,d.i8)(t,r);e&&!s?n({pinId:t,isPromoted:!!i,currentTime:a}):!e&&s&&o({pinId:t,isPromoted:!!i,currentTime:this.currentVideoCurrentTime})})),u(this,"handleVideoTimeChange",(e=>{const{pinId:t,videosAutoplaying:i}=this.props;(0,d.i8)(t,i)&&(this.currentVideoCurrentTime=e.time)}))}componentDidUpdate(e){const{appInFocus:t}=e,{appInFocus:i,pauseAutoplay:n,pinId:o,isPromoted:r,setCurrentVideo:a,videosAutoplaying:s}=this.props,l=(0,d.i8)(o,s),c=(0,d.X9)(o,s);this.currentVideoCurrentTime=null!=c?c:this.currentVideoCurrentTime,i!==t&&!i&&l?(this.pausedDueToBrowserOutOfFocus=!0,n({pinId:o,isPromoted:!!r,currentTime:this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&i&&(this.pausedDueToBrowserOutOfFocus=!1,a({pinId:o,isPromoted:!!r,currentTime:this.currentVideoCurrentTime}))}componentWillUnmount(){const{pinId:e,isPromoted:t,pauseAutoplay:i}=this.props;i({pinId:e,isPromoted:!!t,currentTime:this.currentVideoCurrentTime})}render(){const{setCurrentVideo:e,pauseAutoplay:t,videoStartTime:i,videosAutoplaying:n,...o}=this.props;return(0,c.jsx)(a.KS,{name:"ads_desktop_video_ads",activate:!1,children:({anyEnabled:e})=>(0,c.jsx)(p,{inAdsDesktopVideoExperiment:e,onTimeChange:this.handleVideoTimeChange,onVisibilityChanged:this.handleVisibilityChanged,trackFullVisible:!e,...o})})}}const m=(0,o.connect)(((e,t)=>{const{pinId:i,isPromoted:n}=t,o=e.ui.app?e.ui.app.videosAutoplaying:{organicVideosAutoplaying:{},promotedVideosAutoplaying:{}},{organicVideosAutoplaying:r,promotedVideosAutoplaying:a}=o,s=n?a[i]:r[i];return{appInFocus:e.ui.app.appInFocus,videosAutoplaying:o,videoStartTime:s?s.currentTime:null}}),((e,t)=>({pauseAutoplay:t=>e((0,l.Dm)(t)),setCurrentVideo:t=>e((0,l.jt)(t))})))(h);var g=i(631739),f=i(907669),_=i(551687),x=i(865791),v=i(96975),y=i(639387),b=i(925854),w=i(79267),S=i(211194),P=i(689859),j=i(883119),T=i(852474),I=i(857354),C=i(233088),E=i(181307),k=i(35764);const R=(0,n.lazy)((()=>i.e(87122).then(i.bind(i,674327)))),O=(e,t)=>!!(e.includes("below_15")&&t>=0&&t<=15e3)||(!!(e.includes("15_to_30")&&t>15e3&&t<=3e4)||(!!(e.includes("30_to_45")&&t>3e4&&t<=45e3)||(!!(e.includes("45_to_60")&&t>45e3&&t<=6e4)||!!(e.includes("above_60")&&t>6e4)))),A=({children:e,name:t})=>(0,c.jsx)(j.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":`experimental-closeup-image-overlay-layer-${t}`,left:!0,position:"absolute",right:!0,top:!0,children:e}),N=({closeupIsFirstPageInHistoryStack:e,imageContainerRef:t,isWideVideo:i,pin:n,shouldPadImage:o,flyoutShareProps:r})=>{const a=(0,y.Z)({pin:n}),{embed:s}=(0,x.Z)(a)||{},{video:l}=(0,b.Z)(a)||{},{hls:d={},hlsv3:u={},mp4:p={}}=l||{},h=d.duration||u.duration||p.duration||null,{group:N}=(0,E.tc)("web_mp4_video_closeup")({dangerouslySkipActivation:!0}),L=!!h&&O(N,h),D=(0,E.tc)("web_mp4_video_closeup"),B=L&&D().anyEnabled,{videos:Z}=n,{video_list:M={}}=Z||{};if(B){const e=(0,T.t2)(M);e&&(l.mp4=e)}const F=s&&"gif"===s.type,{image564x:G={}}=(0,I.Ip)((0,v.Z)(a))||{},U=F?s.src:G.url,V=!!n.promoter&&!n.is_downstream_promotion,H=V&&!n.is_eligible_for_web_closeup,{access:z}=n||{},W=!!z&&z.includes("tag"),Y=k.Gg-k.d2,q=o?{maxWidth:{maxWidth:Y},minWidth:{minWidth:Y},height:{},borderRadius:16}:{},X="undefined"!=typeof window&&0===C.Xb.getItem(g.Z.VIDEO_AUTOPLAY_LOCAL_STORAGE_KEY),$=(0,c.jsxs)(S.Z,{isVideo:!0,isWideVideo:i,shouldPadImage:o,styleOverrides:q,variant:"default",children:[(0,c.jsx)(j.xu,{width:"100%",ref:t,children:(0,c.jsx)(m,{showControls:!0,autoplay:!X,customThumbnail:U,flyoutShareProps:r,isPromoted:V,loop:H,muted:e,preferMp4:B,pinId:n.id,video:l,variant:"default"})}),W&&(0,c.jsx)(A,{name:"tag-button",children:(0,c.jsx)(_.Z,{name:"SafeSuspense_VideoContent_CloseupTagButton",children:(0,c.jsx)(P.Z,{children:(0,c.jsx)(f.Z,{children:(0,c.jsx)(R,{pin:n})})})})})]});return o?(0,c.jsx)(w.Z,{children:$}):$}},998035:(e,t,i)=>{i.d(t,{SR:()=>r,Nc:()=>a,o:()=>s,dZ:()=>l,$l:()=>d,nU:()=>c,Lb:()=>u,bm:()=>p,IS:()=>h,NE:()=>m});i(639387),i(925854);var n=i(616240),o=i(784655);function r(e){var t;return(null===(t=e.closeup_attribution)||void 0===t?void 0:t.id)||null}function a(e){var t,i;return!(0,o.iR)(e.videos)&&!(0,o.hy)(e)&&0!==Object.keys((null===(t=e.aggregated_pin_data)||void 0===t||null===(i=t.creator_analytics)||void 0===i?void 0:i["30d_realtime"])||{}).length}function s(e){var t;return 0!==Object.keys((null===(t=e.creator_analytics)||void 0===t?void 0:t["30d_realtime"])||{}).length}function l(e){var t,i;return!(null===(t=e.creator_analytics)||void 0===t||null===(i=t["30d_realtime"])||void 0===i||!i.is_realtime)}function d(e){const t=e.aggregated_pin_data||{};return t.is_shop_the_look||t.is_stela}function c(e){const{native_creator:t,pinner:i,domain:n}=e;return(e.link_user_website&&e.link_user_website.official_user||e.link_domain&&e.link_domain.official_user||!!e.third_party_pin_owner||!!i&&i.domain_verified&&i.domain_url===n)&&!e.is_promoted||t}function u(e){if(!e.story_pin_data_id)return;const{story_pin_data:{metadata:t,pages:i=[]}={}}=e;return{metadata:t,detailsPage:i[1]}}const p=({viewer:e,pin:t})=>(0,n.su)(e)&&t.is_quick_promotable_by_pinner;function h(e){var t;return e.story_pin_data_id&&(null===(t=e.themes)||void 0===t?void 0:t.length)>0?e.themes[0]:null}function m({carouselInfo:e,closePanelWidth:t,isWideVideo:i,isShortImage:n,naturalWidth:o,showCloseupContentRight:r}){return!(i||!r)&&(!!n||!e&&o<t)}},558892:(e,t,i)=>{i.d(t,{YO:()=>a,Nb:()=>s,Of:()=>l,x4:()=>c,ZP:()=>u});var n=i(667294),o=i(583704),r=i(35764);const a=({showPdp:e,isLargerPane:t,showCloseupContentRight:i})=>e&&t?i?r.Uj:r.zT:1,s=(0,o.qe)((({paneWidth:e,pdpCarouselSlotToPaneRatio:t,showCloseupContentRight:i,showPdp:n,updateCloseupBodyContainerHeight:o,viewportSize:r,maxWidth:a})=>({paneWidth:e,pdpCarouselSlotToPaneRatio:t,showCloseupContentRight:i,showPdp:n,updateCloseupBodyContainerHeight:o,viewportSize:r,maxWidth:a}))),l={showCloseupContentRight:!0,showPdp:!1,updateCloseupBodyContainerHeight:()=>{},viewportSize:"lg",paneWidth:{pdp:r.CI,regular:r.Gg},pdpCarouselSlotToPaneRatio:1,maxWidth:{pdp:r.Kn,regular:r.u6}},d=(0,n.createContext)(l);function c(){const e=(0,n.useContext)(d);if(!e)throw new Error("useCloseupContext must be used within CloseupContextProvider");return e}const u=d},136686:(e,t,i)=>{i.d(t,{zc:()=>n,Bu:()=>o,Mg:()=>r,_z:()=>a,pM:()=>s});const n="story_pin",o="closefakemodal",r="button",a="video",s="image"},35764:(e,t,i)=>{i.d(t,{Gg:()=>n,u6:()=>o,CI:()=>r,Kn:()=>a,Ch:()=>s,Gb:()=>l,Uj:()=>d,zT:()=>c,d2:()=>u,Ie:()=>p,KP:()=>h,JV:()=>m,bx:()=>g,g9:()=>f,CC:()=>_,a7:()=>x,iB:()=>v});const n=508,o=2*n,r=488,a=992,s=672,l=1176,d=.6,c=.84,u=40,p=72,h=740,m=60,g=912,f=32,_=60,x=40,v={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"}},211194:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(773808),o=i(883119),r=i(558892),a=i(35764),s=i(785893);function l({children:e,isVideo:t=!1,isWideVideo:i,shouldPadImage:l,styleOverrides:d={},variant:c}){var u,p,h;const{showCloseupContentRight:m,showPdp:g,viewportSize:f,paneWidth:{pdp:_,regular:x}}=(0,r.x4)(),v="default"===c;if(!(m&&"lg"===f||v||i))return(0,s.jsx)(o.xu,{children:e});const y=g?_:x,b=(0,n.Z)({isSideBySide:m&&!i,isPadded:l}),w=i?a.KP:y,S=i?0:6,P=i?a.KP:496,j=(null===(u=d.height)||void 0===u?void 0:u.height)||"100%",T=(null===(p=d.maxWidth)||void 0===p?void 0:p.maxWidth)||w,I=(null===(h=d.minWidth)||void 0===h?void 0:h.minWidth)||y;return(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{borderRadius:d.borderRadius||b.borderRadius,WebkitMaskImage:"-webkit-radial-gradient(white, black)",...l&&t?{overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)"}:{}}},display:v?"flex":void 0,flex:v&&i?"grow":void 0,height:v?j:void 0,justifyContent:v?"center":void 0,marginBottom:v?void 0:6,marginEnd:v?void 0:S,maxWidth:v?T:P,minWidth:v?I:344,rounding:v?void 0:2,children:e})}},595657:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(439887),o=i(584489);function r(e,t){const i=o.Z.instance;let r;if(i){const o=i.getState();if(o.pins&&e){const i=o.pins[e],a=o.location;if(null!=t&&t.shouldTrackForPrevLocation){const e=(null==i?void 0:i.tracking_params_map)||{},t=Object.keys(e).find((e=>"PinResource"!==e));i&&(r=t?e[t]:e.PinResource)}else i&&(r=(0,n.ZP)(i,a))}}return r}},132718:(e,t,i)=>{function n(e){if(e&&e.pin){const t=e.pin.rich_metadata;if(t)return t.products?144:t.article?141:t.recipe?145:139;if(e.pin.story_pin_data)return 157}return 140}i.d(t,{Z:()=>n})},865791:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(0,i(279224).Z)((e=>{const{embed:t}=e.pin,{type:i,src:n,subtype:o}=t||{};return n?{...e,embed:{type:i,src:n,subtype:o}}:null}))},925854:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(279224),o=i(979593);const r=(0,n.Z)((e=>{const{videos:t}=e.pin,{id:i,video_list:n={}}=t||{},{V_720P:r,V_HLSV4:a,V_HLSV3_MOBILE:s}=n,l=(0,o.V)(a),d=(0,o.V)(s),c=(0,o.V)(r),u=c||l||d;return i&&u?{...e,video:{id:i,hasVideo:u,mp4:c||void 0,hls:l||void 0,hlsv3:d||void 0}}:null}))},857354:(e,t,i)=>{i.d(t,{eR:()=>r,Ip:()=>a,d9:()=>s});var n=i(279224);const o=e=>t=>{const{images:i}=t,n=i[e],{url:o,width:r,height:a}=n||{};return o&&r&&a?{url:o,width:r,height:a}:null},r=(0,n.Z)((e=>{const t=o("236x")(e);return t&&{...e,image236x:t}})),a=(0,n.Z)((e=>{const t=o("564x")(e);return t&&{...e,image564x:t}})),s=(0,n.Z)((e=>{const t=o("736x")(e);return t&&{...e,image736x:t}}))},96975:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(0,i(279224).Z)((e=>{const{pin:t}=e,{images:i}=t,n=Object.keys(i||{}).reduce(((e,t)=>{const n=i[t],{url:o,width:r,height:a}=n;return e&&o&&r&&a?{...e,[t]:{url:o,width:r,height:a}}:null}),{});return n&&Object.keys(n).length>0?{...e,images:n}:null}))},479996:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var n=i(40142),o=i(224982),r=i(589444),a=i(560133),s=i(549135),l=i(558892),d=i(883119),c=i(785893);function u({carouselData:e,carouselIndex:t,componentType:i,contextLogData:u,handleCarouselSwipe:p,isCloseup:h,isEditMode:m,pinId:g,viewParameter:f,viewType:_,variant:x}){const v=(0,n.useSelector)((({pins:e})=>e[g]),n.shallowEqual),y=e||(0,r.Z)({pin:v}),b=(0,n.useDispatch)();if(!y)return null;const w=(e,t,n)=>{m||void 0===o.Z||(e.preventDefault(),e.stopPropagation(),b((0,o.Z)(String(g),n))),void 0!==p&&p(n),((e,t,i=0,n,o,r,l,d,c,u)=>{if(!u){const{carousel_slots:u,id:p}=o;(0,s.j)(108,{...c,objectId:t,component:d,view:l,viewParameter:r,eventData:{pinCarouselSlotEventData:{carouselSlotId:(null==u?void 0:u[i])&&Number(u[i].id),carouselDataId:Number(p),carouselSlotIndex:i,toCarouselSlotIndex:n}},...(0,a.Kl)(e)||{}})}})(v,g,t,n,y,f,_,i,u,m)},{carousel_slots:S=[],index:P}=y,j=void 0!==t?t:P,T="default"===x,I=T?"white":"#555",C=T?"rgba(255, 255, 255, 0.5)":"lightGray";return(0,c.jsx)(l.ZP.Consumer,{children:({viewportSize:e})=>"sm"===e?null:(0,c.jsx)(d.xu,{alignItems:"center","data-test-id":"carousel-ellipsis",display:"flex",justifyContent:h?"end":"center",paddingY:m?1:0,children:[...Array(S.length).keys()].map((e=>{var t;return(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.iP,{accessibilityLabel:null!==(t=S[e].title)&&void 0!==t?t:"",fullWidth:!1,onTap:({event:t})=>w(t,j,e),rounding:"circle",children:(0,c.jsx)(d.xu,{"data-test-id":"ellipsis-size",height:8,width:8,dangerouslySetInlineStyle:{__style:{backgroundColor:e===j?I:C}},rounding:"circle"})})},g+e)}))})})}},100001:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(667294),o=i(595657),r=i(132718),a=i(639387),s=i(831251),l=i(560133),d=i(784655),c=i(549135),u=i(785893);function p({children:e,hovered:t,pin:i,slotIndex:p,trafficSource:h,viewType:m}){const[g,f]=(0,n.useState)(),[_,x]=(0,n.useState)(),{id:v,tracked_link:y,link:b}=i,w=y||b||"",S=()=>{f(!0)},P=(0,r.Z)((0,a.Z)({pin:i})),j=(0,n.useCallback)((()=>{((e,t,i)=>{const n={check_only:i,pin_id:e.id,url:t,client_tracking_params:(0,o.Z)(e.id),aux_data:JSON.stringify({clickthrough_type:"rightClick",objectId:v,...p||{},...(0,l.Kl)(e)||{}})};return(0,s.Z)(n)})(i,w,!1).callGet({showError:!1}).then((e=>{e&&((0,c.j)(12,{clickthrough_type:"rightClick",objectId:v,view:m,viewParameter:P,...p||{},...(0,l.Kl)(i)||{}}),(0,c.j)(8948,{click_type:"clickthrough",closeup_navigation_type:h&&(0,d.sV)(h)?"deeplink":"click",clickthrough_type:"rightClick",view:m,objectId:v,viewParameter:P,...p||{},...(0,l.Kl)(i)||{}}))}))})),T=e=>{var t;g&&(/^\/pin/.test(null===(t=e.target.activeElement.attributes.href)||void 0===t?void 0:t.value)||(j(),f(!1)),window.removeEventListener(_,T,!1))};return(0,n.useEffect)((()=>{var e,t,i,n,o,r;void 0!==(null===(e=window)||void 0===e||null===(t=e.document)||void 0===t?void 0:t.hidden)?x("visibilitychange"):void 0!==(null===(i=window)||void 0===i||null===(n=i.document)||void 0===n?void 0:n.msHidden)?x("msvisibilitychange"):void 0!==(null===(o=window)||void 0===o||null===(r=o.document)||void 0===r?void 0:r.webkitHidden)&&x("webkitvisibilitychange")}),[]),(0,n.useEffect)((()=>(g&&window&&window.addEventListener(_,T,!1),()=>window.removeEventListener(_,T))),[g,_]),(0,n.useEffect)((()=>(t&&window.addEventListener("contextmenu",S),()=>{window.removeEventListener("contextmenu",S)})),[t]),(0,u.jsx)(n.Fragment,{children:e})}},45815:(e,t,i)=>{i.d(t,{J:()=>n,o:()=>o});const n="numSearchCloseups",o=20},529110:(e,t,i)=>{i.d(t,{Js:()=>s,w9:()=>c,bh:()=>u,ax:()=>h,Hx:()=>m,P0:()=>g,j:()=>f});var n=i(41743),o=i(395047),r=i(535258),a=i(227340);const s=(e,t)=>{let i=e&&e.url?e.url.split("/")[1]:"";return t&&t.full_name&&(i=t.full_name),i},l=e=>"ja"===e?23:19,d=(e,t)=>{if(e){const i=((e,t)=>{let i=0;if(e){let n=27;"ja"===t&&(n=14);const o=2;i=Math.floor(e.length/n)+1,i>o&&(i=o)}return i})(e,t);return l(t)*i}return 0},c=e=>(0,a.eK)(e),u=(e,t=!1)=>e&&e.length>0&&!t,p=(e,t,i,n)=>{let r=0;const{description:a,vaseAnnotations:s}=c(e),l={seeMoreButtonHeight:15,seeMoreButtonBottomMargin:3,productSiteTitle:15,productSiteTitleTopMargin:4,vaseCarouselHeight:30,descriptionLineHeight:17,descriptionVerticalMargin:10,maxNumTitleLines:2,maxNumDescriptionLines:2};if(((e,t,i,n,o=!0)=>{if(!i)return null;if(o)return!u(t)&&t&&t.length>0;return!1})(0,s,e)&&(r+=l.seeMoreButtonHeight,r+=l.seeMoreButtonBottomMargin),(e=>!!(e.rich_metadata&&e.rich_metadata.products&&Array.isArray(e.rich_metadata.products)&&e.rich_metadata.products.length&&e.rich_metadata.site_name))(e)&&(r+=l.productSiteTitle,r+=l.productSiteTitleTopMargin),u(s,n)&&(r+=l.vaseCarouselHeight),!n){const e=(e=>{let t=0;if(e){e=(0,o.Z)(e);const i=35,n=2;t=Math.floor(e.length/i)+1,t>n&&(t=n)}return t})(a);r+=l.descriptionVerticalMargin+l.descriptionLineHeight*e}return e.pinner&&e.board&&(r+=28),r},h=(e,t,i,n=!1,o,r)=>{const s=(e=>{const{hasRichAttributionTitle:t,hasPlaceInfo:i}=(e=>{const t=e.rich_summary,i=t&&"mobile application"!==t.type_name;return{hasRichSummary:i,hasRichAttributionTitle:i&&t.display_name,hasPlaceInfo:!!e.place_summary}})(e);return!!(t||i||e.rich_metadata&&e.rich_metadata.title)})(e)?((e,t)=>{const i=(0,a.fs)(e);return d(i,t)+10})(e,t):0,l=n?0:p(e,0,0,o);return s||l?l+s+10:0},m=(e,t="orig")=>(0,n.Z)(e.images,t);function g(e){const t=!!e.carousel_data,i=t&&0===e.carousel_data.index;let n=e.images;if(t){const{carousel_slots:t,index:i=0}=e.carousel_data;n=t&&t[i]&&t[i].images||n}if(e.embed&&"gif"===e.embed.type&&(!t||i))return e.embed.src;if(!!n){const e=n,t=Object.keys(e).map((t=>{const i=t.split("x")[0];return Number.isNaN(Number(i))?t:(e[i]=e[t],i)}));t.sort();const i=t.pop();return e[i].url}return e.image_large_url||""}const f=(e,t)=>{if(!e||!e.images||!e.images["236x"])return 0;const i=e.images["236x"].height;let n=i<t?i:t,o=600;i>600&&!e.fullImage&&(o=500);const a=m(e,"orig");if(a){var s,l;const e=Math.floor((null!==(s=a.height)&&void 0!==s?s:1)*r.xf/(null!==(l=a.width)&&void 0!==l?l:1));n=e>o?o:e}return n}},233495:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(180307),o=i(641483);const r={scope:"profile email",client_id:n.Z.settings.GPLUS_CLIENT_ID,app_package_name:n.Z.settings.GPLUS_APP_PACKAGE_NAME,access_type:"offline",cookie_policy:"single_host_origin"},a=e=>((0,o.ZP)("unauth_web.gapi_auth2_load.success"),e()),s=e=>{(0,o.ZP)(`unauth_web.init_google.sdk.${e}`)},l=(e=r)=>new Promise(((t,i)=>{s("start"),window.gapi.auth2?(s("exists"),window.gapi.auth2.init(e).then((()=>a(t)))):(s("load"),window.gapi.load("auth2",{callback:()=>{s("load_success"),window.gapi.auth2.init(e).then((()=>a(t)))},onerror:()=>{s("load_error"),i()},timeout:15e3,ontimeout:()=>{s("load_timeout"),i()}}))}))},269307:(e,t,i)=>{i.d(t,{ZP:()=>d,Yh:()=>c,tY:()=>u});var n=i(40142),o=i(535718),r=i(34411),a=i(153155);const s=0,l=1;function d(e){var t;const i=(0,r.ZP)(),n=i.isAuth&&i.id===e,a=(0,o.Z)({name:"UserResource",options:{field_set_key:"quicksave",user_id:e},dangerouslyDisableFetch:!i.isAuth||n});return{showEnabledSaveBehavior:n&&i.has_quicksave_board||!(!i.isAuth||null===(t=a.data)||void 0===t||!t.has_quicksave_board)}}function c(e){var t;const i=(0,n.useDispatch)(),s=(0,r.ZP)(),l=s.isAuth&&!!s.boardCount&&s.boardCount<5&&e,d=(0,o.Z)({name:"UserResource",options:{field_set_key:"save_behavior",user_id:s.isAuth&&s.id},dangerouslyDisableFetch:!l||!e});return s.isAuth&&void 0===s.save_behavior&&d&&null!==(t=d.data)&&void 0!==t&&t.id&&i((0,a.W)(d.data.save_behavior)),{showEnabledSaveBehavior:l}}function u(e){const t=(0,r.ZP)();let i;return e&&(t.save_behavior===s?i={type:"classic"}:t.save_behavior===l&&(i={type:"inline"})),{saveBehaviorType:i}}},383722:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(535718),o=i(855168);function r(){const{username:e}=(0,o.UO)();return(0,n.Z)({name:"UserResource",options:{username:e,field_set_key:"profile"}})}},648381:(e,t,i)=>{i.d(t,{k:()=>r,s:()=>a});var n=i(667294);const o=(0,n.createContext)(Object.freeze({})),r=o.Provider;function a(){return(0,n.useContext)(o)}},816670:(e,t,i)=>{i.d(t,{cg:()=>n,c7:()=>o,Ac:()=>r});const n=-1,o=5,r=6},963232:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(577302),o=i(129826);function r({action:e,board:t,viewer:i}){var r;return(0,n.Z)(i,t)||(0,o.Z)({board:t,viewer:i})&&!(null===(r=t.collaborator_permissions)||void 0===r||!r.includes(e))}},129826:(e,t,i)=>{function n({board:e,viewer:t}){const{collaborated_by_me:i}=e;return Boolean(t.isAuth&&i)}i.d(t,{Z:()=>n})},686723:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var n=i(667294),o=i(294386),r=i(845555),a=i(504534),s=i(881220),l=i(174523),d=i(475446),c=i(659048),u=i(883119),p=i(785893);function h({iconColor:e,iconSize:t,backgroundColor:i,marginEnd:h,isCloseupActionBar:m,sharedObject:g}){const f=(0,l.ZP)(),_=(0,d.F9)(),[x,v]=(0,n.useState)(""),[y,b]=(0,n.useState)(!1),[w,S]=(0,n.useState)(!1),P=f._("Link copied!","shareSheet.socialBar.copyLinkButton.LinkCopied","Notification link was copied to clipboard"),j=e=>{m?navigator.clipboard.writeText(e).then((()=>{var e;e=f._("Copied link to your clipboard to share","web.unauth.pinbar.copylink","Message to indicate link has been copied"),_.showToast((({onHide:t})=>(0,p.jsx)(u.xu,{top:!0,children:(0,p.jsx)(s.Z,{duration:3e3,onHide:t,text:e})})))})):navigator.clipboard.writeText(e).then((()=>{S(!0),setTimeout((()=>{S(!1)}),3e3)}))},T=async()=>{if(x)return void j(x);b(!0);const e={invite_category:3,invite_channel:12,object_type:g.type,object_id:g.id,name:g.name,description:g.description||"",path:g.url,picture:g.imageUrl};c.Z.createShareInviteData(e).then((t=>{const{invite_url:i}=t;b(!1),i&&(v(i),c.Z.logShareInvite(e,t),j(i))}))};return(0,p.jsxs)(a.Z,{iconSize:t,marginEnd:h||!1,children:[(0,p.jsx)(u.xu,{alignItems:m?"center":"stretch",display:m?"flex":"block",width:m?"100%":"auto",children:(0,p.jsx)(u.iP,{disabled:y,onTap:()=>{T()},children:(0,p.jsx)(u.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:(0,p.jsx)(o.Z,{backgroundColor:i,iconColor:e,size:t})})})}),!m&&(0,p.jsx)(r.Z,{text:w?P:f._("Copy link","shareSheet.socialBar.copyLinkButton.CopyLink","Copy Pin URL to clipboard")})]})}},134507:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(883119),o=i(785893);const r=e=>{const{size:t,name:i,textLayout:r}=e,a=`calc(${Math.sin((s=45,s*(Math.PI/180)))} * (${t}) / 2)`;var s;const l=(0,o.jsx)(n.qE,{name:i?[...i][0].toUpperCase():""});switch(r){case"bottomLeft":return(0,o.jsx)(n.xu,{"aria-label":i,color:"lightGray",height:"100%",display:"flex",alignItems:"end",dangerouslySetInlineStyle:{__style:{paddingBottom:a,paddingRight:a}},children:l});case"topLeft":return(0,o.jsx)(n.xu,{"aria-label":i,color:"lightGray",height:"100%",display:"flex",alignItems:"start",dangerouslySetInlineStyle:{__style:{paddingTop:a,paddingRight:a}},children:l});default:return(0,o.jsx)(n.xu,{"aria-label":i,color:"lightGray",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:l})}};function a(e){const{collaborators:t,outline:i=!1,size:a="fit"}=e,{colorGray0:s,colorGray100:l}=(0,n.tv)(),d="fit"===a?"100%":32,c="fit"===a?"":32,u=((e,t)=>{switch(e){case 0:case 1:return[{top:0,left:0,width:t,height:t,textLayout:"center"}];case 2:return[{top:0,left:0,width:"calc(50% - 1px)",height:t,textLayout:"center"},{top:0,left:"calc(50% + 1px)",width:"calc(50% - 1px)",height:t,textLayout:"center"}];default:return[{top:0,left:0,width:"calc(50% - 1px)",height:t,textLayout:"center"},{top:0,left:"calc(50% + 1px)",width:"calc(50%)",height:"calc(50% - 1px)",textLayout:"topLeft"},{top:"calc(50% + 1px)",left:"calc(50% + 1px)",width:"calc(50%)",height:"calc(50% - 1px)",textLayout:"bottomLeft"}]}})(t.length,d).map(((e,i)=>[e,t[i]]));return(0,o.jsxs)(n.xu,{color:"white",overflow:"hidden",rounding:"circle",width:d,height:c,position:"relative",dangerouslySetInlineStyle:{__style:{...i?{boxShadow:`0 0 0 2px ${s}`}:{},willChange:"transform"}},children:[(0,o.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:"100%"}}}),u.map((([e,t={name:"",src:void 0}],i)=>{const{width:a,height:s,top:d,left:c,textLayout:u}=e,{name:p,src:h}=t;return(0,o.jsxs)(n.xu,{position:"absolute",width:a,height:s,dangerouslySetInlineStyle:{__style:{top:d,left:c}},children:[null!=h?(0,o.jsx)(n.Ee,{alt:p,color:l,src:h,naturalWidth:1,naturalHeight:1,fit:"cover"}):(0,o.jsx)(r,{name:p,textLayout:u,size:s}),(0,o.jsx)(n.xu,{position:"absolute",top:!0,bottom:!0,right:!0,left:!0,dangerouslySetInlineStyle:{__style:{background:"rgba(0, 0, 0, 0.03)","pointer-events":"none"}}})]},i)}))]})}},373600:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(731164),o=i(311866),r=i(174523),a=i(549135),s=i(883119),l=i(785893);function d(e){const t=(0,r.ZP)(),{identifier:i,onUndoHide:d,isGroupChat:c}=e,u=async()=>{const t=o.ZP.create("ShareSuggestionsHideResource",{user_identifier:i});await t.callDelete(),d(),(()=>{const{component:t,element:i}=e;(0,a.j)(101,{component:t,element:i}),n.Z.increment("web_contacts.suggestions.undo_hide",1,{surface:t})})()};return(0,l.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,l.jsx)(s.kC,{alignItems:"center",flex:"grow",height:"100%",justifyContent:"start",width:"80%",children:(0,l.jsx)(s.xv,{inline:!0,color:"gray",children:c?t._("Ok! We won't suggest this group again.","SendObject.SendObjectSuggestionItem.HideContactBanner","Warning message after user hide a contact"):t._("Ok! We won't suggest this contact again.","SendObject.SendObjectSuggestionItem.HideContactBanner","Warning message after user hide a contact")})}),(0,l.jsx)(s.kC,{alignItems:"center",flex:"none",justifyContent:"end",children:(0,l.jsx)(s.zx,{onClick:({event:e})=>{e.stopPropagation(),u()},text:t._("Undo","SendObject.SendObjectSuggestionItem.HideContactUndoButton","Undo button after user hide a contact"),size:"lg",type:"button"})})]})}},617629:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(731164),o=i(311866),r=i(174523),a=i(883119),s=i(549135),l=i(785893);function d(e){const t=(0,r.ZP)(),{identifier:i,onHide:d}=e,c=()=>{o.ZP.create("ShareSuggestionsHideResource",{user_identifier:i}).callCreate().then((()=>{d(),(()=>{const{component:t,element:i}=e;(0,s.j)(101,{component:t,element:i}),n.Z.increment("web_contacts.suggestions.hide",1,{surface:t})})()}))};return(0,l.jsx)(a.hU,{icon:"cancel",iconColor:"darkGray",onClick:({event:e})=>{e.stopPropagation(),c()},accessibilityLabel:t._("Remove contact","SendObject.SendObjectSuggestionItem","accessibility label for removing contact suggestion"),size:"xs"})}},252688:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e,iconColor:t,backgroundColor:i,grayscale:o=!1}){const r=t||(o?"#333333":"#8E8E8E"),a=i||"#EFEFEF";return(0,n.jsx)("svg",{width:e,height:e,viewBox:"0 0 36 36",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsxs)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:[(0,n.jsx)("circle",{id:"Oval",fill:a,cx:"18",cy:"18",r:"18"}),(0,n.jsx)("g",{transform:"translate(9.000000, 12.000000)",fill:r,fillRule:"nonzero",children:(0,n.jsx)("path",{d:"M16.7972727,2.052 L10.5905455,8.14909091 C10.152,8.57945455 9.576,8.79545455 9,8.79545455 C8.424,8.79545455 7.848,8.57945455 7.40863636,8.14909091 L1.20190909,2.052 C0.962181818,1.81636364 0.962181818,1.43427273 1.20190909,1.19863636 C1.44163636,0.963818182 1.83027273,0.963818182 2.07,1.19863636 L8.27672727,7.29572727 C8.67518182,7.68845455 9.324,7.68845455 9.72327273,7.29572727 L15.9291818,1.19863636 C16.1689091,0.963818182 16.5575455,0.963818182 16.7972727,1.19863636 C17.037,1.43427273 17.037,1.81636364 16.7972727,2.052 Z M0,11.4545455 L18,11.4545455 L18,0 L0,0 L0,11.4545455 Z"})})]})})}},294386:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e,iconColor:t,backgroundColor:i,grayscale:o=!1}){const r=t||(o?"#333333":"#8E8E8E"),a=i||"#EFEFEF";return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 36 36",version:"1.1",children:(0,n.jsxs)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:[(0,n.jsx)("circle",{fill:a,cx:"18",cy:"18",r:"18"}),(0,n.jsx)("g",{id:"Icons/link",transform:"translate(9.000000, 9.000000)",fill:r,fillRule:"nonzero",children:(0,n.jsx)("path",{d:"M15.75075,5.43075 L12.711,8.46975 L11.916,7.67475 L12.42,7.17075 C12.8595,6.732 12.8595,6.0195 12.42,5.58 C11.9805,5.14125 11.268,5.14125 10.82925,5.58 L10.326,6.084 L9.53025,5.289 L12.56925,2.25 L15.75075,5.43075 Z M8.46975,12.71175 L5.43075,15.75075 L2.24925,12.57 L5.289,9.53025 L6.08325,10.32525 L5.58,10.82925 C5.14125,11.26875 5.14125,11.9805 5.58,12.42 C6.01875,12.8595 6.732,12.85875 7.17075,12.42 L7.674,11.916 L8.46975,12.71175 Z M10.97925,0.65925 L7.9395,3.69825 C7.06125,4.5765 7.06125,6.00075 7.9395,6.87975 L8.73525,7.67475 L7.674,8.73525 L6.879,7.9395 C6.00075,7.06125 4.5765,7.06125 3.69825,7.9395 L0.65925,10.9785 C-0.21975,11.8575 -0.21975,13.28175 0.65925,14.16 L3.84,17.3415 C4.71825,18.21975 6.1425,18.21975 7.02075,17.3415 L10.0605,14.3025 C10.93875,13.4235 10.93875,11.99925 10.0605,11.121 L9.2655,10.32525 L10.326,9.2655 L11.121,10.0605 C11.99925,10.93875 13.4235,10.93875 14.30175,10.0605 L17.34075,7.0215 C18.21975,6.14325 18.21975,4.719 17.34075,3.84 L14.16,0.65925 C13.28175,-0.21975 11.8575,-0.21975 10.97925,0.65925 Z",id:"path-1"})})]})})}},415339:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Pe});var n=i(667294),o=i(40142),r=i(151101),a=i(134507),s=i(34411),l=i(237574),d=i(174523),c=i(883119),u=i(785893);function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class h extends n.Component{constructor(...e){super(...e),p(this,"state",{textValue:this.props.initialTextValue||""}),p(this,"handleSendMessage",(()=>{this.props.onSendMessage(this.props.recipient,this.state.textValue)})),p(this,"handleTextValueChange",(({value:e})=>{this.setState({textValue:e})}))}render(){const{isFlyout:e,onCancelDraft:t,viewerId:i}=this.props,n=this.props.recipient||{},o="conversation_share_suggestion"===n.type,s=o?(n.users||[]).filter((e=>e.id!==i)):[];return(0,u.jsxs)(c.xu,{paddingX:4,width:360,children:[(0,u.jsxs)(c.xu,{alignItems:"center",display:"flex",paddingY:4,children:[(0,u.jsx)(c.xu,{height:48,paddingX:1,width:56,children:o?(0,u.jsx)(a.Z,{collaborators:s.map((e=>({name:e.full_name||e.first_name,src:e.image_large_url})))}):(0,u.jsx)(r.Z,{name:n.full_name||n.email||" ",src:n.image_large_url})}),(0,u.jsxs)(c.xu,{flex:"grow",marginStart:1,children:[(0,u.jsx)(c.xv,{weight:"bold",children:o?s.map((e=>e.first_name||e.full_name)).join(", "):n.full_name||n.email}),(0,u.jsx)(c.xv,{color:"gray",size:"sm",children:o||n.username?n.username:this.props.i18n._("Invite by email","shareSheet.SendObjectDraft.inviteByEmailSubheader","Subheader shown when username is not avaible")})]}),e?(0,u.jsx)(c.hU,{accessibilityLabel:this.props.i18n._("Cancel share to user","shareSheet.SendObjectDraft.cancelButton","Accessibility label for close button"),icon:"cancel",iconColor:"darkGray",onClick:t,size:"sm"}):null]}),(0,u.jsxs)(c.xu,{children:[(0,u.jsx)(c.xu,{paddingX:1,children:(0,u.jsx)(c.Kx,{id:"sendObjectMessage",onChange:this.handleTextValueChange,placeholder:this.props.i18n._("Add a message","shareSheet.SendObjectDraft.textareaPlaceholder","Placeholder that tells user this is where they can add a messaage"),value:this.state.textValue||""})}),(0,u.jsx)(c.xu,{alignItems:"center",display:"flex",justifyContent:"center",paddingY:4,children:(0,u.jsx)(c.zx,{color:"red",onClick:this.handleSendMessage,size:"lg",text:this.props.i18n._("Send","shareSheet.SendObjectDraft.sendButton","Button that sends out to email"),type:"submit"})})]})]})}}function m(e){const t=(0,d.ZP)(),i=(0,s.ZP)();return(0,u.jsx)(h,{...e,viewerId:i.isAuth?i.id:"",i18n:t})}var g=i(760620);function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class _ extends n.Component{constructor(...e){super(...e),f(this,"state",{textValue:this.props.initialTextValue||"",emailValue:""}),f(this,"handleSendEmail",((e,t)=>{if(e){const i={email:e,full_name:e,id:"",image_large_url:"",username:""};this.props.onSendMessage(i,t)}})),f(this,"handleTextValueChange",(({value:e})=>{this.setState({textValue:e})})),f(this,"handleEmailValueChange",(({value:e})=>{this.setState({emailValue:e})}))}render(){const{isFlyout:e,onCancelDraft:t}=this.props;return(0,u.jsxs)(c.xu,{display:"flex",direction:"column",column:12,paddingX:4,width:360,children:[(0,u.jsxs)(c.xu,{display:"flex",alignItems:"center",paddingY:4,children:[(0,u.jsx)(c.xu,{flex:"grow",children:(0,u.jsx)(c.xv,{weight:"bold",children:this.props.i18n._("Send to","shareSheet.SendToEmail.label","Send to label")})}),e?(0,u.jsx)(c.hU,{accessibilityLabel:this.props.i18n._("Cancel share to user","accessibility label for close button","accessibility label for close button"),icon:"cancel",onClick:t,size:"sm"}):null]}),(0,u.jsxs)(c.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,u.jsx)(c.xu,{paddingY:1,marginBottom:4,children:(0,u.jsx)(c.Kx,{id:"email",onChange:this.handleEmailValueChange,placeholder:this.props.i18n._("Enter email address","Email address to send to","Email address to send to"),value:this.state.emailValue||"",rows:1})}),(0,u.jsx)(c.Kx,{id:"sendObjectMessage",onChange:this.handleTextValueChange,placeholder:this.props.i18n._("Add a message","shareSheet.SendToEmail.textareaPlaceholder","Placeholder that tells user this is where they can add a messaage"),value:this.state.textValue||""}),(0,u.jsx)(c.xu,{paddingY:4,display:"flex",justifyContent:"center",children:(0,u.jsx)(c.zx,{size:"lg",color:"red",onClick:()=>this.handleSendEmail(this.state.emailValue||"",this.state.textValue||""),type:"submit",text:this.props.i18n._("Send","shareSheet.SendToEmail.sendButton","Button that sends out to email"),disabled:!(0,g.Z)(this.state.emailValue)})})]})]})}}function x(e){const t=(0,d.ZP)();return(0,u.jsx)(_,{...e,i18n:t})}var v=i(946753);function y({email:e,isValid:t,onClick:i,showSendEmailText:n}){const o=(0,d.ZP)(),a=t?o._("Click to send!","SendObject.sendToEmail.sendToSubheader","Subeader that indicates user to click in order to send an object"):o._("Keep typing!","SendObject.sendToEmail.sendToSubheader","Subeader that indicates user to keep typing until the email address is valid"),s=n?(0,v.nk)(o._("Email {{ email }}","SendObject.sendToEmail.sendToHeader","Header that indicates user the email address typed in the search field"),{email:e}):(0,v.nk)(o._("Invite {{ email }}","SendObject.sendToEmail.sendToHeader","Header that indicates user the search query typed in the search field"),{email:e});return(0,u.jsx)(c.xu,{marginBottom:4,children:(0,u.jsx)(c.iP,{onTap:()=>{t&&i()},children:(0,u.jsxs)(c.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,u.jsx)(c.xu,{height:48,width:48,children:(0,u.jsx)(r.Z,{name:e})}),(0,u.jsxs)(c.xu,{paddingX:3,display:"flex",justifyContent:"center",direction:"column",children:[(0,u.jsx)(c.xv,{weight:"bold",size:"lg",children:s}),(0,u.jsx)(c.xv,{size:"sm",color:"gray",children:a})]})]})})})}var b=i(94236),w=i(373600),S=i(617629),P=i(549156);function j(e){const t=(0,d.ZP)(),{shouldShowViewChat:i,isSent:n,onClickSend:o,onViewConversation:r}=e;return(0,u.jsx)(c.kC,{alignItems:"stretch",justifyContent:"start",children:i?(0,u.jsx)(c.iP,{mouseCursor:"pointer",onTap:({event:e})=>{e.stopPropagation(),r()},children:(0,u.jsxs)(c.xu,{alignItems:"center","data-test-id":"sharesheet-viewchat-link",display:"flex",children:[(0,u.jsx)(c.xv,{color:"darkGray",size:"md",lineClamp:1,weight:"bold",children:t._("View chat","SendObject.contactList.viewChatLink","View chat with last sent item")}),(0,u.jsx)(c.xu,{marginStart:1,children:(0,u.jsx)(c.JO,{accessibilityLabel:t._("View chat forward icon","SendObject.contactList.viewChatLink","View chat with last sent item"),color:"darkGray",icon:"arrow-forward",size:14})})]})}):(0,u.jsx)(P.Z,{id:n?"sharesheet-viewchat-link":"sharesheet-send-button",children:(0,u.jsx)(c.zx,{color:n?"gray":"red",disabled:n,onClick:o,size:"lg",text:n?t._("Sent","SendObject.LEGOSendObjectTypeahead","Pin is sent to current contact"):t._("Send","SendObject.LEGOSendObjectTypeahead","Send pin to current contact")})})})}var T=i(549135);function I(e){var t,i,o;const{item:l,textFieldValue:d,onSendMessage:p,onShowSendDraft:h,onViewConversation:m,sentHistory:g}=e,[f,_]=(0,n.useState)(!1),[x,v]=(0,n.useState)(!1),[y,P]=(0,n.useState)(!1),I=l.id||"string"==typeof l.email&&l.email||"",C=I in g,E=""!==d,k=null!==(t=g[I])&&void 0!==t?t:"",R=(0,s.ZP)().id||"",O="conversation_share_suggestion"===l.type,A=O?(l.users||[]).filter((e=>e.id!==R)):[],N=l.debug_reason&&l.debug_reason.readable_reason;let L="";"string"!=typeof l.full_name||l.full_name.match(/^\s*$/)?"string"!=typeof l.email||l.email.match(/^\s*$/)||(L=l.email):L=l.full_name;return f?(0,u.jsx)(c.xu,{alignItems:"center",display:"flex",position:"relative",width:"100%",paddingY:2,children:(0,u.jsx)(w.Z,{identifier:null!==(i=l.id)&&void 0!==i?i:l.email,onUndoHide:()=>_(!1),component:13029,element:11918,isGroupChat:A.length>1})}):(0,u.jsxs)(c.xu,{alignItems:"center","data-test-id":"sharesheet-contact-item",display:"flex",paddingY:2,position:"relative",width:"100%",children:[(0,u.jsx)(c.iP,{mouseCursor:"pointer",onTap:({event:e})=>{e.stopPropagation(),h(l)},children:(0,u.jsx)(c.Zb,{onMouseEnter:()=>{v(!(E||y&&C))},onMouseLeave:()=>v(!1),children:(0,u.jsxs)(c.kC,{alignItems:"center",justifyContent:"start",children:[(0,u.jsx)(c.xu,{height:48,width:48,children:O?(0,u.jsx)(a.Z,{collaborators:A.map((e=>({name:e.full_name||e.first_name,src:e.image_medium_url})))}):(0,u.jsx)(r.Z,{accessibilityLabel:"",name:L,src:l.image_medium_url})}),(0,u.jsxs)(c.kC,{alignItems:"center",flex:"grow",height:"100%",justifyContent:"start",width:"100%",children:[(0,u.jsxs)(c.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:8,paddingRight:16}},flex:"grow",children:[(0,u.jsx)(c.xu,{marginBottom:1,children:(0,u.jsx)(c.xv,{color:"darkGray",lineClamp:1,weight:"bold",children:O?A.map((e=>e.first_name||e.full_name)).join(", "):L})}),E&&N?(0,u.jsx)(c.xv,{color:"gray",size:"sm",children:N}):"string"==typeof l.username&&(0,u.jsx)(c.xv,{color:"gray",size:"sm",children:l.username})]}),(0,u.jsxs)(c.kC,{alignItems:"center",flex:"none",justifyContent:"end",children:[x&&(0,u.jsx)(c.xu,{display:"flex",marginEnd:2,children:(0,u.jsx)(S.Z,{identifier:null!==(o=l.id)&&void 0!==o?o:l.email,onHide:()=>_(!0),component:13029,element:11917})}),(0,u.jsx)(j,{shouldShowViewChat:C,isSent:y,onClickSend:({event:t})=>{t.stopPropagation(),(()=>{var t;const{idx:i}=e,n=d?1044:1039;(0,T.j)(101,{component:13029,element:n,entered_query:d,result_index:i+1,rs:null===(t=l.debug_reason)||void 0===t?void 0:t.reason})})(),P(!0),p(l),v(!1)},onViewConversation:()=>m(k)})]})]})]})})}),(0,u.jsx)(b.Z.Consumer,{children:e=>{var t;return e?(0,u.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none",backgroundColor:"rgba(255,255,255,0.5)"}},position:"absolute",right:!0,top:!0,children:(0,u.jsx)(c.X6,{color:"blue",size:"sm",children:null===(t=l.debug_reason)||void 0===t?void 0:t.reason})}):null}})]})}var C=i(535718),E=i(249884),k=i(99220);function R(e){const t=(0,d.ZP)(),{onChange:i,onSendMessage:r,onShowSendDraft:a,onShowImportContacts:s,sentHistory:l,value:p,paddingX:h}=e,{isLoaded:m}=(0,C.Z)({name:"ShareSuggestionsResource",options:{field_set_key:"default"},noCache:!0}),{isLoaded:f}=(0,C.Z)({name:"ShareSuggestionsTypeaheadResource",options:{field_set_key:"default",term:p||"default"},noCache:!0}),_=(0,o.useSelector)((e=>e.social.shareSuggestions[p]||[]));(0,n.useEffect)((()=>{if(!p&&m){const e=_.length>0?7511:7512;(0,T.j)(e,{component:56,view:70,viewParameter:256})}}),[m]);const x=(0,o.useDispatch)(),v=t=>{const{isFlyout:i,onHide:n}=e;!i&&n&&n(),(e=>{x((0,E.Z5)(e))})(t),x(k.NA)},b=_.map(((e,t)=>{const i=`${t}-${p?"search":"suggestion"}`,n={item:e,idx:t,onSendMessage:r,onShowSendDraft:a,onViewConversation:v,sentHistory:l,textFieldValue:p};return(0,u.jsx)(I,{...n},i)})),w=0===_.length&&(""===p&&!m||""!==p&&!f);return(0,u.jsxs)(c.xu,{children:[(0,u.jsx)(c.xu,{display:"flex",paddingX:h,position:"relative",children:(0,u.jsx)(c.xu,{"data-test-id":"sharesheet-search-user",width:"100%",children:(0,u.jsx)(c.Um,{accessibilityLabel:t._("Search for a name or email","SendObject.searchbar.accesibilityLabel","accessible label"),id:"search",onChange:i,placeholder:t._("Name or email","SendObject.searchbar.placeholder","Placeholder text on search bar for searching contacts on sharesheet"),size:"lg",value:p})})}),(0,u.jsx)(c.xu,{height:185,marginBottom:4,marginTop:2,zIndex:new c.Ry(1e3),dangerouslySetInlineStyle:{__style:{overflowY:"scroll",overflowX:"hidden"}},children:(0,u.jsxs)(c.xu,{paddingX:h,children:[(0,u.jsx)(c.xu,{paddingY:w?2:0,children:(0,u.jsx)(c.$j,{accessibilityLabel:t._("Loading Conversation Messages","SendObject.contactList.spinner","Spinner that indicates then the contact list is being loaded"),show:w})}),(0,u.jsxs)(c.xu,{children:[b,p&&(0,u.jsxs)(c.xu,{children:[(0,u.jsx)(c.Zb,{children:(0,u.jsx)(y,{email:p,isValid:(0,g.Z)(p),onClick:()=>a({email:p,full_name:p}),showSendEmailText:!1})}),!w&&(0,u.jsx)(c.xu,{width:"100%",children:(0,u.jsx)(c.Zb,{children:(0,u.jsx)(c.iP,{onTap:s,children:(0,u.jsxs)(c.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,u.jsx)(c.xu,{alignItems:"center",color:"lightGray",display:"flex",height:48,justifyContent:"center",rounding:"circle",width:48,children:(0,u.jsx)(c.JO,{accessibilityLabel:"people",color:"darkGray",icon:"people",size:24})}),(0,u.jsx)(c.xu,{paddingX:3,children:(0,u.jsx)(c.xv,{weight:"bold",children:t._("Choose from contacts","SendObject.typeahead.contactHeader","Header that indicates user to choose from contact list")})})]})})})})]})]})]})})]})}var O=i(296882),A=i(686723),N=i(252688),L=i(230457),D=i(674245);function B({size:e=48,iconColor:t,backgroundColor:i,grayscale:n=!1}){const o=t||(n?"#333333":"#8E8E8E"),r=i||"#EFEFEF";return(0,u.jsx)("svg",{viewBox:`0 0 ${e} ${e}`,width:e,height:e,xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsxs)("g",{fill:"none",strokeWidth:"1",stroke:"none",fillRule:"evenodd",children:[(0,u.jsx)("circle",{fill:r,cx:"24",cy:"24",r:"24",stroke:"none"}),(0,u.jsxs)("g",{transform:"translate(14.000000, 14.000000)",fill:o,children:[(0,u.jsx)("circle",{cx:"10",cy:"10",r:"6"}),(0,u.jsx)("circle",{cx:"17",cy:"3",r:"2"}),(0,u.jsx)("circle",{cx:"17",cy:"17",r:"2"}),(0,u.jsx)("circle",{cx:"19",cy:"10",r:"1"}),(0,u.jsx)("circle",{cx:"10",cy:"19",r:"1"}),(0,u.jsx)("circle",{cx:"1",cy:"10",r:"1"}),(0,u.jsx)("circle",{cx:"10",cy:"1",r:"1"}),(0,u.jsx)("circle",{cx:"3",cy:"17",r:"2"}),(0,u.jsx)("circle",{cx:"3",cy:"3",r:"2"})]})]})})}var Z=i(845555),M=i(504534);function F({sharedObject:e,onCreatePincodeClick:t,iconColor:i,iconSize:n,backgroundColor:o}){const r=(0,d.ZP)(),a=(0,s.ZP)();return t&&[l.d.BOARD,l.d.PINNER,l.d.USER].includes(e.type)&&a.isAuth&&(e.id===a.id||a.isEmployee)?(0,u.jsxs)(M.Z,{iconSize:n,marginEnd:!0,children:[(0,u.jsx)(c.iP,{fullWidth:!1,onTap:t,children:(0,u.jsx)(B,{backgroundColor:o,iconColor:i,size:n})}),(0,u.jsx)(Z.Z,{text:r._("Pincode","Share via pincode","Share via pincode")})]},"pincode"):null}var G=i(447186),U=i(855168),V=i(659048);const H="#EFEFEF",z="#333333";function W({size:e=48,grayscale:t=!1}){const i=t?z:"#FFFFFF",n=t?H:"#1877f2";return(0,u.jsxs)("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${e} ${e}`,width:e,height:e,children:[(0,u.jsx)("title",{children:"f_logo_RGB-Blue_1024"}),(0,u.jsxs)("g",{id:"surface1",children:[(0,u.jsx)("path",{style:{fill:n,stroke:"transparent"},d:"M 48 24 C 48 10.746094 37.253906 0 24 0 C 10.746094 0 0 10.746094 0 24 C 0 35.980469 8.777344 45.90625 20.25 47.707031 L 20.25 30.9375 L 14.15625 30.9375 L 14.15625 24 L 20.25 24 L 20.25 18.710938 C 20.25 12.699219 23.832031 9.375 29.316406 9.375 C 31.941406 9.375 34.6875 9.84375 34.6875 9.84375 L 34.6875 15.75 L 31.660156 15.75 C 28.679688 15.75 27.75 17.601562 27.75 19.5 L 27.75 24 L 34.40625 24 L 33.34375 30.9375 L 27.75 30.9375 L 27.75 47.707031 C 39.222656 45.90625 48 35.980469 48 24 Z M 48 24 "}),(0,u.jsx)("path",{style:{fill:i,stroke:"transparent"},d:"M 33.34375 30.9375 L 34.40625 24 L 27.75 24 L 27.75 19.5 C 27.75 17.601562 28.679688 15.75 31.660156 15.75 L 34.6875 15.75 L 34.6875 9.84375 C 34.6875 9.84375 31.941406 9.375 29.316406 9.375 C 23.832031 9.375 20.25 12.699219 20.25 18.710938 L 20.25 24 L 14.15625 24 L 14.15625 30.9375 L 20.25 30.9375 L 20.25 47.707031 C 22.734375 48.097656 25.265625 48.097656 27.75 47.707031 L 27.75 30.9375 Z M 33.34375 30.9375 "})]})]})}function Y({size:e=48,grayscale:t=!1}){const i=t?z:"#FFFFFF",n=t?H:"#0DC2FF";return(0,u.jsx)("svg",{viewBox:`0 0 ${e} ${e}`,width:e,height:e,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsxs)("g",{id:"surface1",children:[(0,u.jsx)("path",{style:{fill:n,stroke:"transparent"},d:"M 48 24 C 48 37.253906 37.253906 48 24 48 C 10.746094 48 0 37.253906 0 24 C 0 10.746094 10.746094 0 24 0 C 37.253906 0 48 10.746094 48 24 Z M 48 24 "}),(0,u.jsx)("path",{style:{fill:i,stroke:"transparent"},d:"M 19.609375 36.660156 C 30.253906 36.660156 36.070312 27.839844 36.070312 20.195312 C 36.070312 19.945312 36.070312 19.691406 36.058594 19.453125 C 37.1875 18.636719 38.171875 17.617188 38.953125 16.453125 C 37.921875 16.90625 36.804688 17.21875 35.628906 17.363281 C 36.828125 16.644531 37.738281 15.515625 38.171875 14.160156 C 37.054688 14.820312 35.820312 15.300781 34.5 15.5625 C 33.445312 14.4375 31.945312 13.738281 30.277344 13.738281 C 27.085938 13.738281 24.492188 16.332031 24.492188 19.523438 C 24.492188 19.980469 24.539062 20.425781 24.648438 20.84375 C 19.835938 20.605469 15.574219 18.300781 12.71875 14.796875 C 12.226562 15.648438 11.941406 16.644531 11.941406 17.699219 C 11.941406 19.703125 12.960938 21.480469 14.519531 22.511719 C 13.570312 22.488281 12.683594 22.222656 11.902344 21.792969 C 11.902344 21.816406 11.902344 21.839844 11.902344 21.863281 C 11.902344 24.671875 13.894531 27 16.546875 27.539062 C 16.066406 27.671875 15.550781 27.742188 15.023438 27.742188 C 14.652344 27.742188 14.292969 27.707031 13.933594 27.636719 C 14.664062 29.941406 16.800781 31.609375 19.332031 31.65625 C 17.351562 33.203125 14.855469 34.128906 12.144531 34.128906 C 11.675781 34.128906 11.21875 34.105469 10.765625 34.042969 C 13.296875 35.699219 16.34375 36.660156 19.609375 36.660156 "})]})})}function q({size:e=48,grayscale:t=!1}){const i=t?z:"#FFFFFF",n=t?H:"#25d366";return(0,u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${e} ${e}`,width:e,height:e,version:"1.1",children:(0,u.jsxs)("g",{id:"surface1",children:[(0,u.jsx)("path",{style:{fill:n,stroke:"transparent"},d:"M 48 24 C 48 37.253906 37.253906 48 24 48 C 10.746094 48 0 37.253906 0 24 C 0 10.746094 10.746094 0 24 0 C 37.253906 0 48 10.746094 48 24 Z M 48 24 "}),(0,u.jsx)("path",{style:{fill:i,stroke:"transparent"},d:"M 33.851562 13.910156 C 28.871094 9.039062 21.070312 8.566406 15.539062 12.800781 C 10.011719 17.039062 8.4375 24.695312 11.851562 30.769531 L 9.871094 38 L 17.28125 36 C 19.332031 37.148438 21.644531 37.757812 24 37.769531 C 31.730469 37.769531 38 31.503906 38 23.769531 C 38.019531 20.058594 36.542969 16.496094 33.910156 13.878906 M 24 35.410156 C 21.921875 35.410156 19.878906 34.851562 18.089844 33.789062 L 17.671875 33.539062 L 13.269531 34.699219 L 14.441406 30.410156 L 14.128906 30 C 11.304688 25.523438 11.863281 19.707031 15.484375 15.847656 C 19.109375 11.992188 24.886719 11.074219 29.527344 13.621094 C 34.167969 16.164062 36.5 21.523438 35.199219 26.652344 C 33.898438 31.785156 29.292969 35.386719 24 35.410156 M 30.371094 26.710938 C 30.019531 26.539062 28.300781 25.710938 27.980469 25.578125 C 27.660156 25.449219 27.429688 25.398438 27.199219 25.75 C 26.96875 26.101562 26.300781 26.890625 26.089844 27.121094 C 25.878906 27.351562 25.679688 27.378906 25.328125 27.210938 C 24.304688 26.792969 23.359375 26.203125 22.53125 25.46875 C 21.765625 24.765625 21.109375 23.953125 20.578125 23.058594 C 20.378906 22.710938 20.578125 22.519531 20.738281 22.339844 C 20.898438 22.160156 21.089844 21.929688 21.261719 21.730469 C 21.40625 21.554688 21.523438 21.359375 21.609375 21.148438 C 21.71875 20.960938 21.71875 20.730469 21.609375 20.539062 C 21.519531 20.359375 20.820312 18.640625 20.53125 17.941406 C 20.238281 17.238281 19.960938 17.351562 19.75 17.339844 L 19 17.339844 C 18.640625 17.351562 18.304688 17.511719 18.070312 17.78125 C 17.269531 18.53125 16.820312 19.589844 16.839844 20.691406 C 16.957031 22.007812 17.453125 23.261719 18.269531 24.300781 C 19.773438 26.554688 21.84375 28.375 24.269531 29.578125 C 24.921875 29.859375 25.589844 30.105469 26.269531 30.308594 C 26.980469 30.527344 27.734375 30.578125 28.46875 30.449219 C 29.453125 30.25 30.308594 29.648438 30.828125 28.789062 C 31.058594 28.269531 31.128906 27.691406 31.03125 27.128906 C 30.941406 26.988281 30.710938 26.898438 30.359375 26.71875 "})]})})}function X({size:e=48,grayscale:t=!1}){const i=t?z:"#fff",n=t?H:"#00b900";return(0,u.jsx)("svg",{width:e,height:e,viewBox:"0 0 36 36",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsxs)("g",{id:"FULL_COLOR_ICON","data-name":"FULL COLOR ICON",children:[(0,u.jsx)("path",{style:{fill:n,stroke:"transparent"},d:"M18,35.97644h0a18.05292,18.05292,0,0,1-18-18H0a18.05292,18.05292,0,0,1,18-18h0a18.05292,18.05292,0,0,1,18,18h0A17.9886,17.9886,0,0,1,18,35.97644Z",transform:"translate(0 0.02356)"}),(0,u.jsxs)("g",{id:"TYPE_A","data-name":"TYPE A",children:[(0,u.jsx)("path",{style:{fill:i,stroke:"transparent"},d:"M28.5,17.05606c0-4.7-4.7-8.5-10.5-8.5s-10.5,3.8-10.5,8.5c0,4.2,3.7,7.7,8.8,8.4.3.1.8.2.9.5a1.37864,1.37864,0,0,1,0,.9s-.1.7-.1.9c0,.3-.2,1,.9.6a36.05491,36.05491,0,0,0,8.2-6.1h0a7.86275,7.86275,0,0,0,2.3-5.2",transform:"translate(0 0.02356)"}),(0,u.jsx)("path",{style:{fill:n,stroke:"transparent"},d:"M15.8,14.75606h-.7a.21508.21508,0,0,0-.2.2v4.6a.21508.21508,0,0,0,.2.2h.7a.21508.21508,0,0,0,.2-.2v-4.6c0-.1,0-.2-.2-.2",transform:"translate(0 0.02356)"}),(0,u.jsx)("path",{style:{fill:n,stroke:"transparent"},d:"M20.9,14.75606h-.7a.21508.21508,0,0,0-.2.2v2.7l-2.1-2.8H17a.21508.21508,0,0,0-.2.2v4.6a.21508.21508,0,0,0,.2.2h.7a.21508.21508,0,0,0,.2-.2v-2.7l2.1,2.8.1.1h.8a.21508.21508,0,0,0,.2-.2v-4.6c0-.2-.1-.3-.2-.3",transform:"translate(0 0.02356)"}),(0,u.jsx)("path",{style:{fill:n,stroke:"transparent"},d:"M14.1,18.55606h-2v-3.6a.21508.21508,0,0,0-.2-.2h-.7a.21508.21508,0,0,0-.2.2v4.6h0c0,.1,0,.1.1.1h0l.1.1h2.9a.21508.21508,0,0,0,.2-.2v-.7c0-.2-.1-.3-.2-.3",transform:"translate(0 0.02356)"}),(0,u.jsx)("path",{style:{fill:n,stroke:"transparent"},d:"M25,15.85606a.21508.21508,0,0,0,.2-.2v-.7a.21508.21508,0,0,0-.2-.2H22c-.1,0-.1,0-.1.1h0l-.1.1h0v4.6h0c0,.1,0,.1.1.1h0l.1.1h3a.21508.21508,0,0,0,.2-.2v-.7a.21508.21508,0,0,0-.2-.2H23v-.8h2a.21508.21508,0,0,0,.2-.2v-.7a.21508.21508,0,0,0-.2-.2H23v-.8h2Z",transform:"translate(0 0.02356)"})]})]})})}function $({size:e=48,grayscale:t=!1}){const i=t?z:"#fff";return(0,u.jsxs)("svg",{viewBox:"0 0 800 800",xmlns:"http://www.w3.org/2000/svg",width:e,height:e,children:[(0,u.jsx)("circle",{cx:"400",cy:"400",fill:"#ff4500",r:"400"}),(0,u.jsx)("path",{style:{fill:i,stroke:"transparent"},d:"M666.8 400c.08 5.48-.6 10.95-2.04 16.24s-3.62 10.36-6.48 15.04c-2.85 4.68-6.35 8.94-10.39 12.65s-8.58 6.83-13.49 9.27c.11 1.46.2 2.93.25 4.4a107.268 107.268 0 0 1 0 8.8c-.05 1.47-.14 2.94-.25 4.4 0 89.6-104.4 162.4-233.2 162.4S168 560.4 168 470.8c-.11-1.46-.2-2.93-.25-4.4a107.268 107.268 0 0 1 0-8.8c.05-1.47.14-2.94.25-4.4a58.438 58.438 0 0 1-31.85-37.28 58.41 58.41 0 0 1 7.8-48.42 58.354 58.354 0 0 1 41.93-25.4 58.4 58.4 0 0 1 46.52 15.5 286.795 286.795 0 0 1 35.89-20.71c12.45-6.02 25.32-11.14 38.51-15.3s26.67-7.35 40.32-9.56 27.45-3.42 41.28-3.63L418 169.6c.33-1.61.98-3.13 1.91-4.49.92-1.35 2.11-2.51 3.48-3.4 1.38-.89 2.92-1.5 4.54-1.8 1.61-.29 3.27-.26 4.87.09l98 19.6c9.89-16.99 30.65-24.27 48.98-17.19s28.81 26.43 24.71 45.65c-4.09 19.22-21.55 32.62-41.17 31.61-19.63-1.01-35.62-16.13-37.72-35.67L440 186l-26 124.8c13.66.29 27.29 1.57 40.77 3.82a284.358 284.358 0 0 1 77.8 24.86A284.412 284.412 0 0 1 568 360a58.345 58.345 0 0 1 29.4-15.21 58.361 58.361 0 0 1 32.95 3.21 58.384 58.384 0 0 1 25.91 20.61A58.384 58.384 0 0 1 666.8 400zm-396.96 55.31c2.02 4.85 4.96 9.26 8.68 12.97 3.71 3.72 8.12 6.66 12.97 8.68A40.049 40.049 0 0 0 306.8 480c16.18 0 30.76-9.75 36.96-24.69 6.19-14.95 2.76-32.15-8.68-43.59s-28.64-14.87-43.59-8.68c-14.94 6.2-24.69 20.78-24.69 36.96 0 5.25 1.03 10.45 3.04 15.31zm229.1 96.02c2.05-2 3.22-4.73 3.26-7.59.04-2.87-1.07-5.63-3.07-7.68s-4.73-3.22-7.59-3.26c-2.87-.04-5.63 1.07-7.94 2.8a131.06 131.06 0 0 1-19.04 11.35 131.53 131.53 0 0 1-20.68 7.99c-7.1 2.07-14.37 3.54-21.72 4.39-7.36.85-14.77 1.07-22.16.67-7.38.33-14.78.03-22.11-.89a129.01 129.01 0 0 1-21.64-4.6c-7.08-2.14-13.95-4.88-20.56-8.18s-12.93-7.16-18.89-11.53c-2.07-1.7-4.7-2.57-7.38-2.44s-5.21 1.26-7.11 3.15c-1.89 1.9-3.02 4.43-3.15 7.11s.74 5.31 2.44 7.38c7.03 5.3 14.5 9.98 22.33 14s16 7.35 24.4 9.97 17.01 4.51 25.74 5.66c8.73 1.14 17.54 1.53 26.33 1.17 8.79.36 17.6-.03 26.33-1.17A153.961 153.961 0 0 0 476.87 564c7.83-4.02 15.3-8.7 22.33-14zm-7.34-68.13c5.42.06 10.8-.99 15.81-3.07 5.01-2.09 9.54-5.17 13.32-9.06s6.72-8.51 8.66-13.58A39.882 39.882 0 0 0 532 441.6c0-16.18-9.75-30.76-24.69-36.96-14.95-6.19-32.15-2.76-43.59 8.68s-14.87 28.64-8.68 43.59c6.2 14.94 20.78 24.69 36.96 24.69z"})]})}var K=i(181307),J=i(475446),Q=i(382745);function ee(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const te=48,ie="#111111",ne="#EFEFEF",oe={backgroundColor:"#ffffff",border:"none",padding:0},re=new Set(["JP","TW","TH"]),ae=new Set(["US","UK","CA","AU","DE"]),se=e=>{(0,D.default)((t=>{t&&(t.getUserID()?e():t.login((()=>{e()})))}),L.Z)};class le extends n.Component{constructor(...e){super(...e),ee(this,"state",{whatsappInviteData:null,inviteData:null,whatsappURL:"",whatsAppLogged:!1,copyLinkLogged:!1}),ee(this,"mounted",!1),ee(this,"logShareInviteLink",(()=>{const{copyLinkLogged:e,inviteData:t}=this.state,i=this.getShareOptions(12);e||(V.Z.logShareInvite(i,t),this.setState({copyLinkLogged:!0}))})),ee(this,"selectText",(e=>{e.target.select()}))}componentDidMount(){this.mounted=!0,this.getWhatsAppURL()}componentWillUnmount(){this.mounted=!1}getShareOptions(e){const{sharedObject:t}=this.props;return{invite_category:t.type===l.d.SEARCH?10:3,invite_channel:e,object_type:t.type,object_id:t.id,name:t.name,description:t.description||"",path:t.url,picture:t.imageUrl}}getSendDisplayText(e){switch(e){case l.d.BOARD:return this.props.i18n._("Send this board","Sharesheet.ShareSocialBar","social media sharing board");case l.d.PIN:return this.props.i18n._("Send this Pin","Sharesheet.ShareSocialBar","social media sharing Pin");case l.d.PINNER:return this.props.i18n._("Send this profile","Sharesheet.ShareSocialBar","social media sharing pinner profile");default:return""}}getWhatsAppURL(){const e=this.getShareOptions(10);V.Z.createShareInviteData(e).then((e=>{const t=e.message;if(t){const i=encodeURIComponent(t);this.setState({whatsappInviteData:e,whatsappURL:"https://web.whatsapp.com/send?text="+i})}else this.setState({whatsappURL:"https://web.whatsapp.com/send?text="+(0,O.Z)(this.props.sharedObject.url)})}))}checkWritePermissions(){return!!G.Z.isWriteBanned()}handleSocialShareClick(e){if(this.checkWritePermissions())return;let t=46;"facebook"===e?(this.openFacebookDialog(),t=257):"twitter"===e?(this.openTwitterDialog(),t=256):"messenger"===e?(this.openFbMessengerDialog(),t=950):"whatsapp"===e?(this.openWhatsAppDialog(),t=951):"pincode"===e?this.props.onCreatePincodeClick&&this.props.onCreatePincodeClick():"copylink"===e?(this.openShareUrlLink(),t=100):"email"===e?(this.openEmailDialog(),t=258):"line"===e?(this.openLineDialog(),t=952):"reddit"===e&&(this.openRedditDialog(),t=this.props.showRedditPinShare?12790:12791),this.props.onExternalSend&&this.props.onExternalSend(),(0,T.j)(101,{component:153,element:t})}openEmailDialog(){this.props.onEmailIconClick()}openFacebookDialog(){se((()=>{V.Z.shareFacebookInvite(this.getShareOptions(5))}))}openFbMessengerDialog(){se((()=>{V.Z.shareFbMessengerInvite(this.getShareOptions(6))}))}openWhatsAppDialog(){const e=this.getShareOptions(10);this.state.whatsAppLogged||(V.Z.logShareInvite(e,this.state.whatsappInviteData),this.setState({whatsAppLogged:!0}))}openShareUrlLink(){this.logShareInviteLink()}openTwitterDialog(){V.Z.shareTwitterInvite(this.getShareOptions(9))}openLineDialog(){V.Z.shareLineInvite(this.getShareOptions(8))}openRedditDialog(){V.Z.shareRedditInvite(this.getShareOptions(29))}renderShareOptions(){const{sharedObject:e,onCreatePincodeClick:t,showLineShare:i,showRedditPinShare:o,activateWebRedditPinShareExp:r,showRedditBoardShare:a,activateWebRedditBoardShareExp:s,i18n:l}=this.props;return(0,u.jsxs)(n.Fragment,{children:[(0,u.jsxs)(c.kC,{alignItems:"stretch",justifyContent:"around",children:[i&&(0,u.jsxs)(M.Z,{iconSize:te,marginEnd:!0,children:[(0,u.jsx)("button",{"aria-label":l._("Share on LINE","sharesheet.shareSocialBar.ShareLine","Button that will share via Line"),onClick:()=>this.handleSocialShareClick("line"),style:oe,children:(0,u.jsx)(X,{size:48})}),(0,u.jsx)(Z.Z,{text:l._("LINE","sharesheet.shareSocialBar.ShareLineLabel","Line button label")})]}),(0,u.jsxs)(M.Z,{iconSize:te,marginEnd:!0,children:[(0,u.jsx)("button",{"aria-label":l._("Share on WhatsApp","sharesheet.shareSocialBar.ShareWhatsapp","Button that will share via WhatsApp"),onClick:()=>this.handleSocialShareClick("whatsapp"),style:oe,tabIndex:"-1",children:(0,u.jsx)(c.iP,{rounding:"circle",role:"link",href:this.state.whatsappURL,target:"blank",children:(0,u.jsx)(q,{size:te})})}),(0,u.jsx)(Z.Z,{text:l._("WhatsApp","sharesheet.shareSocialBar.ShareWhatsappLabel","WhatsApp button label")})]}),(0,u.jsxs)(M.Z,{iconSize:te,marginEnd:!0,children:[(0,u.jsx)("button",{"aria-label":l._("Share on Facebook","sharesheet.shareSocialBar.ShareFacebook","Button that will share via Facebook"),onClick:()=>this.handleSocialShareClick("facebook"),style:oe,children:(0,u.jsx)(W,{size:te})}),(0,u.jsx)(Z.Z,{text:l._("Facebook","sharesheet.shareSocialBar.ShareFacebookLabel","Facebook button label")})]}),(0,u.jsxs)(M.Z,{iconSize:te,marginEnd:!i,children:[(0,u.jsx)("button",{"aria-label":l._("Share on Twitter","sharesheet.shareSocialBar.ShareTwitter","Button that will share via Twitter"),onClick:()=>this.handleSocialShareClick("twitter"),style:oe,"data-test-id":"twitter-share-icon",children:(0,u.jsx)(Y,{size:te})}),(0,u.jsx)(Z.Z,{text:l._("Twitter","sharesheet.shareSocialBar.ShareTwitterLabel","Twitter button label")})]}),!i&&(0,u.jsx)(M.Z,{iconSize:te,marginEnd:!1,children:this.renderEmail()})]}),(0,u.jsxs)(c.xu,{display:"flex",paddingY:4,children:[(o&&r().anyEnabled||a&&s().anyEnabled)&&(0,u.jsxs)(M.Z,{iconSize:te,marginEnd:!0,children:[(0,u.jsx)("button",{"aria-label":l._("Reddit","sharesheet.shareSocialBar.ShareReddit","Button that will share via Reddit"),onClick:()=>this.handleSocialShareClick("reddit"),style:oe,children:(0,u.jsx)($,{size:te})}),(0,u.jsx)(Z.Z,{text:l._("Reddit","sharesheet.shareSocialBar.ShareRedditLabel","Reddit button label")})]}),(0,u.jsx)(F,{backgroundColor:ne,iconColor:ie,iconSize:te,onCreatePincodeClick:t,sharedObject:e}),(0,u.jsx)(A.default,{sharedObject:e,backgroundColor:ne,iconColor:ie,iconSize:te,marginEnd:i,isCloseupActionBar:!1},"copylink"),i&&this.renderEmail()]})]})}renderEmail(){return(0,u.jsxs)(M.Z,{iconSize:te,marginEnd:!0,children:[(0,u.jsx)(c.xu,{display:"inlineBlock",children:(0,u.jsx)("button",{"aria-label":this.props.i18n._("Share on Email","sharesheet.shareSocialBar.ShareEmail","Button that will share via Email"),onClick:()=>this.handleSocialShareClick("email"),style:oe,children:(0,u.jsx)(N.Z,{backgroundColor:ne,iconColor:ie,size:te})})}),(0,u.jsx)(Z.Z,{text:this.props.i18n._("Email","Share via email","Share via email")})]},"email")}render(){const{sharedObject:e,paddingX:t}=this.props;return(0,u.jsxs)(c.xu,{paddingX:t,children:[(0,u.jsx)(c.kC,{alignContent:"center",alignItems:"center",height:64,justifyContent:"center",children:(0,u.jsx)(c.xv,{size:"lg",weight:"bold",children:this.getSendDisplayText(e.type)})}),(0,u.jsx)(c.xu,{paddingX:2,children:this.renderShareOptions()})]})}}function de(e){const t=(0,d.ZP)(),i=(0,s.ZP)(),n=(0,U.TH)(),o=i.isAuth&&re.has(i.country),r=i.isAuth&&ae.has(i.country),a=r&&(0,Q.uM)(n),l=(0,K.tc)("web_auth_pin_reddit_share"),c=r&&(0,Q.am)(n),p=(0,K.tc)("web_auth_board_reddit_share");return(0,u.jsx)(le,{...e,toastManagerContext:(0,J.F9)(),viewer:(0,s.ZP)(),showLineShare:o,i18n:t,showRedditPinShare:a,showRedditBoardShare:c,activateWebRedditPinShareExp:l,activateWebRedditBoardShareExp:p})}var ce=i(731164),ue=i(311866),pe=i(881220);function he(e){switch(e){case"AuthHomefeed":return 13;case"BaseBoardPinGrid":case"BoardActivityThreadItem":return 5;case"BoardMoreIdeasTabContent":return 23;case"ConversationView":return 19;case"FollowingFeedGrid":return 21;case"ProfilePromotablePinCard":return 1;case"RelatedPinGrid":case"RelatedProductsFeed":return 14;case"RelatedProductsExploreTab":return 4;case"ShoppingPackageItem":case"ShoppingSquareGridHomefeedBoth":case"ShoppingSquareGridPdp":case"ShoppingSquareGridRelatedProducts":case"ShoppingSquareGridRelatedProductsBoth":case"ProductPinsFeed":return 27;case"StoryPinFeedGrid":return 28;case"TodayArticleFeed":return 20;case"UserProfilePinGrid":default:return e}}var me=i(818270);const ge=(e,t)=>{const i={};return e.forEach((e=>{i[e]=t})),i};const fe=(0,o.connect)(null,(e=>({createConversation:t=>e((0,E.i)(t)),sendMessage:t=>e(t)})))((function(e){const t=(0,d.ZP)(),[i,o]=(0,n.useState)(!1),[r,a]=(0,n.useState)(null),[p,h]=(0,n.useState)({}),[g,f]=(0,n.useState)(""),[_]=(0,n.useState)(((e,t)=>"today_article"===e?t._("Check out this article on Pinterest!","sendObject.initialTextValue.todayArticle","pre-populated share message when a user tries to send a Today Article"):"")(e.sendType,t)),{showOneToast:v}=(0,J.F9)(),{surface:y}=(0,me.$Z)(),b=(0,s.ZP)(),w=(t,i)=>{o(!1),e.onMessageSent(),((t,i)=>{const{sharedObject:n}=e,o=n.id;ce.Z.increment("web.sharesheet.internal.send",1,{status:"success"}),(0,T.j)(180,{element:276,objectId:o,conversation_id:t,pin_id:i})})(t,i)},S=e=>{ce.Z.increment("web.sharesheet.internal.send",1,{status:"fail"});const t=e.message_detail||e.message;t&&v((({onHide:e})=>(0,u.jsx)(pe.Z,{variant:"error",duration:5e3,onHide:e,text:t})))},P=async(t,i,n)=>{const{createConversation:o,sharedObject:r,sendType:a}=e,s=r.id,l={emails:i,user_ids:t,text:n,source:he(y)};l[a]=s;const d=ue.ZP.create("ConversationsResource",l);try{const e=await d.callCreate(),n=e&&e.resource_response.data;o(n),w(n.id,"pin"===a?s:null),t.length>0?h({...p,...ge(t,n.id)}):h({...p,...ge(i,n.id)})}catch(c){S(c)}},j=(t,i)=>{"conversation_share_suggestion"===t.type?((t,i,n)=>{const{sendMessage:o,sharedObject:r,sendType:a}=e;let s;switch(a){case"pin":s="pinId";break;case"board":s="boardId";break;case"did_it":s="didItId";break;case"user":case"pinner":s="userId"}const l=s?(0,E.QW)(t,{text:i,[s]:r.id,source:he(y)},void 0,b):void 0;l&&(o(l),l.getPromise().then((()=>{w(t,"pin"===a?r.id:null),h({...p,[t]:t})})).catch((e=>{S(e)})))})(t.id,i):"contact_share_suggestion"!==t.type&&"user_share_suggestion"!==t.type&&"user"!==t.type||!t.username?P([],[t.email],i):P([t.id],[],i),(0,T.j)(101,{component:56,element:276})},I=(t,i)=>{e.sendType!==l.d.SEARCH||i?j(t,i):ue.ZP.create("ShareLinkResource",{invite_category:10,url:e.sharedObject.url}).callCreate().then((e=>Promise.resolve(e.resource_response.data)),(e=>Promise.reject(e))).then((e=>{const i=e.message;j(t,i)}))},C=()=>{o(!1),a(null)},{onCreatePincodeClick:k,onShowImport:O,sendType:A,sharedObject:N,isFlyout:L,onHide:D,onExternalSend:B}=e,Z="email"===r?(0,u.jsx)(x,{initialTextValue:_,isFlyout:L,objectId:N.id,objectType:A,onCancelDraft:C,onHide:D,onSendMessage:I}):(0,u.jsx)(m,{initialTextValue:_,isFlyout:L,objectId:N.id,objectType:A,onCancelDraft:C,onHide:D,onSendMessage:I,recipient:"object"==typeof r?r:void 0});return i?Z:(0,u.jsxs)(c.xu,{color:"white",children:[(0,u.jsx)(de,{onCreatePincodeClick:k,onEmailIconClick:()=>{o(!0),a("email")},onExternalSend:B,onHide:D,paddingX:4,sharedObject:N}),(0,u.jsx)(c.xu,{children:(0,u.jsx)(R,{isFlyout:L,onChange:({value:e})=>{f(e),(0,T.j)(4113,{component:13029,element:1043})},onHide:D,onSendMessage:I,onShowImportContacts:O,onShowSendDraft:e=>{o(!0),a(e),f("")},paddingX:4,sentHistory:p,value:g})})]})}));var _e=i(294184),xe=i.n(_e),ve=i(525974);const ye=["facebook","google"];function be(e,t){return"facebook"===e?t._("Facebook"):"twitter"===e?t._("Twitter"):"google"===e?t._("Google"):t._("Other")}function we(e){const t=(0,d.ZP)(),i=xe()("sendShare",e.network),n=function(e,t,i){return"facebook"===e?i._("Friends who are on Pinterest"):"google"===e&&t&&-1!==t.indexOf("@gmail")?t:null}(e.network,e.email,t);return(0,u.jsx)("a",{onClick:e.onClick,role:"button",children:(0,u.jsxs)("div",{className:i,children:[(0,u.jsx)("em",{className:"icon"}),(0,u.jsxs)("div",{className:"networkInfo",children:[(0,u.jsx)("h4",{className:"title",children:be(e.network,t)}),n?(0,u.jsx)("div",{className:"subtitle",children:n}):null]})]})})}function Se({onBack:e}){const t=(0,d.ZP)(),i=(0,s.ZP)(),n=i.isAuth?i.email:null,o=ye.filter((e=>!i.isAuth||!1===i.socialNetwork[e].connected));return(0,u.jsxs)("div",{className:"SocialConnectPanel sendShare",children:[(0,u.jsxs)("div",{className:"header",children:[(0,u.jsx)("div",{className:"backNav",children:(0,u.jsxs)("a",{onClick:e,role:"button",children:[(0,u.jsx)("span",{className:"icon"}),(0,u.jsx)("span",{className:"label",children:t._("Back")})]})}),(0,u.jsx)("div",{className:"prompt",children:t._("Upload contacts from...")})]}),(0,u.jsx)("ul",{className:"socialConnectOptions",children:o.map((e=>(0,u.jsx)("li",{style:{borderLeft:"none"},children:(0,u.jsx)(we,{email:n,network:e,onClick:()=>function(e,t){ve.Z.instance().handleConnect(e,!0,{},t)}(e,t)})},e)))})]})}function Pe({classNames:e="",isFlyout:t=!1,onCreatePincodeClick:i,onExternalSend:o,onHide:r,sendType:a,sharedObject:s,viewType:l,viewParameter:d}){const[p,h]=(0,n.useState)(!1),[m,g]=(0,n.useState)(!1);(0,n.useEffect)((()=>((0,T.j)(7120,{objectId:s.id,view:l,viewParameter:d}),()=>{(0,T.j)(7121,{objectId:s.id,view:l,viewParameter:d});const e=m?7493:7492;(0,T.j)(e,{view:l,viewParameter:d})})),[]);const f=()=>{h(!0)},_=()=>{h(!1)},x=()=>{g(!0)};return p?(()=>{const e=t?"SendObjectBase sendShare":"";return(0,u.jsx)("div",{className:e,children:(0,u.jsx)(Se,{onBack:_})})})():(0,u.jsx)(c.xu,{overflow:"hidden",children:(0,u.jsx)(fe,{isFlyout:t,onCreatePincodeClick:i,onHide:r,onShowImport:f,onMessageSent:x,onExternalSend:o,sendType:a,sharedObject:s})})}},845555:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(988089),o=i(883119),r=i(785893);const a=({text:e})=>(0,r.jsx)(o.xv,{align:"center",size:"sm",children:(0,r.jsx)(n.Z,{maxWidthPx:128,maxHeightPx:50,children:e})})},504534:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(785893);const r=({iconSize:e,marginEnd:t,children:i})=>(0,o.jsx)(n.xu,{alignItems:"center",direction:"column",display:"flex",marginEnd:t?2:0,width:e+24,children:i})},278646:(e,t,i)=>{i.d(t,{L:()=>g,t:()=>f});var n=i(904192),o=i(73697),r=i(549156),a=i(174523),s=i(302199),l=i(946753),d=i(585967),c=i(883119),u=i(785893);function p({count:e,ratingValue:t}){return Boolean(t&&"None"!==t&&!!e)}function h({count:e,countFormat:t,textSize:i}){const{locale:n}=(0,d.B)(),o=(0,a.ZP)(),p=(0,s.Z)();return(0,u.jsx)(c.xv,{size:i,children:(0,u.jsx)(r.Z,{id:"ratings-count-text",display:"inlineBlock",children:"text"===t?(0,l.nk)(o.ngettext("{{ count }} rating","{{ count }} ratings",e,"closeup.ratings.count","total ratings count"),{count:e}).join(""):p(n,e,{shortform:!0,shortform_maximum_fraction_digits:1})})})}function m({count:e,countFormat:t,ratingTextSize:i,ratingValue:r,shippingInfo:a,showDot:s}){const l=p({count:e,ratingValue:r}),{free_shipping_price:d,free_shipping_value:c}=a||{},m=l&&!!r&&(0,u.jsx)(n.Z,{rating:r,width:12});return{rating:m&&l&&!!e&&(0,u.jsx)(h,{count:e,countFormat:t,textSize:i}),shipping:Number.isFinite(c)&&(0,u.jsx)(o.ZP,{freeShippingPrice:d,freeShippingValue:c,dot:s?"Â· ":""}),stars:m}}function g({count:e,countFormat:t,ratingValue:i,shippingInfo:n}){const{rating:o,shipping:r,stars:a}=m({count:e,countFormat:t,ratingTextSize:"md",ratingValue:i,shippingInfo:n,showDot:!1});return(0,u.jsxs)(c.xu,{display:"flex",direction:"column",marginTop:1,children:[(0,u.jsxs)(c.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[a,o&&(0,u.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:"number"===t?"5px":""}},display:"inlineBlock",children:o})]}),r&&(0,u.jsx)(c.xu,{marginTop:a?1:0,children:(0,u.jsx)(c.xv,{color:"gray",size:"md",children:r})})]})}function f({count:e,countFormat:t,ratingValue:i,shippingInfo:n}){const o=p({count:e,ratingValue:i}),{rating:r,shipping:a,stars:s}=m({count:e,countFormat:t,ratingTextSize:"lg",ratingValue:i,shippingInfo:n,showDot:o});return(0,u.jsxs)(c.xu,{display:"flex",direction:"row",marginTop:2,alignItems:"center",children:[s,r,a&&(0,u.jsx)(c.xu,{marginStart:s?1:0,children:(0,u.jsx)(c.xv,{color:"darkGray",size:"lg",children:a})})]})}},344886:(e,t,i)=>{i.d(t,{Z0:()=>n,qA:()=>o,_z:()=>r,fM:()=>a,$O:()=>s,Xv:()=>l,GZ:()=>d,OE:()=>c,zX:()=>u});const n=40,o=4,r=106,a=133,s=.1,l=10,d=246,c=197,u=236},172738:(e,t,i)=>{i.r(t),i.d(t,{SendButton:()=>u,default:()=>p});var n=i(533127),o=i(975151),r=i(883119),a=i(785893);const s={boxShadow:"0 0 0 4px rgba(0, 132, 255, 0.5)",outline:0};function l({accessibilityLabel:e,buttonColor:t,buttonText:i,handleClick:n,icon:l}){return(0,a.jsx)(o.Z,{children:({active:o,focused:d,hovered:c,onBlur:u,onFocus:p,onMouseDown:h,onMouseEnter:m,onMouseLeave:g,onMouseUp:f})=>{let _={borderRadius:24};if(c){const e="red"===t?"rgb(216,0,33)":"rgb(226, 226, 226)";_={..._,backgroundColor:e}}if(o){const e="red"===t?"rgb(207,0,31)":"rgb(218, 218, 218)";_={..._,backgroundColor:e}}return d&&(_={..._,...s}),(0,a.jsx)("button",{"aria-label":e,style:{display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none"},onBlur:u,onFocus:p,onMouseDown:h,onMouseEnter:m,onMouseLeave:g,onMouseUp:f,onClick:n,children:(0,a.jsx)(r.xu,{color:t,rounding:2,dangerouslySetInlineStyle:{__style:_},children:(0,a.jsxs)(r.xu,{display:"flex",minHeight:40,dangerouslySetInlineStyle:{__style:{padding:"10px 14px"}},children:["share"===l&&(0,a.jsxs)(r.xu,{children:[(0,a.jsx)(r.JO,{accessibilityLabel:"",icon:"share",color:"darkGray",size:18}),(0,a.jsx)(r.xu,{paddingX:3})]}),(0,a.jsx)(r.xv,{align:"center",color:"red"===t?"white":"darkGray",weight:"bold",children:i})]})})})}})}var d=i(174523),c=i(255539);const u=({buttonType:e,iconColor:t,handleSendShareFlyoutButtonClick:i,svgPath:o,isSVG:r,iconOnly:s})=>{const c=(0,d.ZP)(),u="icon"===e,p=r&&o?o:"share",h={accessibilityLabel:c._("Send","Accessible label for button to send this pin","Accessible label for button to send this pin"),handleClick:i,icon:p};return u?(0,a.jsx)(n.Z,{...h,isSVG:r,iconOnly:s,iconColor:t}):(0,a.jsx)(l,{...h,buttonColor:"lightGray",buttonText:c._("Send","Text for button to send this pin","Text for button to send this pin")})},p=c.Z.makeSendShareButton(u)},101161:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(584489),o=i(6582),r=i(784655);const a=({pin:e,viewParameter:t,viewType:i})=>{const{id:a,videos:s}=e,l=(0,r.VX)(e),d=(0,r.jL)(e);let c;if((0,r.iR)(s)&&s){const{video_list:e={}}=s,t=e[Object.keys(e)[0]];c=t&&t.duration}return()=>{n.Z.instance.dispatch((0,o.c)({id:a,isProduct:l,isPromoted:d,videoDuration:c,viewParameter:t,viewType:i,type:"pin"}))}}},647560:(e,t,i)=>{i.d(t,{ZP:()=>E});var n=i(667294),o=i(40142),r=i(484898),a=i(727407),s=i(974780),l=i(80078),d=i(81260),c=i(731164),u=i(172738),p=i(549135),h=(i(255539),i(174523)),m=i(883119),g=i(785893);function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const _={__path:"M12 18.5A6.508 6.508 0 0 1 5.5 12c0-1.706.689-3.307 1.835-4.5H6.5a1 1 0 1 1 0-2h4.185v4.474a1 1 0 0 1-2 0V8.972A4.505 4.505 0 0 0 7.5 12c0 2.481 2.019 4.5 4.5 4.5s4.5-2.019 4.5-4.5a4.49 4.49 0 0 0-3.112-4.283 1 1 0 1 1 .615-1.902A6.482 6.482 0 0 1 18.5 12c0 3.584-2.916 6.5-6.5 6.5M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0"},x={overlay:{__style:{backgroundColor:"#000"}}};class v extends n.PureComponent{constructor(...e){super(...e),f(this,"setSendButton",(e=>{this.sendButton=e})),f(this,"handleRestartVideo",(({event:e})=>{e&&e.stopPropagation&&e.stopPropagation();const{onRestartVideo:t}=this.props;t&&t({event:e}),c.Z.increment("web.video.endcard.share",1,{status:"restart",variant:"enabled_send_first"})})),f(this,"handleShareVideo",(()=>{const{onToggleFlyout:e,isFlyoutOpen:t,pinId:i}=this.props;e&&e(),t&&c.Z.increment("web.video.endcard.share",1,{status:"shareSheetOpen",variant:"enabled_send_first"}),(0,p.j)(101,{component:179,objectId:i,view:3,viewParameter:156,element:11731})})),f(this,"handleExternalSend",(()=>{c.Z.increment("web.video.endcard.share",1,{status:"shareSheetOpen",variant:"enabled_send_first"})})),f(this,"renderReplayButton",(()=>(0,g.jsx)(m.iP,{onTap:this.handleRestartVideo,rounding:2,children:(0,g.jsxs)(m.xu,{alignItems:"center",display:"flex",padding:2,children:[(0,g.jsx)(m.JO,{accessibilityLabel:this.props.i18n._("Watch again","Button when pressed restarts the video","Button when pressed restarts the video"),color:"white",dangerouslySetSvgPath:_,size:30}),(0,g.jsx)(m.xu,{margin:1}),(0,g.jsx)(m.X6,{color:"white",overflow:"normal",size:"sm",children:this.props.i18n._("Watch again","Clickable label when pressed restarts the video","Clickable label when pressed restarts the video")})]})}))),f(this,"renderShareButton",(()=>{const{gridDescription:e,imageSrc:t,isFlyoutOpen:i,onFlyoutDismiss:n,pinId:o}=this.props;return(0,g.jsxs)(m.xu,{alignItems:"center",display:"flex",padding:2,children:[(0,g.jsx)(u.default,{buttonType:"icon",gridDescription:e,imageSrc:t,isFlyoutOpen:i,onExternalSend:this.handleExternalSend,onFlyoutDismiss:n,onToggleFlyout:this.handleShareVideo,pinId:o,sendType:"pin",shareButtonRef:this.setSendButton,shownWithinMasonry:!0,iconOnly:!0}),(0,g.jsx)(m.xu,{margin:1}),(0,g.jsx)(m.iP,{onTap:this.handleShareVideo,rounding:2,children:(0,g.jsx)(m.X6,{color:"white",overflow:"normal",size:"sm",children:this.props.i18n._("Send","end.video.send.icon.label","Clickable label when pressed opens share sheet after video is finished")})})]})}))}componentDidMount(){const{pinId:e}=this.props;c.Z.increment("web.video.endcard.share",1,{status:"land",variant:"enabled_send_first"}),(0,p.j)(13,{component:179,objectId:e,view:3,viewParameter:156,element:11731})}render(){const{backgroundImage:e,naturalHeight:t,naturalWidth:i,pinTitle:n}=this.props;return(0,g.jsx)(m.xu,{children:(0,g.jsxs)(m.Ee,{alt:n||"",naturalHeight:t,naturalWidth:i,src:e,children:[(0,g.jsx)(m.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:x.overlay}),(0,g.jsx)(m.xu,{alignItems:"center",display:"flex",justifyContent:"center",position:"absolute",top:!0,left:!0,height:"100%",width:"100%",direction:"column",children:(0,g.jsxs)(m.xu,{position:"absolute",children:[(0,g.jsx)(m.xu,{children:this.renderShareButton()}),(0,g.jsx)(m.xu,{alignSelf:"center",children:this.renderReplayButton()})]})})]})})}}function y(e){const t=(0,h.ZP)();return(0,g.jsx)(v,{...e,i18n:t})}const b=({backgroundImage:e,naturalHeight:t,naturalWidth:i,onRestartVideo:n,pinTitle:o})=>{const r=(0,h.ZP)();return(0,g.jsx)(m.xu,{children:(0,g.jsxs)(m.Ee,{alt:o||"",naturalHeight:t,naturalWidth:i,src:e,children:[(0,g.jsx)(m.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,opacity:.8,dangerouslySetInlineStyle:x.overlay}),(0,g.jsx)(m.xu,{alignItems:"center",display:"flex",justifyContent:"center",position:"absolute",top:!0,left:!0,height:"100%",width:"100%",children:(0,g.jsx)(m.xu,{children:(0,g.jsx)(m.iP,{onTap:n,rounding:2,children:(0,g.jsxs)(m.xu,{alignItems:"center",display:"flex",padding:2,children:[(0,g.jsx)(m.JO,{accessibilityLabel:r._("Watch again","Button when pressed restarts the video","Button when pressed restarts the video"),color:"white",dangerouslySetSvgPath:_,size:30}),(0,g.jsx)(m.xu,{margin:1}),(0,g.jsx)(m.X6,{color:"white",overflow:"normal",size:"sm",children:r._("Watch again","Clickable label when pressed restarts the video","Clickable label when pressed restarts the video")})]})})})})]})})};var w=i(136686),S=i(226806),P=i(552443),j=i(428568),T=i(32529);function I(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class C extends n.Component{constructor(...e){super(...e),I(this,"state",{controls:!1,duration:0,fullscreen:!1,playing:!r.Z.isSafari()&&!!this.props.autoplay,ready:!1,seeking:!1,showEndCard:!1,volume:this.props.muted?0:1}),I(this,"setVideoPwtLoadingStop",((e=!1)=>{if(!s.Z)return;const{storyPinStepStopwatch:t,pinId:i,pwtSurfaceContext:n}=this.props;t&&(e||t.addAnnotation("video.startup.end"),t.addBinaryAnnotation("pin.id",i,"STRING"),t.addBinaryAnnotation("video",!0,"BOOL"),t.addBinaryAnnotation("preload",e,"BOOL"),t.addSubspan({name:"perceived_video_load",endTime:s.Z.now()}),t.stop()),n&&(e||n.addAnnotation("video.startup.end"),n.addBinaryAnnotation("pin.id",i,"STRING"),n.addBinaryAnnotation("video",!0,"BOOL"),n.markConstraintComplete(w._z),n.addSubspan("perceived_video_load",null,s.Z.now()),n.metricId.segment===w.zc&&n.removeConstraint(w.pM))})),I(this,"componentDidMount",(()=>{const{customThumbnail:e,video:t,preferMp4:i}=this.props,n=t.mp4,o=t.hlsv3||t.hls||null,{thumbnail:r}=i&&n||o||{},a=(s=e||r)&&document.querySelector(`video[poster="${s}"]`)||null;var s;4===(null==a?void 0:a.ready)&&(this.setState({ready:!0}),this.props.autoplay&&this.setVideoPwtLoadingStop(!0))})),I(this,"componentDidUpdate",((e,t)=>{!1===e.isPlaying&&this.props.isPlaying&&this.setState({playing:!0,controls:!0}),e.isPlaying&&!1===this.props.isPlaying&&this.props.showControls&&this.setState({playing:!1}),e.autoplay!==this.props.autoplay&&(this.setState({playing:!!this.props.autoplay}),this.props.autoplay&&this.state.ready&&this.setVideoPwtLoadingStop(!0)),e.muted!==this.props.muted&&this.setState({volume:this.props.muted?0:1})})),I(this,"handleTouch",(()=>{const{seeking:e}=this.state;e||this.setState((e=>({playing:!e.playing})))})),I(this,"handleShowControls",(()=>this.setState({controls:!0}))),I(this,"handleHideControls",(()=>this.setState({controls:!1}))),I(this,"handleReady",(()=>{const{ready:e}=this.state,{autoplay:t}=this.props;t&&!e&&this.setVideoPwtLoadingStop(),this.setState({ready:!0})})),I(this,"handleEnded",(({event:e})=>{const{customThumbnail:t,pinId:i,setCurrentVideo:n,loop:o,onEnded:r}=this.props;var a;e.stopPropagation(),o||(this.setState({playing:!1}),(a=t)&&a.endsWith(".gif")||(this.setState({showEndCard:!0}),n({pinId:i,isPromoted:!1,currentTime:0})),this.state.fullscreen&&this.exitFullscreen()),r&&r()})),I(this,"handlePause",(({event:e})=>{e.stopPropagation(),this.setState({playing:!1})})),I(this,"handlePlay",(({event:e})=>{e.stopPropagation(),this.setState({playing:!0})})),I(this,"handleDurationChange",(({duration:e})=>{this.setState({duration:e})})),I(this,"handleFullscreenChange",(({event:e,fullscreen:t})=>{e.stopPropagation(),this.setState({fullscreen:t})})),I(this,"handlePlayheadDown",(({event:e})=>{this.setState({seeking:!0})})),I(this,"handlePlayheadUp",(({event:e})=>{setTimeout((()=>{this.setState({seeking:!1})}),500)})),I(this,"handleRestartVideo",(({event:e})=>{e.stopPropagation(),this.setState({playing:!0,showEndCard:!1})})),I(this,"handleShareRestartVideo",(({event:e})=>{e.stopPropagation(),this.setState({playing:!0,showEndCard:!1})})),I(this,"handleVolumeChange",(({event:e,volume:t})=>{e.stopPropagation(),this.setState({volume:t})})),I(this,"exitFullscreen",(()=>{const e=window.document;(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())})),I(this,"renderCloseupVideoEndCard",((e,t,i,n)=>{const o={backgroundImage:e,naturalHeight:t,naturalWidth:i,onRestartVideo:this.handleShareRestartVideo},r={backgroundImage:e,naturalHeight:t,naturalWidth:i,onRestartVideo:this.handleRestartVideo},{flyoutShareProps:a}=this.props,s={gridDescription:a?a.gridDescription:"",imageSrc:a?a.imageSrc:"",isFlyoutOpen:!!a&&a.isFlyoutOpen,onFlyoutDismiss:a?a.onFlyoutDismiss:()=>{},onToggleFlyout:a?a.onToggleFlyout:()=>{},pinId:a?a.pinId:""};return n?(0,g.jsx)(b,{...r}):(0,g.jsx)(y,{...s,...o})}))}render(){const{autoplay:e,contextLogData:t={component:179,is_closeup_video:!0,objectId:this.props.pinId,view:3,viewParameter:156},customThumbnail:i,isPromoted:n,loop:o,onTimeChange:s,objectFit:c,preferMp4:u,preload:p,storyPinContext:h,showControls:f,variant:_,video:x,videoStartTime:v}=this.props;t.is_closeup_video=!0;const{controls:y,fullscreen:b,playing:w,showEndCard:S,volume:P}=this.state,j=r.Z.isSafari(),T=x.hlsv3||x.hls||null,{ideaPinSessionId:I}=h||{};if(!T&&!x.mp4)return null;const C=x.mp4,E=u&&C&&C.url||T&&[{type:"video/m3u8",src:T.url}]||void 0,{height:k,thumbnail:R,width:O}=u&&C||T||{},A=i||R;let N;return N="default"===_?0:"storyPin"===_?d.yR:2,(0,g.jsx)(m.zd,{willChangeTransform:!(j&&b),rounding:N,wash:!0,children:S?this.renderCloseupVideoEndCard(null!=A?A:"",null!=k?k:1,null!=O?O:1,n):(0,g.jsx)(m.iP,{onMouseEnter:f?this.handleShowControls:void 0,onMouseLeave:f?this.handleHideControls:void 0,onTap:this.handleTouch,rounding:2,children:(0,g.jsx)(a.Z,{contextLogData:{...t,...I&&{idea_pin_session_id:I},video_id:this.props.video.id,video_play_type:"video"},accessibilityMaximizeLabel:this.props.i18n._("Maximize","Maximize button on video","Maximize button on video"),accessibilityMinimizeLabel:this.props.i18n._("Minimize","Minimize button on video","Minimize button on video"),accessibilityMuteLabel:this.props.i18n._("Mute","Mute button on video","Mute button on video"),accessibilityPauseLabel:this.props.i18n._("Pause","Pause button on video","Pause button on video"),accessibilityPlayLabel:this.props.i18n._("Play","Play button on video","Play button on video"),accessibilityUnmuteLabel:this.props.i18n._("Unmute","Unmute button on video","Unmute button on video"),aspectRatio:(null!=O?O:1)/(null!=k?k:1),captions:"",controls:y,hlsConfig:{startLevel:l.VS},isAutoPlay:!!e,objectFit:c,onDurationChange:this.handleDurationChange,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onPause:this.handlePause,onPlay:this.handlePlay,onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onTimeChange:s,onVolumeChange:this.handleVolumeChange,preferMp4:u,playing:w,preload:p,poster:A,src:E,videoStartTime:v,volume:P,loop:o})})})}}I(C,"defaultProps",{loop:!1,showControls:!0});const E=(0,o.connect)(((e,t)=>{const{pinId:i,isPromoted:n}=t,o=e.ui.app?e.ui.app.videosAutoplaying:{organicVideosAutoplaying:{},promotedVideosAutoplaying:{}},{organicVideosAutoplaying:r,promotedVideosAutoplaying:a}=o;let s=null;return s=n?a[i]:r[i],{videoStartTime:s?s.currentTime:null,isPlaying:!s||!s.paused}}),((e,t)=>({setCurrentVideo:t=>e((0,T.jt)(t))})))((function(e){const t=(0,h.ZP)(),i=(0,j.g)(),n=(0,S.EV)(),o=(0,P.c)();return(0,g.jsx)(C,{...e,i18n:t,pwtSurfaceContext:n,storyPinContext:o,storyPinStepStopwatch:i})}))},852474:(e,t,i)=>{i.d(t,{t2:()=>o,ZP:()=>r});const n=()=>{var e,t;const i="undefined"!=typeof window?null===(e=window.navigator)||void 0===e||null===(t=e.connection)||void 0===t?void 0:t.effectiveType:void 0;let n,o=null===(r=window)||void 0===r||!r.devicePixelRatio||window.devicePixelRatio<=1?"1x":"2x";var r;return i?"4g"===i?n="40-80":(o="1x",n="0-1"):n="unknown",{downloadSpeedGroup:n,screenDimension:o}};function o(e){const{downloadSpeedGroup:t,screenDimension:i}=n(),o={"1x":e.V_EXP3,"2x":e.V_EXP5},r={"1x":e.V_EXP7,"2x":e.V_EXP7};return{unknown:o,"0-1":o,"1-5":{"1x":e.V_EXP4,"2x":e.V_EXP5},"5-10":{"1x":e.V_EXP5,"2x":e.V_EXP5},"10-20":{"1x":e.V_EXP6,"2x":e.V_EXP6},"20-40":r,"40-80":r,"80_or_above":r}[t][i]||e.V_720P||void 0}function r(e){const{video_list:t={}}=e,i=o(t),n=t.V_HLSV3_MOBILE||void 0;return i?{hlsv3:n,mp4:i}:{hlsv3:n}}},224982:(e,t,i)=>{function n(e,t){return{type:"CHANGE_CAROUSEL_SLOT_INDEX",payload:{pinId:e,index:t}}}i.d(t,{Z:()=>n})},698602:(e,t,i)=>{function n(e,t,i,n){return{type:"PIN_SHOW_UNDO_AND_FEEDBACK",payload:{id:e,value:!0,text:t,undoAction:i,undoText:n}}}function o(e){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!1}}}function r(e,t){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!0,text:t}}}function a(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!0}}}function s(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!1}}}function l(e){return{type:"PIN_SHOW_AD_REASONS_MODAL",payload:{id:e,value:!0}}}function d(e){return{payload:{id:e,value:!1},type:"PIN_SHOW_AD_REASONS_MODAL"}}i.d(t,{NA:()=>n,I1:()=>o,ZP:()=>r,Ib:()=>a,i0:()=>s,b9:()=>l,yj:()=>d})},153155:(e,t,i)=>{i.d(t,{W:()=>o,Y:()=>r});var n=i(311866);function o(e){return{type:"UPDATE_USER_SAVE_BEHAVIOR",payload:{saveBehavior:e}}}function r(e){return t=>n.ZP.create("UserResource",{user_id:e,field_set_key:"save_behavior"}).callGet().then((e=>{var i;const n=null==e||null===(i=e.resource_response)||void 0===i?void 0:i.data;t(o(n.save_behavior))}))}},616240:(e,t,i)=>{i.d(t,{dl:()=>d,Fl:()=>u,IC:()=>p,GG:()=>h,tW:()=>m,Pw:()=>g,k3:()=>f,su:()=>_});var n=i(300970),o=i(593482),r=i(221469),a=i(580849);const s=["AU","CA","GB","IE","NZ","US","FR","DE","AT","IT","ES","NL","BE","PT","CH","NL","BE","PT","CH","SE","NO","DK","FI"],l=["BR","CY","CZ","GR","HU","LU","MT","MX","RO","SK"],d=["AU","AT","BE","BR","CA","CY","CZ","DK","FI","FR","DE","GR","HU","IE","IT","LU","MT","NL","NZ","NO","PL","PT","RO","SK","ES","SE","CH","GB","US"],c=["US","CA"],u=e=>{if(l.includes(e.toUpperCase())){const e=a.K.fromGlobalContext(),{anyEnabled:t}=e.experiments.getWithActivation("advertiser_growth_qp_expansion");return t}return s.includes(e.toUpperCase())},p=(e,t,i)=>{const n={numDays:i},o=e[i]||{},r=e[2*i]||{};return t.forEach((e=>{const t=o[e]||0,i=r[e]?r[e]-t:0;n[e]={total:t,trend:i?(t-i)/i:0}})),n},h=e=>!!e&&c.includes(e.toUpperCase()),m=Object.freeze({NOT_ANSWERED:0,YES:1,NO:2,NOT_SURE:3}),g=({requestContext:e,history:t,pinId:i})=>{((e,t)=>{const i=(0,r.ru)("/business/convert",{next:t});e.push(i)})(t,(e=>e?`/business/ad_create?pinId=${e}`:"/business/ad_create")(i))},f=e=>{const t=e.trim().split(" ").filter((e=>!!e));return{firstName:t.length>0?t[0]:"",lastName:t.length>1?t.slice(1).join(" "):""}},_=e=>e.isAuth&&!e.isPartner&&!(0,o.Z)(null,e)&&!(0,n.Z)(null,e)},215484:(e,t,i)=>{function n(e){const t=e.rich_metadata&&e.rich_metadata.products&&e.rich_metadata.products[0]&&e.rich_metadata.products[0].additional_images;return!!(t&&t.length>0)}i.d(t,{Z:()=>n})},300970:(e,t,i)=>{i.d(t,{Z:()=>n});function n(e,t){if(!(e||{}).created_at&&!(t||{}).createdAt)return!1;let i="";t&&t.createdAt?i=t.createdAt:e&&e.created_at&&(i=e.created_at);const n=new Date(i);return n.setDate(n.getDate()+28),(new Date).getTime()<n.getTime()}},593482:(e,t,i)=>{i.d(t,{Z:()=>n});function n(e,t,i=28){if(!(e||{}).resurrection_info&&!(t||{}).resurrectionInfo)return!1;let n;n=t?((t||{}).resurrectionInfo||{}).resurrectionDate:((e||{}).resurrection_info||{}).resurrection_dt;const o=new Date,r=n?new Date(n):o;return r.setDate(r.getDate()+i),(new Date).getTime()<r.getTime()}},586840:(e,t,i)=>{function n(e={},t=[]){return Object.keys(e).reduce(((i,n)=>t.includes(n)?i:{...i,[n]:e[n]}),{})}i.d(t,{Z:()=>n})},365217:(e,t,i)=>{i.d(t,{P5:()=>a,tx:()=>s});var n=i(311866);const o=()=>{};const r={complaint:function(e,t){n.ZP.create("PinFeedbackResource",e).callUpdate().then((()=>t()))},followBoard:function(e,t){n.ZP.create("BoardFollowResource",e).callCreate().then((()=>t()))},followPinner:function(e,t){n.ZP.create("UserFollowResource",e).callCreate().then((()=>t()))},followTopic:function(e,t){n.ZP.create("InterestFollowResource",e).callCreate().then((()=>t()))},newsHubPinHide:function(e,t){n.ZP.create("NewsHubPinFeedbackResource",e).callUpdate().then((()=>t()))},promotedComplaint:function(e,t){n.ZP.create("PinFeedbackResource",e).callUpdate().then((()=>t()))},relatedPinHide:function(e,t){n.ZP.create("RelatedPinFeedbackResource",e).callUpdate().then((()=>t()))},reportPin:function(e,t){t()},showAdReasons:function(e,t){t()},unfollowBoard:function(e,t){n.ZP.create("BoardFollowResource",e).callDelete().then((()=>t()))},unfollowPinner:function(e,t){n.ZP.create("UserFollowResource",e).callDelete().then((()=>t()))},unfollowTopic:function(e,t){n.ZP.create("InterestFollowResource",e).callDelete().then((()=>t()))},unrelatedSearchPin:function(e,t){n.ZP.create("SearchPinFeedbackResource",e).callUpdate().then((()=>t()))}},a=["complaint","relatedPinHide","unrelatedSearchPin","promotedComplaint","newsHubPinHide","unfollowBoard","unfollowPinner","unfollowTopic"];function s(e,t,i=o){const n=r[e];return n?n(t,i):i()}},454217:(e,t,i)=>{i.d(t,{ZP:()=>s,yl:()=>l,XZ:()=>d,nb:()=>c,EF:()=>u});var n=i(180307),o=i(365217),r=i(266750);const a=e=>e.length>32?`${e.substring(0,32).trim()}...`:e,s=({i18n:e,interpolateNamedTemplate:t})=>({getLearnMoreUrl:e=>{switch(e){case 1:return n.Z.settings.HELP_PROMOTED_PINS_RETARGETED_PIN_URL;case 2:case 3:return n.Z.settings.HELP_PROMOTED_PINS_LOOKALIKE_TARGETING_URL;default:return n.Z.settings.HELP_PROMOTED_PINS_URL}},getRecommendationDescription:({ad_match_reason:i,board:n,feedbackType:o,makeNavigateLink:r,pinner:s,promoter:l,recommendationReason:d,sourceInterest:c})=>{switch(o){case"pfy":return e._("This Pin was inspired by your recent activity","Pin feedback reason","Pin feedback reason");case"pfyBoard":const{name:o,url:u}=d.board,p=r("navigation",u,o);return t(e._("This Pin was inspired by your board {{ boardLink }}","Pin feedback - inspired by your board","Pin feedback - inspired by your board"),{boardLink:p});case"topic":const{name:h,url_name:m}=c,g=r("topicUrl",`/topics/${m}`,h);return t(e._("This Pin was inspired by {{ formattedTopic }}","Pin feedback","Pin feedback"),{formattedTopic:g});case"followed":const f=`/${s.username}`,_=r("boardUrl",n.url,a(n.name)),x=r("pinnerUrl",f,a(s.full_name));return s.explicitly_followed_by_me?t(e._("This Pin is from {{ formattedPinner }}, a profile you follow","Pin feedback","Pin feedback"),{formattedPinner:x}):t(e._("This Pin is from {{ formattedBoard }}, a board you follow","Pin feedback","Pin feedback"),{formattedBoard:_});case"promoted":switch(i){case 1:case 2:case 3:return e._("This ad was personalized for you using info from one of our partners","Pin feedback","Pin feedback");default:const{full_name:i,username:n}=l,o=r("promotedLink",n?"/"+n+"/":"/",i);return t(e._("{{ promoterLink }} paid to have this Pin show up where\n          youâ€™d be more likely to notice it","Pin feedback","Pin feedback"),{promoterLink:o})}default:return null}},getFeedbackType({board:e,feedback:t,viewParameter:i,pin:{promoter:n,is_downstream_promotion:o,recommendation_reason:r},pinner:a}){const s=t&&t.type;return n&&!o?"promoted":s||((e=>!!e&&"FOLLOWED_INTEREST"!==e.reason&&"FOLLOWING_FEED"!==e.reason&&"RECENT_FOLLOWED_BOARD"!==e.reason&&!0)(r)?r.board?"pfyBoard":"pfy":r&&"FOLLOWED_INTEREST"===r.reason?"topic":e&&e.followed_by_me||a&&a.explicitly_followed_by_me?"followed":140===i||144===i||141===i||145===i||139===i||3173===i?"related":92===i?"default":3082===i?"newsHub":null)},getHidePinAction:({feedbackData:e,feedbackType:t,pinId:i,recommendationReasonId:n,pinFeedbackType:o,complaintReason:r,throughId:a,throughProperties:s,clientTrackingParams:l})=>{const d="promoted"===t;let c,u;switch(t){case"promoted":c="promotedComplaint";break;case"search":c="unrelatedSearchPin";break;case"related":c="relatedPinHide";break;case"newsHub":c="newsHubPinHide";break;default:c="complaint"}switch(t){case"search":u={query:e.query,pin_id:i};break;case"related":u={pin:i};break;case"newsHub":u={pinId:i,newsId:e.newsId};break;default:u={complaint_reason:r||0,pin_id:i,...n?{recommendation_reason_id:n}:{},feedback_type:o||1,promoted:d,...a?{through_id:a}:{},...s?{through_properties:s}:{},...l?{client_tracking_params:l}:{}}}return{action:c,actionOptions:u}},getUnfollowAction:({board:i,feedbackType:n,makeNavigateLink:o,pinner:a,sourceInterest:s})=>{if("topic"===n){if(s){const{id:i,name:n,url_name:a}=s,l=o("topicUrl",`/topics/${a}`,n,!0),d=t(e._("Weâ€™ll show you less Pins from {{ formattedTopic }} in the future.","pin.contextualMenu.feedback.unfollowTopic.subtitle","Confirmation text after unfollowing a topic"),{formattedTopic:l});return{action:"unfollowTopic",actionOptions:{interest_id:i,interest_list:r.X},title:"",subTitle:d}}}else if("followed"===n&&i&&a){const{id:n,name:r,url:s}=i||{},{explicitly_followed_by_me:l,full_name:d,username:c}=a,u=`/${c}`,p=o("boardUrl",s,r,!0),h=o("pinnerUrl",u,d,!0);let m=l?t(e._("Youâ€™ve unfollowed {{ formattedPinner }}â€™s Board {{ formattedBoard }}. You can follow it again by searching for it.","Confirmation text after unfollowing a board","Confirmation text after unfollowing a board"),{formattedPinner:h,formattedBoard:p}):t(e._("Youâ€™ve unfollowed {{ formattedBoard }}. You can follow it again by searching for it.","Confirmation text after unfollowing a board","Confirmation text after unfollowing a board"),{formattedBoard:p});return m=l?t(e._("You unfollowed {{ formattedPinner }} and wonâ€™t see Pins they save anymore.","Confirmation text after unfollowing a user","Confirmation text after unfollowing a user"),{formattedPinner:h}):t(e._("You unfollowed the board {{ formattedBoard }} and wonâ€™t see Pins saved to it anymore.","Confirmation text after unfollowing a board","Confirmation text after unfollowing a board"),{formattedBoard:p}),{action:"unfollowBoard",actionOptions:{board_id:n},title:"",subTitle:m}}return null}});function l(e){return null!=e&&e.reason_id?e.reason_id:null!=e&&e.board?e.board.id:null!=e&&e.pin?e.pin.id:null!=e&&e.interest?e.interest.id:""}function d(e){return null==e?void 0:e.through_properties}function c(e){switch(e){case"promoted":return 60;case"followed":case"topic":return 100;case"pfyBoard":case"pfy":return 58}}const u=(e,t,i,n,r,a,s)=>()=>{const l={...e,undo:!0};let d=t;"unfollowPinner"===t?d="followPinner":"unfollowBoard"===t?d="followBoard":"unfollowTopic"===t&&(d="followTopic"),(0,o.tx)(d,l),a(i),s(101,{component:0,element:11181,view:n,viewParameter:r})}},41743:(e,t,i)=>{i.d(t,{Z:()=>o});const n=["orig","736x","564x","474x","236x","170x"],o=(e,t)=>{const i=e[t];if(i)return i;const o=n.indexOf(t);if(o>=0)for(let r=o+1;r<n.length;r+=1){const t=e[n[r]];if(t)return t}return e["236x"]}},227340:(e,t,i)=>{i.d(t,{RC:()=>a,EU:()=>s,fs:()=>l,eK:()=>d,Ly:()=>c,hP:()=>u});var n=i(395047),o=i(537343);const r=e=>"string"==typeof e?e:"",a=e=>e.story_pin_data&&e.story_pin_data.metadata&&e.story_pin_data.metadata.pin_title||e.title,s=(e,t)=>e?e.trim().length>t?(0,o.ZP)(e.trim(),t).trim():e.trim():"",l=e=>{const{grid_title:t}=e||{},{hasRichAttributionTitle:i,hasPlaceInfo:n}=(e=>{const{place_summary:t,rich_summary:i}=e||{},n=i&&"mobile application"!==i.type_name;return{hasRichSummary:n,hasRichAttributionTitle:n&&i.display_name,hasPlaceInfo:!!t}})(e),o=a(e),r=s(t,200);return r||(i?(e=>{const{rich_summary:t}=e;let{apple_touch_icon_images:i,favicon_images:n}=t;return i=i||{},n=n||{},{faviconLink:i["50x"]||n["50x"]||i.orig||n.orig,siteName:t.site_name||e.domain,title:t.display_name}})(e).title:n?(e=>{const{place_summary:t}=e;return{faviconLink:t.source_icon,siteName:t.source_name||e.domain,title:t.name}})(e).title:e.rich_metadata&&e.rich_metadata.title?e.rich_metadata.title:e.story_pin_data_id&&o?o:null)},d=e=>{const t=e.pin_join||{},i=t.visual_annotation||[],r=i.map((e=>(t.annotations_with_links||{})[e]||{name:e,url:""}));let a="";const s=(e.rich_metadata||{}).description||"",l=e.closeup_unified_description||"",d=(e=>e.rich_summary&&e.rich_summary.display_name||e.place_summary&&e.place_summary.name||"")(e).toLocaleLowerCase().trim(),c=s.toLocaleLowerCase().trim(),u=l.toLocaleLowerCase().trim();return l&&l.length>3&&u!==d?a=l:s&&s.length>3&&c!==d&&(a=s),a&&(a=(0,n.Z)((0,o.ZP)(a,496)).trim()),{description:a,vaseAnnotations:i,annotationsWithLinks:r}},c=(e,t,i)=>{const n=(i||[]).map((e=>e.name)),o=e=>(e||[])[0]||null;return l(e)||o(t)||o(n)||e.title},u=(e,t,i)=>{const n=r(e);let o=n;if(i){const e=i.seo_description;if(e){const i=e.toLowerCase(),a=r(t);i!==n.toLowerCase()&&i!==a.trim().toLowerCase()&&(o=e)}let a=i.visual_annotation;a&&(a=a.join(", "),o&&(o+=" "),o+=a)}return o}},674245:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var n=i(384832),o=i(311866),r=i(180307),a=i(658551);let s=!1;const l=(e,t,i="en-US")=>{(0,a.c5)((0,n.Z)(i),a.Jg.FACEBOOK).then((()=>{const i=window.FB;i&&(s||(i.init({appId:r.Z.settings.FACEBOOK_API_KEY,status:!0,version:"v2.2"}),FB.Event.subscribe("auth.statusChange",(()=>{t()&&l((e=>{if(!e.getUserID())return;const t=e.getAccessToken();if(t){o.ZP.create("UserSocialNetworkResource",{facebook_token:t}).callUpdate({showError:!1})}}),t)})),s=!0,window.fb_init=2),e(i))})),window.fb_init=1},d=l},266750:(e,t,i)=>{i.d(t,{X:()=>n});const n="favorited"},73697:(e,t,i)=>{i.d(t,{ZP:()=>l});var n=i(174523),o=i(946753),r=i(785893);function a({dot:e}){const t=(0,n.ZP)();return(0,o.nk)(t._("{{ dot }}Free shipping","closeup.product.shipping","product shipping info"),{dot:e}).join("")}function s({dot:e,freeShippingPrice:t}){const i=(0,n.ZP)();return(0,o.nk)(i._("{{ dot }}Free shipping with {{ shippingPrice }}+","closeup.product.shipping","product shipping info"),{dot:e,shippingPrice:t}).join("")}function l({freeShippingPrice:e,freeShippingValue:t,dot:i}){return 0===t?(0,r.jsx)(a,{dot:i||""}):e?(0,r.jsx)(s,{dot:i||"",freeShippingPrice:e}):null}},428568:(e,t,i)=>{i.d(t,{T:()=>a,g:()=>s});var n=i(169039);const{Provider:o,useHook:r}=(0,n.Z)({name:"story_pin_step",v2LoggerMetricName:701,sampleRate:1}),a=o,s=r},904192:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),o=i(498913),r=i.n(o),a=i(883119),s=i(785893);const l=({fill:e,width:t,color:i})=>{const o="half"===e?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(a.xu,{position:"absolute",children:(0,s.jsx)(a.JO,{accessibilityLabel:"",color:"darkGray",icon:"star-half",size:12})}),(0,s.jsx)(a.JO,{accessibilityLabel:"",color:"gray",icon:"star",size:12})]}):(0,s.jsx)(a.JO,{accessibilityLabel:"",color:"full"===e?"darkGray":"gray",icon:"star",size:12});return(0,s.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{marginRight:"3px"}},display:"inlineBlock",children:o})};function d({max_rating:e,rating:t,width:i,color:o}){const a=[],d=function(e,t){return 5*(t=t<=e?t:e)/e}(parseFloat(e)||5,parseFloat(t)||0);if(Number.isNaN(d))return null;const c=Math.floor(d),u=d-c;return r()(c,(e=>a.push((0,s.jsx)(l,{color:o,fill:"full",width:i},e)))),u>=.75?a.push((0,s.jsx)(l,{color:o,fill:"full",width:i},a.length)):u>=.25&&a.push((0,s.jsx)(l,{color:o,fill:"half",width:i},a.length)),r()(5-a.length,(()=>a.push((0,s.jsx)(l,{color:o,fill:"empty",width:i},a.length)))),(0,s.jsx)(n.Fragment,{children:a})}},979593:(e,t,i)=>{i.d(t,{V:()=>n});const n=e=>{const{thumbnail:t,url:i,width:n,height:o,duration:r}=e||{};return t&&i&&n&&o&&{thumbnail:t,url:i,width:n,height:o,duration:r}||void 0}},552443:(e,t,i)=>{i.d(t,{o:()=>a,c:()=>s});var n=i(667294),o=i(785893);const r=(0,n.createContext)(null);function a({children:e,closeupPaneWidth:t,headerHeight:i,ideaPinSessionId:n,isLandingPage:a,loadFonts:s,renderStoryPinMediaLayout:l,renderStoryPinSplitLayout:d,renderStoryPinText:c,renderStoryPinPage:u,productPins:p,setIdeaPinSessionId:h}){const m={closeupPaneWidth:t,headerHeight:i,ideaPinSessionId:n,isLandingPage:a,loadFonts:s,renderStoryPinMediaLayout:l,renderStoryPinSplitLayout:d,renderStoryPinText:c,renderStoryPinPage:u,productPins:p,setIdeaPinSessionId:h};return(0,o.jsx)(r.Provider,{value:m,children:e})}const s=()=>(0,n.useContext)(r)},760620:(e,t,i)=>{i.d(t,{Z:()=>o});const n=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,o=e=>n.test(e)},204478:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t)=>e.length>t?e.substr(0,t-3).trim()+"â€¦":e},395047:(e,t,i)=>{i.d(t,{Z:()=>o});const n=/\s\s+/g,o=e=>e.replace(n," ")},537343:(e,t,i)=>{i.d(t,{ZP:()=>n});function n(e,t=80,i="â€¦",n=false){let o;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t]||n)o=e.substring(0,t);else{const i=e.lastIndexOf(" ",t);o=e.substring(0,i)}return o=o.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""),o+i}},988089:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294),o=i(883119),r=i(785893);class a extends n.Component{constructor(e){var t,i,o;super(e),o={manualTruncate:!1},(i="state")in(t=this)?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,this.ref=(0,n.createRef)()}componentDidMount(){const{maxHeightPx:e,shaveOptions:t={}}=this.props,n=this.ref&&this.ref.current;if(!n)return;const o=void 0===n.textContent?"innerText":"textContent",r=n[o];("boolean"!=typeof t.spaces||t.spaces?r.split(" "):r).length<2?this.setState({manualTruncate:!0}):i.e(14118).then(i.bind(i,448433)).then((({default:i})=>{i(n,e,t)}))}render(){const{maxWidthPx:e,maxHeightPx:t,inline:i=!1}=this.props,{manualTruncate:n}=this.state,a={maxWidth:e,maxHeight:t},s=i?{display:"inline",...a}:{...a};return n?(0,r.jsx)(o.xu,{overflow:"hidden",dangerouslySetInlineStyle:{__style:s},ref:this.ref,children:this.props.children}):(0,r.jsx)(o.xu,{ref:this.ref,dangerouslySetInlineStyle:{__style:s},children:this.props.children})}}const s=a},477342:(e,t,i)=>{function n(e){return e.filter((e=>e.is_stela))}function o(e){return e.filter((e=>!!e.label))}i.d(t,{k:()=>n,m:()=>o})},526947:(e,t,i)=>{i.r(t),i.d(t,{RoleBasedAccessControlProvider:()=>v,useRoleBasedAccessControlContext:()=>x});var n=i(667294),o=i(616627),r=i(535718),a=i(34411),s=i(181307),l=i(354783);const d=e=>{const t={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&("object"!=typeof e[i]||null===e[i]||Array.isArray(e[i])?t[(0,l.Z)(i)]=e[i]:t[(0,l.Z)(i)]=d(e[i]));return t},c=(e,t)=>{const i=[];for(const r in e)r!==t&&i.push({id:r,...d(e[r])});const n=i.sort((({user:{businessName:e}},{user:{businesName:t}})=>e.localeCompare(t))),o=new Map;for(const r of n)o.set(r.id,r);return o};var u=i(652382);const p={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},h=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}},m=e=>{const[t,i]=(0,n.useReducer)(h,p),o=(({dispatch:e,isEnabled:t,state:i})=>{const{orbacVisibility:o,disableProfileChanger:r,headerVisible:a}=i;return{changeProfile:(0,n.useCallback)((i=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:i})}),[t,e]),toggleORBACVisibility:(0,n.useCallback)((i=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:null!=i?i:!o})}),[t,e,o]),toggleDisableProfileChanger:(0,n.useCallback)((i=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:null!=i?i:!r})}),[t,e,r]),toggleHeaderVisibility:(0,n.useCallback)((i=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:null!=i?i:!a})}),[t,e,a])}})({dispatch:i,isEnabled:e,state:t}),{activeProfile:r,orbacVisibility:a}=t;(0,n.useEffect)((()=>{const e=(0,u.qn)("orbacActiveProfile",!1);e&&i({type:"SET_ACTIVE_PROFILE",payload:e})}),[]),(0,n.useEffect)((()=>{const e=(0,u.qn)("orbacVisibilty",!1);e&&i({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})}),[]),(0,n.useEffect)((()=>{(0,u.Nh)("orbacVisibility",a)}),[a]),(0,n.useEffect)((()=>{(0,u.Nh)("orbacActiveProfile",r)}),[r]);return{state:t,actions:o,receiveProfiles:(0,n.useCallback)(((e,t)=>{i({type:"LOAD_PROFILES",payload:c(e,t)})}),[i])}};var g=i(762803),f=i(785893);const{Provider:_,useHook:x}=(0,g.js)("RoleBasedAccessControlContext"),v=({children:e})=>{const t=(0,s.tc)("web_m10n_business_access_orbac_www"),i=(0,a.ZP)(),l=Boolean(i.isAuth&&i.isPartner&&t().anyEnabled),{state:d,actions:c,receiveProfiles:u}=m(l),{activeProfile:p,headerVisible:h,profiles:g=[]}=d,x=g?Array.from(g.values()):[],v=(0,o.Z)(x),y=!!(i.isAuth&&x.length>0)&&v,b=i.isAuth?i.id:"",w=i.isAuth?i.username:"",{changeProfile:S,toggleORBACVisibility:P,toggleDisableProfileChanger:j,toggleHeaderVisibility:T}=c;(0,n.useEffect)((()=>{l&&("string"!=typeof v?p||S(b):S(v))}),[v,b,l,S,p]),(0,n.useEffect)((()=>{l&&(y&&!h&&T(!0),!y&&h&&T(!1))}),[T,y,l,h,g]);const{data:I}=(0,r.Z)({name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0},dangerouslyDisableFetch:!l}),C=null==I?void 0:I.profiles;let E;i&&i.isAuth&&d.activeProfile===i.id?E={id:i.id,permissions:["OWNER"],user:{username:w,businessName:i.fullName,imgUrl:i.imageSmallUrl}}:p&&d.profiles&&(E=d.profiles.get(p)),(0,n.useEffect)((()=>{C&&u(C,b)}),[u,C,b]);const k=d.profiles?Array.from(d.profiles.values()):[];return(0,f.jsx)(_,{value:{profiles:k,headerVisible:d.headerVisible,activeProfile:E,changeProfile:S,toggleORBACVisibility:P,toggleDisableProfileChanger:j,toggleHeaderVisibility:T},children:e})}},767523:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(181307),o=i(526947);const r=()=>{const e=(0,n.tc)("web_m10n_business_access_orbac_www"),t=(0,o.useRoleBasedAccessControlContext)(),{activeProfile:i}=t||{};return e().anyEnabled&&i||Object.freeze({})}},616627:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(40142),o=i(34411),r=i(382745),a=i(855168);const s=e=>{var t;const i=(0,a.TH)(),s=(0,o.ZP)(),l=(0,a.$B)("/:username"),d=null==l||null===(t=l.params)||void 0===t?void 0:t.username,c=(0,a.$B)("/pin/:id"),u=(0,n.useSelector)((e=>{var t,i,n,o;return!(null==c||null===(t=c.params)||void 0===t||!t.id)&&(null==e||null===(i=e.pins)||void 0===i||null===(n=i[c.params.id])||void 0===n||null===(o=n.pinner)||void 0===o?void 0:o.id)}));if((0,r.ej)(i))return!1;if((0,r.RU)(i))return!0;const p=e.concat(s.isAuth?{user:{username:s.username},id:s.id}:{}).find((e=>{const{user:t={},id:i}=e||{},{username:n}=t;return!!(n&&d||u&&i)&&(n===d||u===i)}));return!!p&&p.id}},159276:(e,t,i)=>{i.d(t,{Ms:()=>n,lJ:()=>o,q6:()=>r,D3:()=>a,KY:()=>s,N1:()=>l});const n=(e,t)=>{let i=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(i=t.user.username),i},o=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",r=(e,t,i)=>!!(e&&e.isAuth&&i&&i.id&&i.id!==e.id&&i.id===t),a=(e,t,i)=>!!(r(e,t,i)||e&&e.isAuth&&t===e.id),s=(e,t,i)=>{const n=t&&t.owner&&t.owner.id||"";return a(e,n,i)};function l(e,t,i){const n=t?t.id:"";return a(e,n,i)}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/98791-fd2042f52d19f698.mjs.map